import{s as $e,n as Ne,d as b,w as et,r as tt,o as V,x as Je,a as Ze,i as qe,b as t,p as G,q as lt,c as e,y as rt,e as n,f as C,g as J,h as v,j as de,k as i,l as y,t as ce,v as at,z as ot}from"./DUYTDFI5.js";import{e as We}from"./fXUx-Agj.js";import{S as st,i as nt}from"./z4FfSzan.js";import{g as Xe}from"./cHKaPAAi.js";import{a as ue}from"./BF9jo3u2.js";function Ke(l,o,r){const s=l.slice();return s[20]=o[r],s}function Qe(l){let o,r,s=l[7].name+"",d;return{c(){o=i("p"),r=ce("Selected: "),d=ce(s),this.h()},l(f){o=n(f,"P",{class:!0});var h=C(o);r=de(h,"Selected: "),d=de(h,s),h.forEach(b),this.h()},h(){e(o,"class","text-sm text-gray-500 mt-1")},m(f,h){qe(f,o,h),t(o,r),t(o,d)},p(f,h){h&128&&s!==(s=f[7].name+"")&&Ze(d,s)},d(f){f&&b(o)}}}function Ye(l){let o,r=l[20].label+"",s;return{c(){o=i("option"),s=ce(r),this.h()},l(d){o=n(d,"OPTION",{});var f=C(o);s=de(f,r),f.forEach(b),this.h()},h(){o.__value=l[20].value,V(o,o.__value)},m(d,f){qe(d,o,f),t(o,s)},p:Ne,d(d){d&&b(o)}}}function it(l){let o,r,s,d,f="Basic Information",h,w,k,R="Company Logo",N,g,x,oe,q,j,fe="Company Name",se,I,ne,H,F,pe="Location",_,u,L,m,B,me="Website URL",W,D,ke,A,$,je="Company Details",Ie,ee,X,Fe="Specialization",Pe,U,Le,te,K,Oe="Sponsor Package",De,T,Te,le,Q,Re="Full Description",Ue,S,Se,Y,O,ze,Be,M,ie=l[8]?l[0]==="edit"?"Updating...":"Creating...":l[0]==="edit"?"Update Partner":"Create Partner",be,he,Ae,xe,P=l[7]&&Qe(l),re=We(l[10]),E=[];for(let a=0;a<re.length;a+=1)E[a]=Ye(Ke(l,re,a));return{c(){o=i("form"),r=i("div"),s=i("div"),d=i("h2"),d.textContent=f,h=y(),w=i("div"),k=i("label"),k.textContent=R,N=y(),g=i("input"),x=y(),P&&P.c(),oe=y(),q=i("div"),j=i("label"),j.textContent=fe,se=y(),I=i("input"),ne=y(),H=i("div"),F=i("label"),F.textContent=pe,_=y(),u=i("input"),L=y(),m=i("div"),B=i("label"),B.textContent=me,W=y(),D=i("input"),ke=y(),A=i("div"),$=i("h2"),$.textContent=je,Ie=y(),ee=i("div"),X=i("label"),X.textContent=Fe,Pe=y(),U=i("input"),Le=y(),te=i("div"),K=i("label"),K.textContent=Oe,De=y(),T=i("select");for(let a=0;a<E.length;a+=1)E[a].c();Te=y(),le=i("div"),Q=i("label"),Q.textContent=Re,Ue=y(),S=i("textarea"),Se=y(),Y=i("div"),O=i("button"),ze=ce("Cancel"),Be=y(),M=i("button"),be=ce(ie),this.h()},l(a){o=n(a,"FORM",{class:!0});var c=C(o);r=n(c,"DIV",{class:!0});var p=C(r);s=n(p,"DIV",{class:!0});var z=C(s);d=n(z,"H2",{class:!0,"data-svelte-h":!0}),J(d)!=="svelte-1ls0afs"&&(d.textContent=f),h=v(z),w=n(z,"DIV",{});var ae=C(w);k=n(ae,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(k)!=="svelte-xw6fgt"&&(k.textContent=R),N=v(ae),g=n(ae,"INPUT",{type:!0,id:!0,accept:!0,class:!0}),x=v(ae),P&&P.l(ae),ae.forEach(b),oe=v(z),q=n(z,"DIV",{});var ge=C(q);j=n(ge,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(j)!=="svelte-1bnlma5"&&(j.textContent=fe),se=v(ge),I=n(ge,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),ge.forEach(b),ne=v(z),H=n(z,"DIV",{});var _e=C(H);F=n(_e,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(F)!=="svelte-ygyy38"&&(F.textContent=pe),_=v(_e),u=n(_e,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),_e.forEach(b),L=v(z),m=n(z,"DIV",{});var ve=C(m);B=n(ve,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(B)!=="svelte-19scho7"&&(B.textContent=me),W=v(ve),D=n(ve,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),ve.forEach(b),z.forEach(b),ke=v(p),A=n(p,"DIV",{class:!0});var Z=C(A);$=n(Z,"H2",{class:!0,"data-svelte-h":!0}),J($)!=="svelte-3xqhqj"&&($.textContent=je),Ie=v(Z),ee=n(Z,"DIV",{});var ye=C(ee);X=n(ye,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(X)!=="svelte-6hntp0"&&(X.textContent=Fe),Pe=v(ye),U=n(ye,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),ye.forEach(b),Le=v(Z),te=n(Z,"DIV",{});var Ce=C(te);K=n(Ce,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(K)!=="svelte-s31cf6"&&(K.textContent=Oe),De=v(Ce),T=n(Ce,"SELECT",{id:!0,class:!0});var He=C(T);for(let Ve=0;Ve<E.length;Ve+=1)E[Ve].l(He);He.forEach(b),Ce.forEach(b),Te=v(Z),le=n(Z,"DIV",{});var we=C(le);Q=n(we,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(Q)!=="svelte-yenkvn"&&(Q.textContent=Re),Ue=v(we),S=n(we,"TEXTAREA",{id:!0,rows:!0,class:!0,placeholder:!0}),C(S).forEach(b),we.forEach(b),Z.forEach(b),p.forEach(b),Se=v(c),Y=n(c,"DIV",{class:!0});var Ee=C(Y);O=n(Ee,"BUTTON",{type:!0,class:!0});var Me=C(O);ze=de(Me,"Cancel"),Me.forEach(b),Be=v(Ee),M=n(Ee,"BUTTON",{type:!0,class:!0});var Ge=C(M);be=de(Ge,ie),Ge.forEach(b),Ee.forEach(b),c.forEach(b),this.h()},h(){e(d,"class","text-xl font-semibold text-blue-whale"),e(k,"for","logo"),e(k,"class","block text-sm font-medium text-gray-700"),e(g,"type","file"),e(g,"id","logo"),e(g,"accept","image/*"),g.disabled=l[8],e(g,"class","mt-1 w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),e(j,"for","name"),e(j,"class","block text-sm font-medium text-gray-700"),e(I,"type","text"),e(I,"id","name"),I.required=!0,I.disabled=l[8],e(I,"class","mt-1 w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),e(I,"placeholder","Partner company name"),e(F,"for","location"),e(F,"class","block text-sm font-medium text-gray-700"),e(u,"type","text"),e(u,"id","location"),u.required=!0,u.disabled=l[8],e(u,"class","mt-1 w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),e(u,"placeholder","City, Country"),e(B,"for","url"),e(B,"class","block text-sm font-medium text-gray-700"),e(D,"type","url"),e(D,"id","url"),D.required=!0,D.disabled=l[8],e(D,"class","mt-1 w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),e(D,"placeholder","https://company.com"),e(s,"class","space-y-4"),e($,"class","text-xl font-semibold text-blue-whale"),e(X,"for","specialization"),e(X,"class","block text-sm font-medium text-gray-700"),e(U,"type","text"),e(U,"id","specialization"),U.required=!0,U.disabled=l[8],e(U,"class","mt-1 w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),e(U,"placeholder","e.g., Software Development, AI, Consulting"),e(K,"for","package"),e(K,"class","block text-sm font-medium text-gray-700"),e(T,"id","package"),T.required=!0,T.disabled=l[8],e(T,"class","mt-1 w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),l[6]===void 0&&rt(()=>l[17].call(T)),e(Q,"for","description"),e(Q,"class","block text-sm font-medium text-gray-700"),e(S,"id","description"),S.disabled=l[8],e(S,"rows","4"),e(S,"class","mt-1 w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),e(S,"placeholder","Detailed description of the company, its mission, and services (optional)"),e(A,"class","space-y-4"),e(r,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),e(O,"type","button"),O.disabled=l[8],e(O,"class","bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600 disabled:opacity-50"),e(M,"type","submit"),M.disabled=he=l[8]||!l[1].trim()||!l[2].trim()||!l[3].trim()||!l[5].trim(),e(M,"class","bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 disabled:opacity-50"),e(Y,"class","flex justify-end space-x-4 pt-6 border-t"),e(o,"class","space-y-6")},m(a,c){qe(a,o,c),t(o,r),t(r,s),t(s,d),t(s,h),t(s,w),t(w,k),t(w,N),t(w,g),t(w,x),P&&P.m(w,null),t(s,oe),t(s,q),t(q,j),t(q,se),t(q,I),V(I,l[1]),t(s,ne),t(s,H),t(H,F),t(H,_),t(H,u),V(u,l[2]),t(s,L),t(s,m),t(m,B),t(m,W),t(m,D),V(D,l[5]),t(r,ke),t(r,A),t(A,$),t(A,Ie),t(A,ee),t(ee,X),t(ee,Pe),t(ee,U),V(U,l[3]),t(A,Le),t(A,te),t(te,K),t(te,De),t(te,T);for(let p=0;p<E.length;p+=1)E[p]&&E[p].m(T,null);Je(T,l[6],!0),t(A,Te),t(A,le),t(le,Q),t(le,Ue),t(le,S),V(S,l[4]),t(o,Se),t(o,Y),t(Y,O),t(O,ze),t(Y,Be),t(Y,M),t(M,be),Ae||(xe=[G(g,"change",l[9]),G(I,"input",l[13]),G(u,"input",l[14]),G(D,"input",l[15]),G(U,"input",l[16]),G(T,"change",l[17]),G(S,"input",l[18]),G(O,"click",l[19]),G(o,"submit",lt(l[11]))],Ae=!0)},p(a,[c]){if(c&256&&(g.disabled=a[8]),a[7]?P?P.p(a,c):(P=Qe(a),P.c(),P.m(w,null)):P&&(P.d(1),P=null),c&256&&(I.disabled=a[8]),c&2&&I.value!==a[1]&&V(I,a[1]),c&256&&(u.disabled=a[8]),c&4&&u.value!==a[2]&&V(u,a[2]),c&256&&(D.disabled=a[8]),c&32&&D.value!==a[5]&&V(D,a[5]),c&256&&(U.disabled=a[8]),c&8&&U.value!==a[3]&&V(U,a[3]),c&1024){re=We(a[10]);let p;for(p=0;p<re.length;p+=1){const z=Ke(a,re,p);E[p]?E[p].p(z,c):(E[p]=Ye(z),E[p].c(),E[p].m(T,null))}for(;p<E.length;p+=1)E[p].d(1);E.length=re.length}c&256&&(T.disabled=a[8]),c&1088&&Je(T,a[6]),c&256&&(S.disabled=a[8]),c&16&&V(S,a[4]),c&256&&(O.disabled=a[8]),c&257&&ie!==(ie=a[8]?a[0]==="edit"?"Updating...":"Creating...":a[0]==="edit"?"Update Partner":"Create Partner")&&Ze(be,ie),c&302&&he!==(he=a[8]||!a[1].trim()||!a[2].trim()||!a[3].trim()||!a[5].trim())&&(M.disabled=he)},i:Ne,o:Ne,d(a){a&&b(o),P&&P.d(),et(E,a),Ae=!1,tt(xe)}}}function ut(l,o,r){let{id:s=-1}=o,{mode:d="create"}=o,f="",h="",w="",k="",R="",N="bronze",g=null;at(async()=>{if(!(d!=="edit"||!s)){r(8,x=!0);try{const _=await fetch(ue(`/partner/${s}`),{credentials:"include"});if(!_.ok){console.warn("Failed to fetch partner:",_.status);return}const u=await _.json();r(1,f=u.name??""),r(2,h=u.location??""),r(3,w=u.specialization??""),r(4,k=u.description??""),r(5,R=u.url??""),r(6,N=u.package??"bronze");let L=null;try{if(u.logoUrl){const m=await fetch(u.logoUrl,{credentials:"include"});m.ok&&(L=await m.blob())}else{const m=await fetch(ue(`/partner/${s}/logo`),{credentials:"include"});m.ok&&(L=await m.blob())}}catch(m){console.warn("Failed to fetch partner logo:",m)}if(L){const m=L.type.split("/")[1]??"jpg";r(7,g=new File([L],`partner-${s}.${m}`,{type:L.type}))}else r(7,g=null)}catch(_){console.error("Error loading partner data:",_)}finally{r(8,x=!1)}}});let x=!1;function oe(_){const L=_.target.files;L&&L[0]&&r(7,g=L[0])}const q=[{value:"copper",label:"Copper"},{value:"bronze",label:"Bronze"},{value:"silver",label:"Silver"},{value:"gold",label:"Gold"},{value:"platinum",label:"Platinum"}];async function j(){r(8,x=!0);const _={name:f.trim(),location:h.trim(),specialization:w.trim(),...k.trim()&&{description:k.trim()},url:R.trim(),package:N};try{const u=d==="edit"?ue(`/partner/${s}`):ue("/partner"),m=await fetch(u,{method:d==="edit"?"PUT":"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(_)});if(m.ok){const B=await m.json(),me=d==="edit"?s:B.id;if(g)try{const W=new FormData;W.append("logo",g),(await fetch(ue(`/partner/${me}/logo`),{method:"PUT",body:W,credentials:"include"})).ok||console.warn("Logo upload failed, but partner was saved")}catch(W){console.warn("Logo upload error:",W)}d==="create"&&(r(1,f=""),r(2,h=""),r(3,w=""),r(4,k=""),r(5,R=""),r(6,N="bronze"),r(7,g=null)),setTimeout(()=>{Xe("/partners")},1e3)}else{const B=await m.json();console.error("Failed to save partner:",B)}}catch(u){console.error(u)}finally{r(8,x=!1)}}function fe(){f=this.value,r(1,f)}function se(){h=this.value,r(2,h)}function I(){R=this.value,r(5,R)}function ne(){w=this.value,r(3,w)}function H(){N=ot(this),r(6,N),r(10,q)}function F(){k=this.value,r(4,k)}const pe=()=>Xe("/partners");return l.$$set=_=>{"id"in _&&r(12,s=_.id),"mode"in _&&r(0,d=_.mode)},[d,f,h,w,k,R,N,g,x,oe,q,j,s,fe,se,I,ne,H,F,pe]}class bt extends st{constructor(o){super(),nt(this,o,ut,it,$e,{id:12,mode:0})}}export{bt as P};
