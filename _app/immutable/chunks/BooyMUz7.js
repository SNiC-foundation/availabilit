import{s as pt,n as Xe,d as m,w as We,r as ht,o as F,x as st,a as bt,i as ce,b as s,p as j,q as _t,c as n,y as mt,e as d,f as w,g as ee,h as E,j as re,k as c,l as C,t as ae,v as gt,z as vt}from"./DUYTDFI5.js";import{e as de}from"./fXUx-Agj.js";import{S as kt,i as yt}from"./z4FfSzan.js";import{g as rt}from"./Ccp9Cg-t.js";import{a as ke}from"./BF9jo3u2.js";function at(e,l,t){const o=e.slice();return o[27]=l[t],o[28]=l,o[29]=t,o}function nt(e,l,t){const o=e.slice();return o[30]=l[t],o[31]=l,o[29]=t,o}function ot(e,l,t){const o=e.slice();return o[32]=l[t],o}function it(e){let l,t=e[32].label+"",o;return{c(){l=c("option"),o=ae(t),this.h()},l(i){l=d(i,"OPTION",{});var k=w(l);o=re(k,t),k.forEach(m),this.h()},h(){l.__value=e[32].value,F(l,l.__value)},m(i,k){ce(i,l,k),s(l,o)},p:Xe,d(i){i&&m(l)}}}function ut(e){let l,t,o,i;function k(){return e[22](e[29])}return{c(){l=c("button"),t=ae("×"),this.h()},l(h){l=d(h,"BUTTON",{type:!0,class:!0});var p=w(l);t=re(p,"×"),p.forEach(m),this.h()},h(){n(l,"type","button"),l.disabled=e[7],n(l,"class","bg-red-500 text-white px-3 py-2 rounded hover:bg-red-600 disabled:opacity-50")},m(h,p){ce(h,l,p),s(l,t),o||(i=j(l,"click",k),o=!0)},p(h,p){e=h,p[0]&128&&(l.disabled=e[7])},d(h){h&&m(l),o=!1,i()}}}function dt(e){let l,t,o,i,k,h,p,f;function T(){e[20].call(t,e[31],e[29])}function v(){e[21].call(i,e[31],e[29])}let b=e[4].length>1&&ut(e);return{c(){l=c("div"),t=c("input"),o=C(),i=c("input"),k=C(),b&&b.c(),h=C(),this.h()},l(O){l=d(O,"DIV",{class:!0});var I=w(l);t=d(I,"INPUT",{type:!0,class:!0,placeholder:!0}),o=E(I),i=d(I,"INPUT",{type:!0,class:!0,placeholder:!0}),k=E(I),b&&b.l(I),h=E(I),I.forEach(m),this.h()},h(){n(t,"type","url"),t.disabled=e[7],n(t,"class","flex-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),n(t,"placeholder","https://example.com"),n(i,"type","text"),i.disabled=e[7],n(i,"class","flex-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),n(i,"placeholder","Link icon"),n(l,"class","flex gap-2")},m(O,I){ce(O,l,I),s(l,t),F(t,e[30].url),s(l,o),s(l,i),F(i,e[30].icon),s(l,k),b&&b.m(l,null),s(l,h),p||(f=[j(t,"input",T),j(i,"input",v)],p=!0)},p(O,I){e=O,I[0]&128&&(t.disabled=e[7]),I[0]&16&&t.value!==e[30].url&&F(t,e[30].url),I[0]&128&&(i.disabled=e[7]),I[0]&16&&i.value!==e[30].icon&&F(i,e[30].icon),e[4].length>1?b?b.p(e,I):(b=ut(e),b.c(),b.m(l,h)):b&&(b.d(1),b=null)},d(O){O&&m(l),b&&b.d(),p=!1,ht(f)}}}function ct(e){let l,t,o,i;function k(){return e[24](e[29])}return{c(){l=c("button"),t=ae("×"),this.h()},l(h){l=d(h,"BUTTON",{type:!0,class:!0});var p=w(l);t=re(p,"×"),p.forEach(m),this.h()},h(){n(l,"type","button"),l.disabled=e[7],n(l,"class","bg-red-500 text-white px-3 py-2 rounded hover:bg-red-600 disabled:opacity-50")},m(h,p){ce(h,l,p),s(l,t),o||(i=j(l,"click",k),o=!0)},p(h,p){e=h,p[0]&128&&(l.disabled=e[7])},d(h){h&&m(l),o=!1,i()}}}function ft(e){let l,t,o,i,k,h;function p(){e[23].call(t,e[29])}let f=e[5].length>1&&ct(e);return{c(){l=c("div"),t=c("input"),o=C(),f&&f.c(),i=C(),this.h()},l(T){l=d(T,"DIV",{class:!0});var v=w(l);t=d(v,"INPUT",{type:!0,class:!0,placeholder:!0}),o=E(v),f&&f.l(v),i=E(v),v.forEach(m),this.h()},h(){n(t,"type","text"),t.disabled=e[7],n(t,"class","flex-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),n(t,"placeholder","Tag name (e.g., AI, Technology, Innovation)"),n(l,"class","flex gap-2")},m(T,v){ce(T,l,v),s(l,t),F(t,e[5][e[29]]),s(l,o),f&&f.m(l,null),s(l,i),k||(h=j(t,"input",p),k=!0)},p(T,v){e=T,v[0]&128&&(t.disabled=e[7]),v[0]&32&&t.value!==e[5][e[29]]&&F(t,e[5][e[29]]),e[5].length>1?f?f.p(e,v):(f=ct(e),f.c(),f.m(l,i)):f&&(f.d(1),f=null)},d(T){T&&m(l),f&&f.d(),k=!1,h()}}}function Tt(e){let l,t,o,i,k="Basic Information",h,p,f,T,v,b,O="Name",I,D,fe,H,M,he="Speaker Type",pe,L,be,q,X,ye="Talk",_e,G,z,Te="Title",me,u,g,U,_,Be="Bio/Description",te,S,ge,P,Q,le,Ge="Links",Oe,J,Pe,je,Fe,Y,x,se,Qe="Tags",qe,K,Re,He,Me,$,W,ze,Je,Z,ve=e[7]?e[0]==="edit"?"Updating...":"Creating...":e[0]==="edit"?"Update Speaker":"Create Speaker",we,Ee,Ke,Ye,ne=de(e[9]),A=[];for(let a=0;a<ne.length;a+=1)A[a]=it(ot(e,ne,a));let oe=de(e[4]),N=[];for(let a=0;a<oe.length;a+=1)N[a]=dt(nt(e,oe,a));let ie=de(e[5]),V=[];for(let a=0;a<ie.length;a+=1)V[a]=ft(at(e,ie,a));return{c(){l=c("form"),t=c("div"),o=c("div"),i=c("h2"),i.textContent=k,h=C(),p=c("div"),f=c("input"),T=C(),v=c("div"),b=c("label"),b.textContent=O,I=C(),D=c("input"),fe=C(),H=c("div"),M=c("label"),M.textContent=he,pe=C(),L=c("select");for(let a=0;a<A.length;a+=1)A[a].c();be=C(),q=c("div"),X=c("h2"),X.textContent=ye,_e=C(),G=c("div"),z=c("label"),z.textContent=Te,me=C(),u=c("input"),g=C(),U=c("div"),_=c("label"),_.textContent=Be,te=C(),S=c("textarea"),ge=C(),P=c("div"),Q=c("div"),le=c("h2"),le.textContent=Ge,Oe=C(),J=c("button"),Pe=ae("Add Link"),je=C();for(let a=0;a<N.length;a+=1)N[a].c();Fe=C(),Y=c("div"),x=c("div"),se=c("h2"),se.textContent=Qe,qe=C(),K=c("button"),Re=ae("Add Tag"),He=C();for(let a=0;a<V.length;a+=1)V[a].c();Me=C(),$=c("div"),W=c("button"),ze=ae("Cancel"),Je=C(),Z=c("button"),we=ae(ve),this.h()},l(a){l=d(a,"FORM",{class:!0});var y=w(l);t=d(y,"DIV",{class:!0});var r=w(t);o=d(r,"DIV",{class:!0});var B=w(o);i=d(B,"H2",{class:!0,"data-svelte-h":!0}),ee(i)!=="svelte-1ls0afs"&&(i.textContent=k),h=E(B),p=d(B,"DIV",{});var Ze=w(p);f=d(Ze,"INPUT",{type:!0,accept:!0}),Ze.forEach(m),T=E(B),v=d(B,"DIV",{});var Ce=w(v);b=d(Ce,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ee(b)!=="svelte-15rra68"&&(b.textContent=O),I=E(Ce),D=d(Ce,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),Ce.forEach(m),fe=E(B),H=d(B,"DIV",{});var Ie=w(H);M=d(Ie,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ee(M)!=="svelte-1dwx91f"&&(M.textContent=he),pe=E(Ie),L=d(Ie,"SELECT",{id:!0,class:!0});var xe=w(L);for(let R=0;R<A.length;R+=1)A[R].l(xe);xe.forEach(m),Ie.forEach(m),B.forEach(m),be=E(r),q=d(r,"DIV",{class:!0});var ue=w(q);X=d(ue,"H2",{class:!0,"data-svelte-h":!0}),ee(X)!=="svelte-1emnt9y"&&(X.textContent=ye),_e=E(ue),G=d(ue,"DIV",{});var Ue=w(G);z=d(Ue,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ee(z)!=="svelte-kdnxu0"&&(z.textContent=Te),me=E(Ue),u=d(Ue,"INPUT",{id:!0,class:!0,placeholder:!0}),Ue.forEach(m),g=E(ue),U=d(ue,"DIV",{});var Se=w(U);_=d(Se,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ee(_)!=="svelte-1bc0wd9"&&(_.textContent=Be),te=E(Se),S=d(Se,"TEXTAREA",{id:!0,rows:!0,class:!0,placeholder:!0}),w(S).forEach(m),Se.forEach(m),ue.forEach(m),ge=E(r),P=d(r,"DIV",{class:!0});var De=w(P);Q=d(De,"DIV",{class:!0});var Le=w(Q);le=d(Le,"H2",{class:!0,"data-svelte-h":!0}),ee(le)!=="svelte-x0r997"&&(le.textContent=Ge),Oe=E(Le),J=d(Le,"BUTTON",{type:!0,class:!0});var $e=w(J);Pe=re($e,"Add Link"),$e.forEach(m),Le.forEach(m),je=E(De);for(let R=0;R<N.length;R+=1)N[R].l(De);De.forEach(m),Fe=E(r),Y=d(r,"DIV",{class:!0});var Ae=w(Y);x=d(Ae,"DIV",{class:!0});var Ne=w(x);se=d(Ne,"H2",{class:!0,"data-svelte-h":!0}),ee(se)!=="svelte-3g7g65"&&(se.textContent=Qe),qe=E(Ne),K=d(Ne,"BUTTON",{type:!0,class:!0});var et=w(K);Re=re(et,"Add Tag"),et.forEach(m),Ne.forEach(m),He=E(Ae);for(let R=0;R<V.length;R+=1)V[R].l(Ae);Ae.forEach(m),r.forEach(m),Me=E(y),$=d(y,"DIV",{class:!0});var Ve=w($);W=d(Ve,"BUTTON",{type:!0,class:!0});var tt=w(W);ze=re(tt,"Cancel"),tt.forEach(m),Je=E(Ve),Z=d(Ve,"BUTTON",{type:!0,class:!0});var lt=w(Z);we=re(lt,ve),lt.forEach(m),Ve.forEach(m),y.forEach(m),this.h()},h(){n(i,"class","text-xl font-semibold text-blue-whale"),n(f,"type","file"),n(f,"accept","image/*"),n(b,"for","name"),n(b,"class","block text-sm font-medium text-gray-700"),n(D,"type","text"),n(D,"id","name"),D.required=!0,D.disabled=e[7],n(D,"class","mt-1 w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),n(D,"placeholder","Speaker's full name"),n(M,"for","type"),n(M,"class","block text-sm font-medium text-gray-700"),n(L,"id","type"),L.required=!0,L.disabled=e[7],n(L,"class","mt-1 w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),e[6]===void 0&&mt(()=>e[17].call(L)),n(o,"class","space-y-4"),n(X,"class","text-xl font-semibold text-blue-whale"),n(z,"for","title"),n(z,"class","block text-sm font-medium text-gray-700"),n(u,"id","title"),u.required=!0,u.disabled=e[7],n(u,"class","mt-1 w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),n(u,"placeholder","Talk title"),n(_,"for","description"),n(_,"class","block text-sm font-medium text-gray-700"),n(S,"id","description"),S.required=!0,S.disabled=e[7],n(S,"rows","6"),n(S,"class","mt-1 w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),n(S,"placeholder","Speaker's biography, background, and expertise..."),n(q,"class","space-y-4"),n(le,"class","text-xl font-semibold text-blue-whale"),n(J,"type","button"),J.disabled=e[7],n(J,"class","bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600 disabled:opacity-50"),n(Q,"class","flex justify-between items-center"),n(P,"class","space-y-4"),n(se,"class","text-xl font-semibold text-blue-whale"),n(K,"type","button"),K.disabled=e[7],n(K,"class","bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600 disabled:opacity-50"),n(x,"class","flex justify-between items-center"),n(Y,"class","space-y-4"),n(t,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),n(W,"type","button"),W.disabled=e[7],n(W,"class","bg-gray-500 text-white px-6 py-2 rounded hover:bg-gray-600 disabled:opacity-50"),n(Z,"type","submit"),Z.disabled=Ee=e[7]||!e[1].trim()||!e[3].trim(),n(Z,"class","bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 disabled:opacity-50"),n($,"class","flex justify-end space-x-4 pt-6 border-t"),n(l,"class","space-y-6")},m(a,y){ce(a,l,y),s(l,t),s(t,o),s(o,i),s(o,h),s(o,p),s(p,f),s(o,T),s(o,v),s(v,b),s(v,I),s(v,D),F(D,e[1]),s(o,fe),s(o,H),s(H,M),s(H,pe),s(H,L);for(let r=0;r<A.length;r+=1)A[r]&&A[r].m(L,null);st(L,e[6],!0),s(t,be),s(t,q),s(q,X),s(q,_e),s(q,G),s(G,z),s(G,me),s(G,u),F(u,e[2]),s(q,g),s(q,U),s(U,_),s(U,te),s(U,S),F(S,e[3]),s(t,ge),s(t,P),s(P,Q),s(Q,le),s(Q,Oe),s(Q,J),s(J,Pe),s(P,je);for(let r=0;r<N.length;r+=1)N[r]&&N[r].m(P,null);s(t,Fe),s(t,Y),s(Y,x),s(x,se),s(x,qe),s(x,K),s(K,Re),s(Y,He);for(let r=0;r<V.length;r+=1)V[r]&&V[r].m(Y,null);s(l,Me),s(l,$),s($,W),s(W,ze),s($,Je),s($,Z),s(Z,we),Ke||(Ye=[j(f,"change",e[8]),j(D,"input",e[16]),j(L,"change",e[17]),j(u,"input",e[18]),j(S,"input",e[19]),j(J,"click",e[10]),j(K,"click",e[12]),j(W,"click",e[25]),j(l,"submit",_t(e[14]))],Ke=!0)},p(a,y){if(y[0]&128&&(D.disabled=a[7]),y[0]&2&&D.value!==a[1]&&F(D,a[1]),y[0]&512){ne=de(a[9]);let r;for(r=0;r<ne.length;r+=1){const B=ot(a,ne,r);A[r]?A[r].p(B,y):(A[r]=it(B),A[r].c(),A[r].m(L,null))}for(;r<A.length;r+=1)A[r].d(1);A.length=ne.length}if(y[0]&128&&(L.disabled=a[7]),y[0]&576&&st(L,a[6]),y[0]&128&&(u.disabled=a[7]),y[0]&4&&u.value!==a[2]&&F(u,a[2]),y[0]&128&&(S.disabled=a[7]),y[0]&8&&F(S,a[3]),y[0]&128&&(J.disabled=a[7]),y[0]&2192){oe=de(a[4]);let r;for(r=0;r<oe.length;r+=1){const B=nt(a,oe,r);N[r]?N[r].p(B,y):(N[r]=dt(B),N[r].c(),N[r].m(P,null))}for(;r<N.length;r+=1)N[r].d(1);N.length=oe.length}if(y[0]&128&&(K.disabled=a[7]),y[0]&8352){ie=de(a[5]);let r;for(r=0;r<ie.length;r+=1){const B=at(a,ie,r);V[r]?V[r].p(B,y):(V[r]=ft(B),V[r].c(),V[r].m(Y,null))}for(;r<V.length;r+=1)V[r].d(1);V.length=ie.length}y[0]&128&&(W.disabled=a[7]),y[0]&129&&ve!==(ve=a[7]?a[0]==="edit"?"Updating...":"Creating...":a[0]==="edit"?"Update Speaker":"Create Speaker")&&bt(we,ve),y[0]&138&&Ee!==(Ee=a[7]||!a[1].trim()||!a[3].trim())&&(Z.disabled=Ee)},i:Xe,o:Xe,d(a){a&&m(l),We(A,a),We(N,a),We(V,a),Ke=!1,ht(Ye)}}}function wt(e,l,t){let{id:o=-1}=l,{mode:i="create"}=l,k="",h="",p="",f=[{url:"",icon:""}],T=[""],v="talk",b=null;gt(async()=>{if(!(i!=="edit"||!o)){t(7,O=!0);try{const u=await fetch(ke(`/speaker/${o}`),{credentials:"include"});if(!u.ok){console.warn("Failed to fetch speaker:",u.status);return}const g=await u.json();t(1,k=g.name??""),t(2,h=g.title??""),t(3,p=g.description??""),Array.isArray(g.links)&&g.links.length?t(4,f=g.links.map(_=>({url:_.url??"",icon:_.icon??""}))):t(4,f=[{url:"",icon:""}]),Array.isArray(g.tags)&&g.tags.length?t(5,T=g.tags.map(_=>String(_))):t(5,T=[""]),t(6,v=(g.type??"talk").toLowerCase());let U=null;try{if(g.imageUrl){const _=await fetch(g.imageUrl,{credentials:"include"});_.ok&&(U=await _.blob())}else{const _=await fetch(ke(`/speaker/${o}/image`),{credentials:"include"});_.ok&&(U=await _.blob())}}catch(_){console.warn("Failed to fetch speaker image:",_)}if(U){const _=U.type.split("/")[1]??"jpg";b=new File([U],`speaker-${o}.${_}`,{type:U.type})}else b=null}catch(u){console.error("Error loading speaker data:",u)}finally{t(7,O=!1)}}});let O=!1;function I(u){const g=u.target.files;g&&g[0]&&(b=g[0])}const D=[{value:"keynote",label:"Keynote Speaker"},{value:"talk",label:"Workshop Speaker"},{value:"host",label:"Panel Speaker"}];function fe(){t(4,f=[...f,{url:"",icon:""}])}function H(u){t(4,f=f.filter((g,U)=>U!==u))}function M(){t(5,T=[...T,""])}function he(u){t(5,T=T.filter((g,U)=>U!==u))}async function pe(){t(7,O=!0);const u=f.filter(_=>_.url.trim()&&_.icon.trim()),g=T.filter(_=>_.trim()),U={name:k.trim(),title:h.trim(),description:p.trim(),...u.length>0&&{links:u},...g.length>0&&{tags:g},type:v};try{const _=i==="edit"?ke(`/speaker/${o}`):ke("/speaker"),te=await fetch(_,{method:i==="edit"?"PUT":"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(U)});if(te.ok){const S=await te.json(),ge=i==="edit"?o:S.id;if(b)try{const P=new FormData;P.append("logo",b),(await fetch(ke(`/speaker/${ge}/image`),{method:"PUT",body:P,credentials:"include"})).ok||console.warn("Image upload failed, but speaker was saved")}catch(P){console.warn("Image upload error:",P)}i==="create"&&(t(1,k=""),t(2,h=""),t(3,p=""),t(4,f=[{url:"",icon:""}]),t(5,T=[""]),t(6,v="talk"),b=null),setTimeout(()=>{rt("/speakers")},1e3)}else{const S=await te.json();console.error("Failed to save speaker:",S)}}catch(_){console.error(_)}finally{t(7,O=!1)}}function L(){k=this.value,t(1,k)}function be(){v=vt(this),t(6,v),t(9,D)}function q(){h=this.value,t(2,h)}function X(){p=this.value,t(3,p)}function ye(u,g){u[g].url=this.value,t(4,f)}function _e(u,g){u[g].icon=this.value,t(4,f)}const G=u=>H(u);function z(u){T[u]=this.value,t(5,T)}const Te=u=>he(u),me=()=>rt("/speakers");return e.$$set=u=>{"id"in u&&t(15,o=u.id),"mode"in u&&t(0,i=u.mode)},[i,k,h,p,f,T,v,O,I,D,fe,H,M,he,pe,o,L,be,q,X,ye,_e,G,z,Te,me]}class Dt extends kt{constructor(l){super(),yt(this,l,wt,Tt,pt,{id:15,mode:0},null,[-1,-1])}}export{Dt as S};
