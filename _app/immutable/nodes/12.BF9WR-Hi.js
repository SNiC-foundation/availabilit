import{s as xe,n as le,d,a as R,i as T,b as f,p as pe,c as b,e as v,f as m,j as B,h as S,k as p,t as H,l as I,m as Ee,B as Ze,g as oe,u as ue,v as $e,w as et}from"../chunks/DpgxVbgB.js";import{S as Pe,i as Ce,d as De,t as te,a as Q,g as ye,c as we,m as Se,b as Ie,e as Te}from"../chunks/7JM-qOu2.js";import{e as Ve}from"../chunks/DW0hWwPi.js";import{a as Ae}from"../chunks/JSKLHevw.js";import{g as Oe}from"../chunks/D8UvEWkE.js";import{b as Le,c as tt,a as it}from"../chunks/2Lxiq0HD.js";import{H as lt}from"../chunks/BT7WRWO-.js";function je(a){let e,t='<i class="fa-solid fa-pencil text-picton-blue"></i>',s,l;return{c(){e=p("button"),e.innerHTML=t,this.h()},l(i){e=v(i,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-sjzna3"&&(e.innerHTML=t),this.h()},h(){b(e,"class","rounded-lg bg-blue-whale shadow shadow-black shadow-sm w-8 h-8")},m(i,n){T(i,e,n),s||(l=pe(e,"click",a[12]),s=!0)},p:le,d(i){i&&d(e),s=!1,l()}}}function rt(a){let e;return{c(){e=p("i"),this.h()},l(t){e=v(t,"I",{class:!0}),m(e).forEach(d),this.h()},h(){b(e,"class","fa-solid fa-expand text-blue-whale")},m(t,s){T(t,e,s)},d(t){t&&d(e)}}}function at(a){let e;return{c(){e=p("i"),this.h()},l(t){e=v(t,"I",{class:!0}),m(e).forEach(d),this.h()},h(){b(e,"class","fa-solid fa-times text-blue-whale")},m(t,s){T(t,e,s)},d(t){t&&d(e)}}}function Be(a){let e,t,s;return{c(){e=p("a"),t=p("i"),this.h()},l(l){e=v(l,"A",{href:!0,class:!0});var i=m(e);t=v(i,"I",{class:!0}),m(t).forEach(d),i.forEach(d),this.h()},h(){b(t,"class","fa-solid fa-link"),b(e,"href",s=a[0].recordingUrl),b(e,"class","flex gap-2 items-center text-gray-600 whitespace-nowrap")},m(l,i){T(l,e,i),f(e,t)},p(l,i){i&1&&s!==(s=l[0].recordingUrl)&&b(e,"href",s)},d(l){l&&d(e)}}}function nt(a){let e,t,s,l,i,n,c=a[0].subscribe.maxParticipants+"",r;return{c(){e=p("div"),t=p("i"),s=I(),l=p("span"),i=H(a[1]),n=H(" / "),r=H(c),this.h()},l(u){e=v(u,"DIV",{class:!0});var o=m(e);t=v(o,"I",{class:!0}),m(t).forEach(d),s=S(o),l=v(o,"SPAN",{});var h=m(l);i=B(h,a[1]),n=B(h," / "),r=B(h,c),h.forEach(d),o.forEach(d),this.h()},h(){b(t,"class","fa-solid fa-users"),b(e,"class","flex gap-2 items-center text-gray-600 flex-shrink-0 whitespace-nowrap")},m(u,o){T(u,e,o),f(e,t),f(e,s),f(e,l),f(l,i),f(l,n),f(l,r)},p(u,o){o&2&&R(i,u[1]),o&1&&c!==(c=u[0].subscribe.maxParticipants+"")&&R(r,c)},d(u){u&&d(e)}}}function ct(a){let e,t,s;function l(c,r){return r&1&&(e=null),r&1&&(t=null),c[11]&&c[6]?dt:(e==null&&(e=new Date(c[0].subscribe.subscriptionListOpenDate)>new Date),e?ut:(t==null&&(t=new Date(c[0].subscribe.subscriptionListCloseDate)<new Date),t?ft:ot))}let i=l(a,-1),n=i(a);return{c(){n.c(),s=ue()},l(c){n.l(c),s=ue()},m(c,r){n.m(c,r),T(c,s,r)},p(c,r){i===(i=l(c,r))&&n?n.p(c,r):(n.d(1),n=i(c),n&&(n.c(),n.m(s.parentNode,s)))},d(c){c&&d(s),n.d(c)}}}function ot(a){let e,t="Log in to subscribe to an activity";return{c(){e=p("span"),e.textContent=t,this.h()},l(s){e=v(s,"SPAN",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-1vs1ovh"&&(e.textContent=t),this.h()},h(){b(e,"class","text-xs")},m(s,l){T(s,e,l)},p:le,d(s){s&&d(e)}}}function ft(a){let e,t,s=new Date(a[0].subscribe.subscriptionListCloseDate)+"",l;return{c(){e=p("span"),t=H("Activity subscription closed on "),l=H(s),this.h()},l(i){e=v(i,"SPAN",{class:!0});var n=m(e);t=B(n,"Activity subscription closed on "),l=B(n,s),n.forEach(d),this.h()},h(){b(e,"class","text-xs")},m(i,n){T(i,e,n),f(e,t),f(e,l)},p(i,n){n&1&&s!==(s=new Date(i[0].subscribe.subscriptionListCloseDate)+"")&&R(l,s)},d(i){i&&d(e)}}}function ut(a){let e,t,s=new Date(a[0].subscribe.subscriptionListOpenDate)+"",l;return{c(){e=p("span"),t=H("Activity subscription opens on "),l=H(s),this.h()},l(i){e=v(i,"SPAN",{class:!0});var n=m(e);t=B(n,"Activity subscription opens on "),l=B(n,s),n.forEach(d),this.h()},h(){b(e,"class","text-xs")},m(i,n){T(i,e,n),f(e,t),f(e,l)},p(i,n){n&1&&s!==(s=new Date(i[0].subscribe.subscriptionListOpenDate)+"")&&R(l,s)},d(i){i&&d(e)}}}function dt(a){let e,t,s,l,i,n,c;function r(h,_){return h[2]||h[4]?bt:ht}let u=r(a),o=u(a);return{c(){e=p("button"),t=p("i"),l=I(),o.c(),this.h()},l(h){e=v(h,"BUTTON",{class:!0});var _=m(e);t=v(_,"I",{class:!0}),m(t).forEach(d),l=S(_),o.l(_),_.forEach(d),this.h()},h(){b(t,"class",s="fa-solid "+(a[2]||a[4]?"fa-check":"fa-plus")),b(e,"class",i="inline-flex shrink-0 cursor-pointer disabled:cursor-not-allowed disabled:bg-gray-700 items-center gap-2 px-4 py-2 rounded-md text-sm font-medium text-white "+(a[2]||a[4]?"bg-green-600":"bg-blue-whale hover:bg-blue-whale-dark")+" transition-colors duration-200"),e.disabled=!a[11]},m(h,_){T(h,e,_),f(e,t),f(e,l),o.m(e,null),n||(c=pe(e,"click",a[9]),n=!0)},p(h,_){_&20&&s!==(s="fa-solid "+(h[2]||h[4]?"fa-check":"fa-plus"))&&b(t,"class",s),u!==(u=r(h))&&(o.d(1),o=u(h),o&&(o.c(),o.m(e,null))),_&20&&i!==(i="inline-flex shrink-0 cursor-pointer disabled:cursor-not-allowed disabled:bg-gray-700 items-center gap-2 px-4 py-2 rounded-md text-sm font-medium text-white "+(h[2]||h[4]?"bg-green-600":"bg-blue-whale hover:bg-blue-whale-dark")+" transition-colors duration-200")&&b(e,"class",i)},d(h){h&&d(e),o.d(),n=!1,c()}}}function ht(a){let e;return{c(){e=H("Join Activity")},l(t){e=B(t,"Join Activity")},m(t,s){T(t,e,s)},d(t){t&&d(e)}}}function bt(a){let e;return{c(){e=H("Joined activity")},l(t){e=B(t,"Joined activity")},m(t,s){T(t,e,s)},d(t){t&&d(e)}}}function vt(a){var be;let e,t,s,l=a[0].name+"",i,n,c,r,u,o,h,_,E,g,N,P=a[0].location+"",y,O,w,L,F,x,W=a[0].speakers.map(He)+"",J,U,z,q,$,Y,X=a[8](a[0].description)+"",ie,ae,se,ee,ne,G=a[5]&&je(a);function K(k,D){return k[3]?at:rt}let C=K(a),V=C(a),A=((be=a[0])==null?void 0:be.recordingUrl)!==""&&Be(a),M=a[11]&&nt(a),j=a[10]&&ct(a);return{c(){e=p("div"),t=p("div"),s=p("h3"),i=H(l),n=I(),c=p("div"),G&&G.c(),r=I(),u=p("button"),V.c(),o=I(),h=p("div"),_=p("div"),E=p("i"),g=I(),N=p("span"),y=H(P),O=I(),w=p("div"),L=p("i"),F=I(),x=p("span"),J=H(W),U=I(),A&&A.c(),z=I(),M&&M.c(),q=I(),$=p("div"),Y=p("div"),ie=H(X),ae=I(),se=p("div"),j&&j.c(),this.h()},l(k){e=v(k,"DIV",{class:!0});var D=m(e);t=v(D,"DIV",{class:!0});var Z=m(t);s=v(Z,"H3",{class:!0});var fe=m(s);i=B(fe,l),fe.forEach(d),n=S(Z),c=v(Z,"DIV",{class:!0});var re=m(c);G&&G.l(re),r=S(re),u=v(re,"BUTTON",{class:!0});var de=m(u);V.l(de),de.forEach(d),re.forEach(d),Z.forEach(d),o=S(D),h=v(D,"DIV",{class:!0});var ce=m(h);_=v(ce,"DIV",{class:!0});var he=m(_);E=v(he,"I",{class:!0}),m(E).forEach(d),g=S(he),N=v(he,"SPAN",{class:!0});var me=m(N);y=B(me,P),me.forEach(d),he.forEach(d),O=S(ce),w=v(ce,"DIV",{class:!0});var _e=m(w);L=v(_e,"I",{class:!0}),m(L).forEach(d),F=S(_e),x=v(_e,"SPAN",{class:!0});var ge=m(x);J=B(ge,W),ge.forEach(d),_e.forEach(d),U=S(ce),A&&A.l(ce),z=S(ce),M&&M.l(ce),ce.forEach(d),D.forEach(d),q=S(k),$=v(k,"DIV",{class:!0});var ke=m($);Y=v(ke,"DIV",{class:!0});var Ue=m(Y);ie=B(Ue,X),Ue.forEach(d),ae=S(ke),se=v(ke,"DIV",{class:!0});var Me=m(se);j&&j.l(Me),Me.forEach(d),ke.forEach(d),this.h()},h(){b(s,"class","text-xl font-semibold text-blue-whale leading-tight flex-1 mr-4 h-20"),b(u,"class","rounded-lg bg-gray-100 duration-100 transition-all hover:bg-gray-50 hover:shadow-md w-8 h-8"),b(c,"class","h-full flex gap-2 items-center"),b(t,"class","flex items-start justify-between mb-3"),b(E,"class","fa-solid fa-location-dot"),b(N,"class","text-sm font-medium"),b(_,"class","flex gap-2 items-center text-gray-600 whitespace-nowrap"),b(L,"class","fa-solid fa-user"),b(x,"class","text-sm font-medium"),b(w,"class","flex gap-2 items-center text-gray-600 whitespace-nowrap"),b(h,"class","flex flex-wrap gap-3"),b(e,"class","p-6 pb-2"),b(Y,"class","text-gray-700 text-sm leading-relaxed mb-4"),b(se,"class","flex items-center justify-between py-2 border-t border-gray-100"),b($,"class","px-6")},m(k,D){T(k,e,D),f(e,t),f(t,s),f(s,i),f(t,n),f(t,c),G&&G.m(c,null),f(c,r),f(c,u),V.m(u,null),f(e,o),f(e,h),f(h,_),f(_,E),f(_,g),f(_,N),f(N,y),f(h,O),f(h,w),f(w,L),f(w,F),f(w,x),f(x,J),f(h,U),A&&A.m(h,null),f(h,z),M&&M.m(h,null),T(k,q,D),T(k,$,D),f($,Y),f(Y,ie),f($,ae),f($,se),j&&j.m(se,null),ee||(ne=pe(u,"click",a[13]),ee=!0)},p(k,[D]){var Z;D&1&&l!==(l=k[0].name+"")&&R(i,l),k[5]?G?G.p(k,D):(G=je(k),G.c(),G.m(c,r)):G&&(G.d(1),G=null),C!==(C=K(k))&&(V.d(1),V=C(k),V&&(V.c(),V.m(u,null))),D&1&&P!==(P=k[0].location+"")&&R(y,P),D&1&&W!==(W=k[0].speakers.map(He)+"")&&R(J,W),((Z=k[0])==null?void 0:Z.recordingUrl)!==""?A?A.p(k,D):(A=Be(k),A.c(),A.m(h,z)):A&&(A.d(1),A=null),k[11]&&M.p(k,D),D&1&&X!==(X=k[8](k[0].description)+"")&&R(ie,X),k[10]&&j.p(k,D)},i:le,o:le,d(k){k&&(d(e),d(q),d($)),G&&G.d(),V.d(),A&&A.d(),M&&M.d(),j&&j.d(),ee=!1,ne()}}}const He=a=>a.name;function pt(a,e,t){let s,l;Ee(a,Le,y=>t(5,s=y)),Ee(a,tt,y=>t(6,l=y));let{activity:i}=e,{nrOfSubscribers:n}=e,{isSubscribed:c}=e,{close:r=!1}=e;const u=Ze();function o(y,O=150){return y.length<=O||r?y:y.substring(0,O).trim()+"..."}const h=async()=>{try{(await fetch(Ae(`/activity/${i.id}/subscribe`),{method:"POST",credentials:"include"})).ok?(t(4,_=!0),u("activitySubscribed",{activity:i,activityId:i.id})):console.error("Failed to subscribe to activity")}catch(y){console.error("Error subscribing to activity:",y)}};let _=!1;const E=i.subscribe&&i.subscribe.maxParticipants&&i.subscribe.subscribers,g=E&&!isNaN(Date.parse(i.subscribe.subscriptionListOpenDate))&&!isNaN(Date.parse(i.subscribe.subscriptionListCloseDate))&&new Date(i.subscribe.subscriptionListOpenDate)<=new Date&&new Date(i.subscribe.subscriptionListCloseDate)>new Date,N=()=>Oe(`/program/activity/edit?id=${i.id}`),P=()=>u(r?"close":"expand");return a.$$set=y=>{"activity"in y&&t(0,i=y.activity),"nrOfSubscribers"in y&&t(1,n=y.nrOfSubscribers),"isSubscribed"in y&&t(2,c=y.isSubscribed),"close"in y&&t(3,r=y.close)},[i,n,c,r,_,s,l,u,o,h,E,g,N,P]}class st extends Pe{constructor(e){super(),Ce(this,e,pt,vt,xe,{activity:0,nrOfSubscribers:1,isSubscribed:2,close:3})}}function Fe(a){let e,t,s,l,i,n,c,r;return i=new st({props:{activity:a[0],nrOfSubscribers:a[1],isSubscribed:a[2],close:!0}}),i.$on("activitySubscribed",a[4]),i.$on("close",a[7]),{c(){e=p("button"),t=I(),s=p("div"),l=p("div"),Te(i.$$.fragment),this.h()},l(u){e=v(u,"BUTTON",{class:!0}),m(e).forEach(d),t=S(u),s=v(u,"DIV",{class:!0});var o=m(s);l=v(o,"DIV",{class:!0});var h=m(l);Ie(i.$$.fragment,h),h.forEach(d),o.forEach(d),this.h()},h(){b(e,"class","fixed top-0 left-0 w-full h-full bg-black/60 cursor-default backdrop-blur-lg"),b(l,"class","w-full md:max-w-3xl bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden"),b(s,"class","fixed w-screen h-screen left-0 top-0 flex items-center justify-center")},m(u,o){T(u,e,o),T(u,t,o),T(u,s,o),f(s,l),Se(i,l,null),n=!0,c||(r=pe(e,"click",a[6]),c=!0)},p(u,o){const h={};o&1&&(h.activity=u[0]),o&2&&(h.nrOfSubscribers=u[1]),o&4&&(h.isSubscribed=u[2]),i.$set(h)},i(u){n||(Q(i.$$.fragment,u),n=!0)},o(u){te(i.$$.fragment,u),n=!1},d(u){u&&(d(e),d(t),d(s)),De(i),c=!1,r()}}}function mt(a){let e,t,s,l,i;t=new st({props:{activity:a[0],nrOfSubscribers:a[1],isSubscribed:a[2]}}),t.$on("activitySubscribed",a[4]),t.$on("expand",a[5]);let n=a[3]&&Fe(a);return{c(){e=p("div"),Te(t.$$.fragment),s=I(),n&&n.c(),l=ue(),this.h()},l(c){e=v(c,"DIV",{class:!0});var r=m(e);Ie(t.$$.fragment,r),r.forEach(d),s=S(c),n&&n.l(c),l=ue(),this.h()},h(){b(e,"class","bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 border border-gray-200 w-full md:max-w-sm shrink-0 svelte-18tlhkx")},m(c,r){T(c,e,r),Se(t,e,null),T(c,s,r),n&&n.m(c,r),T(c,l,r),i=!0},p(c,[r]){const u={};r&1&&(u.activity=c[0]),r&2&&(u.nrOfSubscribers=c[1]),r&4&&(u.isSubscribed=c[2]),t.$set(u),c[3]?n?(n.p(c,r),r&8&&Q(n,1)):(n=Fe(c),n.c(),Q(n,1),n.m(l.parentNode,l)):n&&(ye(),te(n,1,1,()=>{n=null}),we())},i(c){i||(Q(t.$$.fragment,c),Q(n),i=!0)},o(c){te(t.$$.fragment,c),te(n),i=!1},d(c){c&&(d(e),d(s),d(l)),De(t),n&&n.d(c)}}}function _t(a,e,t){let{activity:s}=e,{nrOfSubscribers:l}=e,{isSubscribed:i}=e,n=!1;const c=Ze();function r(_){c("activitySubscribed",_.detail)}const u=()=>t(3,n=!0),o=()=>t(3,n=!1),h=()=>t(3,n=!1);return a.$$set=_=>{"activity"in _&&t(0,s=_.activity),"nrOfSubscribers"in _&&t(1,l=_.nrOfSubscribers),"isSubscribed"in _&&t(2,i=_.isSubscribed)},[s,l,i,n,r,u,o,h]}class gt extends Pe{constructor(e){super(),Ce(this,e,_t,mt,xe,{activity:0,nrOfSubscribers:1,isSubscribed:2})}}function ze(a,e,t){const s=a.slice();return s[16]=e[t],s}function kt(a){let e,t,s,l,i=a[0].name+"",n,c,r,u=Ne(a[0].beginTime,a[0].endTime)+"",o,h,_,E,g,N="Start:",P,y,O=ve(a[0].beginTime)+"",w,L,F,x,W="End:",J,U,z=ve(a[0].endTime)+"",q,$,Y,X,ie,ae,se,ee,ne,G,K=a[6]&&Je(a),C=a[4]&&qe(a);return{c(){e=p("button"),t=p("div"),s=p("div"),l=p("h3"),n=H(i),c=I(),r=p("span"),o=H(u),h=I(),_=p("div"),E=p("div"),g=p("span"),g.textContent=N,P=I(),y=p("span"),w=H(O),L=I(),F=p("div"),x=p("span"),x.textContent=W,J=I(),U=p("span"),q=H(z),$=I(),K&&K.c(),Y=I(),X=p("i"),ae=I(),C&&C.c(),se=ue(),this.h()},l(V){e=v(V,"BUTTON",{class:!0});var A=m(e);t=v(A,"DIV",{class:!0});var M=m(t);s=v(M,"DIV",{class:!0});var j=m(s);l=v(j,"H3",{class:!0});var be=m(l);n=B(be,i),be.forEach(d),c=S(j),r=v(j,"SPAN",{class:!0});var k=m(r);o=B(k,u),k.forEach(d),j.forEach(d),h=S(M),_=v(M,"DIV",{class:!0});var D=m(_);E=v(D,"DIV",{class:!0});var Z=m(E);g=v(Z,"SPAN",{class:!0,"data-svelte-h":!0}),oe(g)!=="svelte-11t2hy0"&&(g.textContent=N),P=S(Z),y=v(Z,"SPAN",{});var fe=m(y);w=B(fe,O),fe.forEach(d),Z.forEach(d),L=S(D),F=v(D,"DIV",{class:!0});var re=m(F);x=v(re,"SPAN",{class:!0,"data-svelte-h":!0}),oe(x)!=="svelte-i1trgj"&&(x.textContent=W),J=S(re),U=v(re,"SPAN",{});var de=m(U);q=B(de,z),de.forEach(d),re.forEach(d),D.forEach(d),M.forEach(d),$=S(A),K&&K.l(A),Y=S(A),X=v(A,"I",{class:!0}),m(X).forEach(d),A.forEach(d),ae=S(V),C&&C.l(V),se=ue(),this.h()},h(){b(l,"class","text-lg font-medium text-gray-900"),b(r,"class","inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800"),b(s,"class","flex items-center space-x-4"),b(g,"class","font-medium"),b(E,"class","flex items-center space-x-1"),b(x,"class","font-medium"),b(F,"class","flex items-center space-x-1"),b(_,"class","flex items-center space-x-6 text-sm text-gray-600"),b(t,"class","mr-auto"),b(X,"class",ie=`fa-solid fa-chevron-${a[4]?"up":"down"}`),b(e,"class","p-6 w-full flex rounded-t-xl items-center gap-8 bg-gray-100 hover:bg-gray-200 transition-colors")},m(V,A){T(V,e,A),f(e,t),f(t,s),f(s,l),f(l,n),f(s,c),f(s,r),f(r,o),f(t,h),f(t,_),f(_,E),f(E,g),f(E,P),f(E,y),f(y,w),f(_,L),f(_,F),f(F,x),f(F,J),f(F,U),f(U,q),f(e,$),K&&K.m(e,null),f(e,Y),f(e,X),T(V,ae,A),C&&C.m(V,A),T(V,se,A),ee=!0,ne||(G=pe(e,"click",a[13]),ne=!0)},p(V,A){(!ee||A&1)&&i!==(i=V[0].name+"")&&R(n,i),(!ee||A&1)&&u!==(u=Ne(V[0].beginTime,V[0].endTime)+"")&&R(o,u),(!ee||A&1)&&O!==(O=ve(V[0].beginTime)+"")&&R(w,O),(!ee||A&1)&&z!==(z=ve(V[0].endTime)+"")&&R(q,z),V[6]?K?K.p(V,A):(K=Je(V),K.c(),K.m(e,Y)):K&&(K.d(1),K=null),(!ee||A&16&&ie!==(ie=`fa-solid fa-chevron-${V[4]?"up":"down"}`))&&b(X,"class",ie),V[4]?C?(C.p(V,A),A&16&&Q(C,1)):(C=qe(V),C.c(),Q(C,1),C.m(se.parentNode,se)):C&&(ye(),te(C,1,1,()=>{C=null}),we())},i(V){ee||(Q(C),ee=!0)},o(V){te(C),ee=!1},d(V){V&&(d(e),d(ae),d(se)),K&&K.d(),C&&C.d(V),ne=!1,G()}}}function yt(a){var be;let e,t,s,l,i,n=a[0].name+"",c,r,u,o=(((be=a[1])==null?void 0:be[0].activity.name)??"")+"",h,_,E,g=Ne(a[0].beginTime,a[0].endTime)+"",N,P,y,O,w,L="Start:",F,x,W=ve(a[0].beginTime)+"",J,U,z,q,$="End:",Y,X,ie=ve(a[0].endTime)+"",ae,se,ee,ne,G,K,C,V,A,M=a[7]&&Re(a),j=a[4]&&Qe(a);return{c(){e=p("button"),t=p("div"),s=p("div"),l=p("h3"),i=p("b"),c=H(n),r=H(":"),u=I(),h=H(o),_=I(),E=p("span"),N=H(g),P=I(),y=p("div"),O=p("div"),w=p("span"),w.textContent=L,F=I(),x=p("span"),J=H(W),U=I(),z=p("div"),q=p("span"),q.textContent=$,Y=I(),X=p("span"),ae=H(ie),se=I(),M&&M.c(),ee=I(),ne=p("i"),K=I(),j&&j.c(),C=ue(),this.h()},l(k){e=v(k,"BUTTON",{class:!0});var D=m(e);t=v(D,"DIV",{class:!0});var Z=m(t);s=v(Z,"DIV",{class:!0});var fe=m(s);l=v(fe,"H3",{class:!0});var re=m(l);i=v(re,"B",{});var de=m(i);c=B(de,n),r=B(de,":"),de.forEach(d),u=S(re),h=B(re,o),re.forEach(d),_=S(fe),E=v(fe,"SPAN",{class:!0});var ce=m(E);N=B(ce,g),ce.forEach(d),fe.forEach(d),P=S(Z),y=v(Z,"DIV",{class:!0});var he=m(y);O=v(he,"DIV",{class:!0});var me=m(O);w=v(me,"SPAN",{class:!0,"data-svelte-h":!0}),oe(w)!=="svelte-11t2hy0"&&(w.textContent=L),F=S(me),x=v(me,"SPAN",{});var _e=m(x);J=B(_e,W),_e.forEach(d),me.forEach(d),U=S(he),z=v(he,"DIV",{class:!0});var ge=m(z);q=v(ge,"SPAN",{class:!0,"data-svelte-h":!0}),oe(q)!=="svelte-i1trgj"&&(q.textContent=$),Y=S(ge),X=v(ge,"SPAN",{});var ke=m(X);ae=B(ke,ie),ke.forEach(d),ge.forEach(d),he.forEach(d),Z.forEach(d),se=S(D),M&&M.l(D),ee=S(D),ne=v(D,"I",{class:!0}),m(ne).forEach(d),D.forEach(d),K=S(k),j&&j.l(k),C=ue(),this.h()},h(){b(l,"class","text-lg font-medium text-gray-900"),b(E,"class","inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800"),b(s,"class","flex items-center space-x-4"),b(w,"class","font-medium"),b(O,"class","flex items-center space-x-1"),b(q,"class","font-medium"),b(z,"class","flex items-center space-x-1"),b(y,"class","flex items-center space-x-6 text-sm text-gray-600"),b(t,"class","mr-auto"),b(ne,"class",G=`fa-solid fa-chevron-${a[4]?"up":"down"}`),b(e,"class","py-4 px-6 w-full flex rounded-t-xl items-center gap-8 bg-gray-100 hover:bg-gray-200 transition-colors")},m(k,D){T(k,e,D),f(e,t),f(t,s),f(s,l),f(l,i),f(i,c),f(i,r),f(l,u),f(l,h),f(s,_),f(s,E),f(E,N),f(t,P),f(t,y),f(y,O),f(O,w),f(O,F),f(O,x),f(x,J),f(y,U),f(y,z),f(z,q),f(z,Y),f(z,X),f(X,ae),f(e,se),M&&M.m(e,null),f(e,ee),f(e,ne),T(k,K,D),j&&j.m(k,D),T(k,C,D),V||(A=pe(e,"click",a[12]),V=!0)},p(k,D){var Z;D&1&&n!==(n=k[0].name+"")&&R(c,n),D&2&&o!==(o=(((Z=k[1])==null?void 0:Z[0].activity.name)??"")+"")&&R(h,o),D&1&&g!==(g=Ne(k[0].beginTime,k[0].endTime)+"")&&R(N,g),D&1&&W!==(W=ve(k[0].beginTime)+"")&&R(J,W),D&1&&ie!==(ie=ve(k[0].endTime)+"")&&R(ae,ie),k[7]?M?M.p(k,D):(M=Re(k),M.c(),M.m(e,ee)):M&&(M.d(1),M=null),D&16&&G!==(G=`fa-solid fa-chevron-${k[4]?"up":"down"}`)&&b(ne,"class",G),k[4]?j?j.p(k,D):(j=Qe(k),j.c(),j.m(C.parentNode,C)):j&&(j.d(1),j=null)},i:le,o:le,d(k){k&&(d(e),d(K),d(C)),M&&M.d(),j&&j.d(k),V=!1,A()}}}function Je(a){let e,t,s,l,i,n=a[6].name+"",c,r,u,o,h,_,E=a[6].location+"",g;return{c(){e=p("div"),t=p("div"),s=p("i"),l=I(),i=p("span"),c=H(n),r=I(),u=p("div"),o=p("i"),h=I(),_=p("span"),g=H(E),this.h()},l(N){e=v(N,"DIV",{class:!0});var P=m(e);t=v(P,"DIV",{class:!0});var y=m(t);s=v(y,"I",{class:!0}),m(s).forEach(d),l=S(y),i=v(y,"SPAN",{class:!0});var O=m(i);c=B(O,n),O.forEach(d),y.forEach(d),r=S(P),u=v(P,"DIV",{class:!0});var w=m(u);o=v(w,"I",{class:!0}),m(o).forEach(d),h=S(w),_=v(w,"SPAN",{class:!0});var L=m(_);g=B(L,E),L.forEach(d),w.forEach(d),P.forEach(d),this.h()},h(){b(s,"class","fa-solid fa-person-chalkboard"),b(i,"class","max-w-48 overflow-hidden whitespace-nowrap text-ellipsis"),b(t,"class","flex gap-1 items-center"),b(o,"class","fa-solid fa-location-dot"),b(_,"class","max-w-32 overflow-hidden whitespace-nowrap text-ellipsis"),b(u,"class","flex gap-1 items-center"),b(e,"class","bg-blue-whale px-4 py-2 rounded-full items-center text-white flex gap-2")},m(N,P){T(N,e,P),f(e,t),f(t,s),f(t,l),f(t,i),f(i,c),f(e,r),f(e,u),f(u,o),f(u,h),f(u,_),f(_,g)},p(N,P){P&64&&n!==(n=N[6].name+"")&&R(c,n),P&64&&E!==(E=N[6].location+"")&&R(g,E)},d(N){N&&d(e)}}}function qe(a){let e,t,s,l=Ve(a[5]),i=[];for(let r=0;r<l.length;r+=1)i[r]=Ge(ze(a,l,r));const n=r=>te(i[r],1,1,()=>{i[r]=null});let c=a[2]&&Ke(a);return{c(){e=p("div");for(let r=0;r<i.length;r+=1)i[r].c();t=I(),c&&c.c(),this.h()},l(r){e=v(r,"DIV",{class:!0});var u=m(e);for(let o=0;o<i.length;o+=1)i[o].l(u);t=S(u),c&&c.l(u),u.forEach(d),this.h()},h(){b(e,"class","flex gap-4 flex-col md:flex-row items-stretch bg-gray-300 p-4 rounded-b-xl overflow-auto")},m(r,u){T(r,e,u);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null);f(e,t),c&&c.m(e,null),s=!0},p(r,u){if(u&808){l=Ve(r[5]);let o;for(o=0;o<l.length;o+=1){const h=ze(r,l,o);i[o]?(i[o].p(h,u),Q(i[o],1)):(i[o]=Ge(h),i[o].c(),Q(i[o],1),i[o].m(e,t))}for(ye(),o=l.length;o<i.length;o+=1)n(o);we()}r[2]?c?c.p(r,u):(c=Ke(r),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(r){if(!s){for(let u=0;u<l.length;u+=1)Q(i[u]);s=!0}},o(r){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)te(i[u]);s=!1},d(r){r&&d(e),et(i,r),c&&c.d()}}}function Ge(a){let e,t;return e=new gt({props:{activity:a[16].activity,nrOfSubscribers:a[16].nrOfSubscribers,isSubscribed:a[8](a[3],a[16].activity.id)}}),e.$on("activitySubscribed",a[9]),{c(){Te(e.$$.fragment)},l(s){Ie(e.$$.fragment,s)},m(s,l){Se(e,s,l),t=!0},p(s,l){const i={};l&32&&(i.activity=s[16].activity),l&32&&(i.nrOfSubscribers=s[16].nrOfSubscribers),l&40&&(i.isSubscribed=s[8](s[3],s[16].activity.id)),e.$set(i)},i(s){t||(Q(e.$$.fragment,s),t=!0)},o(s){te(e.$$.fragment,s),t=!1},d(s){De(e,s)}}}function Ke(a){let e,t,s="+",l,i;return{c(){e=p("div"),t=p("button"),t.textContent=s,this.h()},l(n){e=v(n,"DIV",{class:!0});var c=m(e);t=v(c,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(t)!=="svelte-1cav9my"&&(t.textContent=s),c.forEach(d),this.h()},h(){b(t,"class","size-16 bg-blue-whale text-white text-5xl rounded-full ml-2"),b(e,"class","flex items-center")},m(n,c){T(n,e,c),f(e,t),l||(i=pe(t,"click",a[14]),l=!0)},p:le,d(n){n&&d(e),l=!1,i()}}}function Re(a){let e,t='<i class="fa-solid fa-pencil text-picton-blue"></i>',s,l;return{c(){e=p("button"),e.innerHTML=t,this.h()},l(i){e=v(i,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-1bvd5dk"&&(e.innerHTML=t),this.h()},h(){b(e,"class","rounded-lg bg-blue-whale shadow shadow-black shadow-sm w-8 h-8")},m(i,n){T(i,e,n),s||(l=pe(e,"click",a[11]),s=!0)},p:le,d(i){i&&d(e),s=!1,l()}}}function Qe(a){let e,t,s,l,i,n,c=a[1][0].activity.location+"",r,u,o,h,_,E,g=a[1][0].activity.speakers.map(We)+"",N,P,y=a[1][0].activity.description+"",O,w,L,F,x,W='<span class="text-xs">This is a keynote, you are automatically subscribed to this activity</span>';return{c(){e=p("div"),t=p("div"),s=p("div"),l=p("i"),i=I(),n=p("span"),r=H(c),u=I(),o=p("div"),h=p("i"),_=I(),E=p("span"),N=H(g),P=I(),O=H(y),w=I(),L=p("br"),F=I(),x=p("div"),x.innerHTML=W,this.h()},l(J){e=v(J,"DIV",{class:!0});var U=m(e);t=v(U,"DIV",{class:!0});var z=m(t);s=v(z,"DIV",{class:!0});var q=m(s);l=v(q,"I",{class:!0}),m(l).forEach(d),i=S(q),n=v(q,"SPAN",{class:!0});var $=m(n);r=B($,c),$.forEach(d),q.forEach(d),u=S(z),o=v(z,"DIV",{class:!0});var Y=m(o);h=v(Y,"I",{class:!0}),m(h).forEach(d),_=S(Y),E=v(Y,"SPAN",{class:!0});var X=m(E);N=B(X,g),X.forEach(d),Y.forEach(d),z.forEach(d),P=S(U),O=B(U,y),w=S(U),L=v(U,"BR",{}),F=S(U),x=v(U,"DIV",{class:!0,"data-svelte-h":!0}),oe(x)!=="svelte-mgeikw"&&(x.innerHTML=W),U.forEach(d),this.h()},h(){b(l,"class","fa-solid fa-location-dot"),b(n,"class","text-sm font-medium"),b(s,"class","flex gap-2 items-center text-gray-600 whitespace-nowrap"),b(h,"class","fa-solid fa-user"),b(E,"class","text-sm font-medium"),b(o,"class","flex gap-2 items-center text-gray-600 whitespace-nowrap"),b(t,"class","flex flex-wrap gap-3"),b(x,"class","pt-2 mt-2 border-t"),b(e,"class","flex gap-2 flex-col items-stretch bg-gray-100 py-2 px-6 rounded-b-xl")},m(J,U){T(J,e,U),f(e,t),f(t,s),f(s,l),f(s,i),f(s,n),f(n,r),f(t,u),f(t,o),f(o,h),f(o,_),f(o,E),f(E,N),f(e,P),f(e,O),f(e,w),f(e,L),f(e,F),f(e,x)},p(J,U){U&2&&c!==(c=J[1][0].activity.location+"")&&R(r,c),U&2&&g!==(g=J[1][0].activity.speakers.map(We)+"")&&R(N,g),U&2&&y!==(y=J[1][0].activity.description+"")&&R(O,y)},d(J){J&&d(e)}}}function wt(a){let e,t,s,l;const i=[yt,kt],n=[];function c(r,u){return r[10]?0:1}return t=c(a),s=n[t]=i[t](a),{c(){e=p("div"),s.c(),this.h()},l(r){e=v(r,"DIV",{class:!0});var u=m(e);s.l(u),u.forEach(d),this.h()},h(){b(e,"class","flex flex-col shadow-md shadow-black/35 rounded-xl overflow-hidden")},m(r,u){T(r,e,u),n[t].m(e,null),l=!0},p(r,[u]){s.p(r,u)},i(r){l||(Q(s),l=!0)},o(r){te(s),l=!1},d(r){r&&d(e),n[t].d()}}}function ve(a){return new Date(a).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}function Ne(a,e){const t=new Date(a),l=new Date(e).getTime()-t.getTime(),i=Math.round(l/(1e3*60));if(i<60)return`${i} min`;{const n=Math.floor(i/60),c=i%60;return c>0?`${n}h ${c}m`:`${n}h`}}const We=a=>a.name;function Et(a,e,t){let s;Ee(a,Le,w=>t(7,s=w));let{part:l}=e,{activities:i}=e,{admin:n}=e,c=!0,r,u=[];async function o(){try{const w=await fetch(Ae("/profile"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});w.ok&&t(3,r=await w.json())}catch(w){console.error(w)}}const h=(w,L)=>{var F;return((F=w==null?void 0:w.subscriptions)==null?void 0:F.length)&&w.subscriptions.some(x=>x.activity.id===L)};let _;function E(w){const{activity:L}=w.detail;t(4,c=!1),t(6,_=L),o()}$e(()=>{o()});const g=i.some(w=>w.activity.speakers.some(L=>L.type==="keynote")),N=()=>Oe(`/program/activity/edit?id=${i[0].activity.id}`),P=()=>t(4,c=!c),y=()=>t(4,c=!c),O=()=>Oe(`/program/activity/create?programPartId=${l.id}`);return a.$$set=w=>{"part"in w&&t(0,l=w.part),"activities"in w&&t(1,i=w.activities),"admin"in w&&t(2,n=w.admin)},a.$$.update=()=>{var w;a.$$.dirty&2&&t(5,u=i?[...i].sort((L,F)=>{var J,U,z,q;const x=((U=(J=L==null?void 0:L.activity)==null?void 0:J.subscribe)==null?void 0:U.maxParticipants)??0;return(((q=(z=F==null?void 0:F.activity)==null?void 0:z.subscribe)==null?void 0:q.maxParticipants)??0)-x}):[]),a.$$.dirty&10&&t(6,_=r&&r.subscriptions&&i?((w=i.find(L=>r.subscriptions.some(F=>{var x,W;return((x=F.activity)==null?void 0:x.id)===((W=L.activity)==null?void 0:W.id)})))==null?void 0:w.activity)??void 0:void 0)},[l,i,n,r,c,u,_,s,h,E,g,N,P,y,O]}class Dt extends Pe{constructor(e){super(),Ce(this,e,Et,wt,xe,{part:0,activities:1,admin:2})}}function Xe(a,e,t){const s=a.slice();return s[11]=e[t],s}function St(a){let e,t;return{c(){e=p("div"),t=H(a[5]),this.h()},l(s){e=v(s,"DIV",{class:!0});var l=m(e);t=B(l,a[5]),l.forEach(d),this.h()},h(){b(e,"class","bg-red-100 text-red-700 p-4 rounded mt-12 text-center")},m(s,l){T(s,e,l),f(e,t)},p(s,l){l&32&&R(t,s[5])},i:le,o:le,d(s){s&&d(e)}}}function It(a){let e,t,s,l;const i=[At,Vt,Tt],n=[];function c(r,u){return r[4]?0:r[2].length===0?1:2}return e=c(a),t=n[e]=i[e](a),{c(){t.c(),s=ue()},l(r){t.l(r),s=ue()},m(r,u){n[e].m(r,u),T(r,s,u),l=!0},p(r,u){let o=e;e=c(r),e===o?n[e].p(r,u):(ye(),te(n[o],1,1,()=>{n[o]=null}),we(),t=n[e],t?t.p(r,u):(t=n[e]=i[e](r),t.c()),Q(t,1),t.m(s.parentNode,s))},i(r){l||(Q(t),l=!0)},o(r){te(t),l=!1},d(r){r&&d(s),n[e].d(r)}}}function Tt(a){let e,t,s=Ve(a[2]),l=[];for(let n=0;n<s.length;n+=1)l[n]=Ye(Xe(a,s,n));const i=n=>te(l[n],1,1,()=>{l[n]=null});return{c(){e=p("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=v(n,"DIV",{class:!0});var c=m(e);for(let r=0;r<l.length;r+=1)l[r].l(c);c.forEach(d),this.h()},h(){b(e,"class","space-y-8 p-8")},m(n,c){T(n,e,c);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null);t=!0},p(n,c){if(c&76){s=Ve(n[2]);let r;for(r=0;r<s.length;r+=1){const u=Xe(n,s,r);l[r]?(l[r].p(u,c),Q(l[r],1)):(l[r]=Ye(u),l[r].c(),Q(l[r],1),l[r].m(e,null))}for(ye(),r=s.length;r<l.length;r+=1)i(r);we()}},i(n){if(!t){for(let c=0;c<s.length;c+=1)Q(l[c]);t=!0}},o(n){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)te(l[c]);t=!1},d(n){n&&d(e),et(l,n)}}}function Vt(a){let e,t='<div class="text-gray-500 text-lg">No program parts scheduled yet</div> <p class="text-gray-400 mt-2">Check back later for updates</p>';return{c(){e=p("div"),e.innerHTML=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-calpt5"&&(e.innerHTML=t),this.h()},h(){b(e,"class","text-center py-12")},m(s,l){T(s,e,l)},p:le,i:le,o:le,d(s){s&&d(e)}}}function At(a){let e,t,s,l,i,n="Loading program...",c,r;function u(_,E){if(_[0])return xt;if(_[1])return Nt}let o=u(a),h=o&&o(a);return{c(){e=p("div"),t=p("div"),s=p("div"),l=I(),i=p("div"),i.textContent=n,c=I(),r=p("div"),h&&h.c(),this.h()},l(_){e=v(_,"DIV",{class:!0});var E=m(e);t=v(E,"DIV",{class:!0});var g=m(t);s=v(g,"DIV",{class:!0}),m(s).forEach(d),l=S(g),i=v(g,"DIV",{class:!0,"data-svelte-h":!0}),oe(i)!=="svelte-hb50jb"&&(i.textContent=n),c=S(g),r=v(g,"DIV",{class:!0});var N=m(r);h&&h.l(N),N.forEach(d),g.forEach(d),E.forEach(d),this.h()},h(){b(s,"class","animate-spin rounded-full h-12 w-12 border-b-2 border-blue-whale mx-auto mb-4"),b(i,"class","text-gray-500 text-lg"),b(r,"class","text-gray-400 text-sm mt-2"),b(t,"class","text-center"),b(e,"class","flex justify-center items-center py-16")},m(_,E){T(_,e,E),f(e,t),f(t,s),f(t,l),f(t,i),f(t,c),f(t,r),h&&h.m(r,null)},p(_,E){o!==(o=u(_))&&(h&&h.d(1),h=o&&o(_),h&&(h.c(),h.m(r,null)))},i:le,o:le,d(_){_&&d(e),h&&h.d()}}}function Ye(a){let e,t;function s(...l){return a[7](a[11],...l)}return e=new Dt({props:{part:a[11],activities:a[3].filter(s),admin:a[6]}}),{c(){Te(e.$$.fragment)},l(l){Ie(e.$$.fragment,l)},m(l,i){Se(e,l,i),t=!0},p(l,i){a=l;const n={};i&4&&(n.part=a[11]),i&12&&(n.activities=a[3].filter(s)),i&64&&(n.admin=a[6]),e.$set(n)},i(l){t||(Q(e.$$.fragment,l),t=!0)},o(l){te(e.$$.fragment,l),t=!1},d(l){De(e,l)}}}function Nt(a){let e;return{c(){e=H("Loading activities...")},l(t){e=B(t,"Loading activities...")},m(t,s){T(t,e,s)},d(t){t&&d(e)}}}function xt(a){let e;return{c(){e=H("Loading program parts...")},l(t){e=B(t,"Loading program parts...")},m(t,s){T(t,e,s)},d(t){t&&d(e)}}}function Pt(a){let e,t,s,l,i,n;e=new lt({props:{title:"Program"}});const c=[It,St],r=[];function u(o,h){return o[5]?1:0}return l=u(a),i=r[l]=c[l](a),{c(){Te(e.$$.fragment),t=I(),s=p("div"),i.c(),this.h()},l(o){Ie(e.$$.fragment,o),t=S(o),s=v(o,"DIV",{id:!0,class:!0});var h=m(s);i.l(h),h.forEach(d),this.h()},h(){b(s,"id","program_section"),b(s,"class","container flex-col text-blue-whale gap-4 text-center md:text-left")},m(o,h){Se(e,o,h),T(o,t,h),T(o,s,h),r[l].m(s,null),n=!0},p(o,[h]){let _=l;l=u(o),l===_?r[l].p(o,h):(ye(),te(r[_],1,1,()=>{r[_]=null}),we(),i=r[l],i?i.p(o,h):(i=r[l]=c[l](o),i.c()),Q(i,1),i.m(s,null))},i(o){n||(Q(e.$$.fragment,o),Q(i),n=!0)},o(o){te(e.$$.fragment,o),te(i),n=!1},d(o){o&&(d(t),d(s)),De(e,o),r[l].d()}}}function Ct(a,e,t){let s,l;Ee(a,tt,g=>t(8,s=g)),Ee(a,Le,g=>t(6,l=g));let i=[],n=[],c=!0,r="",u=!0,o=!0;$e(async()=>{s||await it.init(),await h(),await _()});async function h(){t(0,u=!0),t(5,r="");try{const g=await fetch(Ae("/programpart"));g.ok?t(2,i=await g.json()):(t(5,r=g.status===401?"Unauthorized":"Failed to load program"),console.error("Failed to fetch program parts:",g.status))}catch(g){t(5,r="Network error occurred"),console.error("Error fetching program parts:",g)}finally{t(0,u=!1)}}async function _(){t(1,o=!0),t(5,r="");try{const g=await fetch(Ae("/activity"));g.ok?t(3,n=await g.json()):(t(5,r=g.status===401?"Unauthorized":"Failed to load activities"),console.error("Failed to fetch activities:",g.status))}catch(g){t(5,r="Network error occurred"),console.error("Error fetching activities:",g)}finally{t(1,o=!1)}}const E=(g,N)=>{var P,y;return((y=(P=N==null?void 0:N.activity)==null?void 0:P.programPart)==null?void 0:y.id)===g.id};return a.$$.update=()=>{a.$$.dirty&3&&t(4,c=u||o)},[u,o,i,n,c,r,l,E]}class Ft extends Pe{constructor(e){super(),Ce(this,e,Ct,Pt,xe,{})}}export{Ft as component};
