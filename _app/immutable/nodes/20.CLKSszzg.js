import{s as K,n as U,d as b,i as I,c as C,A as M,h as y,e as k,f as V,l as E,k as w,m as q,v as W,E as Z,r as J,o as L,b as g,p as z,g as D,a as A,j as P,t as N,w as Q,u as B}from"../chunks/DpgxVbgB.js";import{e as H}from"../chunks/DW0hWwPi.js";import{S as X,i as Y}from"../chunks/7JM-qOu2.js";import{a as $}from"../chunks/JSKLHevw.js";import{c as ee,d as te}from"../chunks/2Lxiq0HD.js";function O(r,e,t){const n=r.slice();return n[14]=e[t],n}function le(r){let e,t="Unauthorized";return{c(){e=w("div"),e.textContent=t,this.h()},l(n){e=k(n,"DIV",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-hz8uf6"&&(e.textContent=t),this.h()},h(){C(e,"class","bg-red-100 text-red-700 p-4 rounded mt-12 text-center mx-auto")},m(n,f){I(n,e,f)},p:U,d(n){n&&b(e)}}}function se(r){let e,t,n="Participant code",f,i,o,_,v,m,a,c="Scanned participant",S,x,u,d=r[2]&&R(),h=r[3]&&T(r),s=r[0]!=null&&F(r);return{c(){e=w("div"),t=w("h1"),t.textContent=n,f=E(),i=w("input"),o=E(),d&&d.c(),_=E(),h&&h.c(),v=E(),m=w("div"),a=w("h1"),a.textContent=c,S=E(),s&&s.c(),this.h()},l(l){e=k(l,"DIV",{class:!0});var p=V(e);t=k(p,"H1",{class:!0,"data-svelte-h":!0}),D(t)!=="svelte-1nkxeb0"&&(t.textContent=n),f=y(p),i=k(p,"INPUT",{class:!0,placeholder:!0}),o=y(p),d&&d.l(p),_=y(p),h&&h.l(p),p.forEach(b),v=y(l),m=k(l,"DIV",{class:!0});var j=V(m);a=k(j,"H1",{class:!0,"data-svelte-h":!0}),D(a)!=="svelte-1hsp9xd"&&(a.textContent=c),S=y(j),s&&s.l(j),j.forEach(b),this.h()},h(){C(t,"class","font-bold text-2xl"),C(i,"class","border rounded-xl border-blue-whale w-full p-2"),C(i,"placeholder","Scan code here and press Enter"),i.disabled=r[2],C(e,"class","p-6 w-full rounded-lg bg-white shadow-md"),C(a,"class","font-bold text-2xl"),C(m,"class","p-6 w-full rounded-lg bg-white shadow-md")},m(l,p){I(l,e,p),g(e,t),g(e,f),g(e,i),r[10](i),L(i,r[1]),g(e,o),d&&d.m(e,null),g(e,_),h&&h.m(e,null),I(l,v,p),I(l,m,p),g(m,a),g(m,S),s&&s.m(m,null),x||(u=[z(i,"input",r[11]),z(i,"keydown",r[8])],x=!0)},p(l,p){p&4&&(i.disabled=l[2]),p&2&&i.value!==l[1]&&L(i,l[1]),l[2]?d||(d=R(),d.c(),d.m(e,_)):d&&(d.d(1),d=null),l[3]?h?h.p(l,p):(h=T(l),h.c(),h.m(e,null)):h&&(h.d(1),h=null),l[0]!=null?s?s.p(l,p):(s=F(l),s.c(),s.m(m,null)):s&&(s.d(1),s=null)},d(l){l&&(b(e),b(v),b(m)),r[10](null),d&&d.d(),h&&h.d(),s&&s.d(),x=!1,J(u)}}}function R(r){let e,t="Scanningâ€¦";return{c(){e=w("div"),e.textContent=t,this.h()},l(n){e=k(n,"DIV",{class:!0,"data-svelte-h":!0}),D(e)!=="svelte-ct3xmy"&&(e.textContent=t),this.h()},h(){C(e,"class","text-sm text-blue-whale mt-2")},m(n,f){I(n,e,f)},d(n){n&&b(e)}}}function T(r){let e,t;return{c(){e=w("div"),t=N(r[3]),this.h()},l(n){e=k(n,"DIV",{class:!0});var f=V(e);t=P(f,r[3]),f.forEach(b),this.h()},h(){C(e,"class","text-sm text-red-600 mt-2")},m(n,f){I(n,e,f),g(e,t)},p(n,f){f&8&&A(t,n[3])},d(n){n&&b(e)}}}function F(r){var S,x;let e,t,n="Scans",f,i,o=((S=r[0])==null?void 0:S.scans.length)+"",_,v,m,a=H(Object.entries((x=r[0])==null?void 0:x.user).filter(r[12])),c=[];for(let u=0;u<a.length;u+=1)c[u]=G(O(r,a,u));return{c(){e=w("div"),t=w("b"),t.textContent=n,f=E(),i=w("span"),_=N(o),v=E();for(let u=0;u<c.length;u+=1)c[u].c();m=B(),this.h()},l(u){e=k(u,"DIV",{class:!0});var d=V(e);t=k(d,"B",{class:!0,"data-svelte-h":!0}),D(t)!=="svelte-1sekp4m"&&(t.textContent=n),f=y(d),i=k(d,"SPAN",{});var h=V(i);_=P(h,o),h.forEach(b),d.forEach(b),v=y(u);for(let s=0;s<c.length;s+=1)c[s].l(u);m=B(),this.h()},h(){C(t,"class","font-medium"),C(e,"class","flex justify-between")},m(u,d){I(u,e,d),g(e,t),g(e,f),g(e,i),g(i,_),I(u,v,d);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(u,d);I(u,m,d)},p(u,d){var h,s;if(d&1&&o!==(o=((h=u[0])==null?void 0:h.scans.length)+"")&&A(_,o),d&641){a=H(Object.entries((s=u[0])==null?void 0:s.user).filter(u[12]));let l;for(l=0;l<a.length;l+=1){const p=O(u,a,l);c[l]?c[l].p(p,d):(c[l]=G(p),c[l].c(),c[l].m(m.parentNode,m))}for(;l<c.length;l+=1)c[l].d(1);c.length=a.length}},d(u){u&&(b(e),b(v),b(m)),Q(c,u)}}}function G(r){let e,t,n=r[9](r[14][0])+"",f,i,o,_=r[14][1]+"",v,m;return{c(){e=w("div"),t=w("b"),f=N(n),i=E(),o=w("span"),v=N(_),m=E(),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=V(e);t=k(c,"B",{class:!0});var S=V(t);f=P(S,n),S.forEach(b),i=y(c),o=k(c,"SPAN",{});var x=V(o);v=P(x,_),x.forEach(b),m=y(c),c.forEach(b),this.h()},h(){C(t,"class","font-medium"),C(e,"class","flex justify-between")},m(a,c){I(a,e,c),g(e,t),g(t,f),g(e,i),g(e,o),g(o,v),g(e,m)},p(a,c){c&1&&n!==(n=a[9](a[14][0])+"")&&A(f,n),c&1&&_!==(_=a[14][1]+"")&&A(v,_)},d(a){a&&b(e)}}}function ne(r){let e,t;function n(o,_){return o[5]&&o[6]?se:le}let f=n(r),i=f(r);return{c(){e=E(),t=w("div"),i.c(),this.h()},l(o){M("svelte-1u0qgjk",document.head).forEach(b),e=y(o),t=k(o,"DIV",{class:!0});var v=V(t);i.l(v),v.forEach(b),this.h()},h(){document.title="Reset Password - Availabilit",C(t,"class","min-h-screen bg-bottom-backdrop p-8 flex flex-row items-center gap-8")},m(o,_){I(o,e,_),I(o,t,_),i.m(t,null)},p(o,[_]){f===(f=n(o))&&i?i.p(o,_):(i.d(1),i=f(o),i&&(i.c(),i.m(t,null)))},i:U,o:U,d(o){o&&(b(e),b(t)),i.d()}}}function ae(r,e,t){let n,f;q(r,ee,s=>t(5,n=s)),q(r,te,s=>t(6,f=s));let i;const o=["email","name","dietaryWishes","needs"];let _="",v=!1,m="",a=null;W(()=>{a==null||a.focus(),a&&a.select()});async function c(){const s=_.trim();if(s){t(2,v=!0),t(3,m="");try{const l=await fetch($(`ticket/${encodeURIComponent(s)}/scan`),{method:"GET",credentials:"include"});if(l.ok){const p=await l.json();t(0,i=p)}else{const p=await l.text();t(3,m=p||`Scan failed: ${l.status}`)}}catch(l){console.error("Scan request failed",l),t(3,m="Network error during scan")}finally{t(2,v=!1),requestAnimationFrame(()=>{a==null||a.focus(),a==null||a.select()})}}}function S(s){s.key==="Enter"&&(s.preventDefault(),c())}const x=s=>{if(!s)return"";const l=s.replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/[_-]+/g," ").trim();return l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()};function u(s){Z[s?"unshift":"push"](()=>{a=s,t(4,a)})}function d(){_=this.value,t(1,_)}return[i,_,v,m,a,n,f,o,S,x,u,d,s=>o.includes(s[0])]}class de extends X{constructor(e){super(),Y(this,e,ae,ne,K,{})}}export{de as component};
