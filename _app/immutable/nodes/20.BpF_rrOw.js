import{s as re,n as Z,d as h,i as S,c as w,A as ce,h as V,e as g,f as D,l as y,k,m as $,v as fe,E as ue,r as de,o as ee,b as p,p as te,g as L,a as H,j as O,t as R,w as he}from"../chunks/DpgxVbgB.js";import{e as se}from"../chunks/DW0hWwPi.js";import{S as _e,i as pe}from"../chunks/7JM-qOu2.js";import{a as me}from"../chunks/JSKLHevw.js";import{c as ve,d as be}from"../chunks/2Lxiq0HD.js";function le(i,e,t){const s=i.slice();return s[14]=e[t],s}function ge(i){let e,t="Unauthorized";return{c(){e=k("div"),e.textContent=t,this.h()},l(s){e=g(s,"DIV",{class:!0,"data-svelte-h":!0}),L(e)!=="svelte-hz8uf6"&&(e.textContent=t),this.h()},h(){w(e,"class","bg-red-100 text-red-700 p-4 rounded mt-12 text-center mx-auto")},m(s,f){S(s,e,f)},p:Z,d(s){s&&h(e)}}}function ke(i){let e,t,s="Participant code",f,o,c,_,b,u,l,E="Scanned participant",A,N,j,m=i[2]&&ne(),v=i[3]&&ae(i),a=i[0]!=null&&ie(i);return{c(){e=k("div"),t=k("h1"),t.textContent=s,f=y(),o=k("input"),c=y(),m&&m.c(),_=y(),v&&v.c(),b=y(),u=k("div"),l=k("h1"),l.textContent=E,A=y(),a&&a.c(),this.h()},l(n){e=g(n,"DIV",{class:!0});var d=D(e);t=g(d,"H1",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-1nkxeb0"&&(t.textContent=s),f=V(d),o=g(d,"INPUT",{class:!0,placeholder:!0}),c=V(d),m&&m.l(d),_=V(d),v&&v.l(d),d.forEach(h),b=V(n),u=g(n,"DIV",{class:!0});var U=D(u);l=g(U,"H1",{class:!0,"data-svelte-h":!0}),L(l)!=="svelte-1hsp9xd"&&(l.textContent=E),A=V(U),a&&a.l(U),U.forEach(h),this.h()},h(){w(t,"class","font-bold text-2xl"),w(o,"class","border rounded-xl border-blue-whale w-full p-2"),w(o,"placeholder","Scan code here and press Enter"),o.disabled=i[2],w(e,"class","p-6 w-full rounded-lg bg-white shadow-md"),w(l,"class","font-bold text-2xl"),w(u,"class","p-6 w-full rounded-lg bg-white shadow-md")},m(n,d){S(n,e,d),p(e,t),p(e,f),p(e,o),i[10](o),ee(o,i[1]),p(e,c),m&&m.m(e,null),p(e,_),v&&v.m(e,null),S(n,b,d),S(n,u,d),p(u,l),p(u,A),a&&a.m(u,null),N||(j=[te(o,"input",i[11]),te(o,"keydown",i[8])],N=!0)},p(n,d){d&4&&(o.disabled=n[2]),d&2&&o.value!==n[1]&&ee(o,n[1]),n[2]?m||(m=ne(),m.c(),m.m(e,_)):m&&(m.d(1),m=null),n[3]?v?v.p(n,d):(v=ae(n),v.c(),v.m(e,null)):v&&(v.d(1),v=null),n[0]!=null?a?a.p(n,d):(a=ie(n),a.c(),a.m(u,null)):a&&(a.d(1),a=null)},d(n){n&&(h(e),h(b),h(u)),i[10](null),m&&m.d(),v&&v.d(),a&&a.d(),N=!1,de(j)}}}function ne(i){let e,t="Scanningâ€¦";return{c(){e=k("div"),e.textContent=t,this.h()},l(s){e=g(s,"DIV",{class:!0,"data-svelte-h":!0}),L(e)!=="svelte-ct3xmy"&&(e.textContent=t),this.h()},h(){w(e,"class","text-sm text-blue-whale mt-2")},m(s,f){S(s,e,f)},d(s){s&&h(e)}}}function ae(i){let e,t;return{c(){e=k("div"),t=R(i[3]),this.h()},l(s){e=g(s,"DIV",{class:!0});var f=D(e);t=O(f,i[3]),f.forEach(h),this.h()},h(){w(e,"class","text-sm text-red-600 mt-2")},m(s,f){S(s,e,f),p(e,t)},p(s,f){f&8&&H(t,s[3])},d(s){s&&h(e)}}}function ie(i){var J,Q,X,Y;let e,t,s,f="Scans",o,c,_=((J=i[0])==null?void 0:J.scans.length)+"",b,u,l,E,A="Ticket printed",N,j,m=(((Q=i[0])==null?void 0:Q.user.subscriptions.length)===3)+"",v,a,n,d,U="Association",W,F,G=((X=i[0])==null?void 0:X.association)+"",M,z=se(Object.entries((Y=i[0])==null?void 0:Y.user).filter(i[12])),x=[];for(let r=0;r<z.length;r+=1)x[r]=oe(le(i,z,r));return{c(){for(let r=0;r<x.length;r+=1)x[r].c();e=y(),t=k("div"),s=k("b"),s.textContent=f,o=y(),c=k("span"),b=R(_),u=y(),l=k("div"),E=k("b"),E.textContent=A,N=y(),j=k("span"),v=R(m),a=y(),n=k("div"),d=k("b"),d.textContent=U,W=y(),F=k("span"),M=R(G),this.h()},l(r){for(let T=0;T<x.length;T+=1)x[T].l(r);e=V(r),t=g(r,"DIV",{class:!0});var C=D(t);s=g(C,"B",{class:!0,"data-svelte-h":!0}),L(s)!=="svelte-1sekp4m"&&(s.textContent=f),o=V(C),c=g(C,"SPAN",{});var P=D(c);b=O(P,_),P.forEach(h),C.forEach(h),u=V(r),l=g(r,"DIV",{class:!0});var q=D(l);E=g(q,"B",{class:!0,"data-svelte-h":!0}),L(E)!=="svelte-1vdltge"&&(E.textContent=A),N=V(q),j=g(q,"SPAN",{});var K=D(j);v=O(K,m),K.forEach(h),q.forEach(h),a=V(r),n=g(r,"DIV",{class:!0});var B=D(n);d=g(B,"B",{class:!0,"data-svelte-h":!0}),L(d)!=="svelte-lmkrov"&&(d.textContent=U),W=V(B),F=g(B,"SPAN",{});var I=D(F);M=O(I,G),I.forEach(h),B.forEach(h),this.h()},h(){w(s,"class","font-medium"),w(t,"class","flex justify-between"),w(E,"class","font-medium"),w(l,"class","flex justify-between"),w(d,"class","font-medium"),w(n,"class","flex justify-between")},m(r,C){for(let P=0;P<x.length;P+=1)x[P]&&x[P].m(r,C);S(r,e,C),S(r,t,C),p(t,s),p(t,o),p(t,c),p(c,b),S(r,u,C),S(r,l,C),p(l,E),p(l,N),p(l,j),p(j,v),S(r,a,C),S(r,n,C),p(n,d),p(n,W),p(n,F),p(F,M)},p(r,C){var P,q,K,B;if(C&641){z=se(Object.entries((P=r[0])==null?void 0:P.user).filter(r[12]));let I;for(I=0;I<z.length;I+=1){const T=le(r,z,I);x[I]?x[I].p(T,C):(x[I]=oe(T),x[I].c(),x[I].m(e.parentNode,e))}for(;I<x.length;I+=1)x[I].d(1);x.length=z.length}C&1&&_!==(_=((q=r[0])==null?void 0:q.scans.length)+"")&&H(b,_),C&1&&m!==(m=(((K=r[0])==null?void 0:K.user.subscriptions.length)===3)+"")&&H(v,m),C&1&&G!==(G=((B=r[0])==null?void 0:B.association)+"")&&H(M,G)},d(r){r&&(h(e),h(t),h(u),h(l),h(a),h(n)),he(x,r)}}}function oe(i){let e,t,s=i[9](i[14][0])+"",f,o,c,_=i[14][1]+"",b;return{c(){e=k("div"),t=k("b"),f=R(s),o=y(),c=k("span"),b=R(_),this.h()},l(u){e=g(u,"DIV",{class:!0});var l=D(e);t=g(l,"B",{class:!0});var E=D(t);f=O(E,s),E.forEach(h),o=V(l),c=g(l,"SPAN",{});var A=D(c);b=O(A,_),A.forEach(h),l.forEach(h),this.h()},h(){w(t,"class","font-medium"),w(e,"class","flex justify-between")},m(u,l){S(u,e,l),p(e,t),p(t,f),p(e,o),p(e,c),p(c,b)},p(u,l){l&1&&s!==(s=u[9](u[14][0])+"")&&H(f,s),l&1&&_!==(_=u[14][1]+"")&&H(b,_)},d(u){u&&h(e)}}}function Ce(i){let e,t;function s(c,_){return c[5]&&c[6]?ke:ge}let f=s(i),o=f(i);return{c(){e=y(),t=k("div"),o.c(),this.h()},l(c){ce("svelte-1u0qgjk",document.head).forEach(h),e=V(c),t=g(c,"DIV",{class:!0});var b=D(t);o.l(b),b.forEach(h),this.h()},h(){document.title="Reset Password - Availabilit",w(t,"class","min-h-screen bg-bottom-backdrop p-8 flex flex-row items-center gap-8")},m(c,_){S(c,e,_),S(c,t,_),o.m(t,null)},p(c,[_]){f===(f=s(c))&&o?o.p(c,_):(o.d(1),o=f(c),o&&(o.c(),o.m(t,null)))},i:Z,o:Z,d(c){c&&(h(e),h(t)),o.d()}}}function we(i,e,t){let s,f;$(i,ve,a=>t(5,s=a)),$(i,be,a=>t(6,f=a));let o;const c=["email","name","dietaryWishes","needs"];let _="",b=!1,u="",l=null;fe(()=>{l==null||l.focus(),l&&l.select()});async function E(){const a=_.trim();if(a){t(2,b=!0),t(3,u="");try{const n=await fetch(me(`ticket/${encodeURIComponent(a)}/scan`),{method:"GET",credentials:"include"});if(n.ok){const d=await n.json();t(0,o=d)}else{const d=await n.text();t(3,u=d||`Scan failed: ${n.status}`)}}catch(n){console.error("Scan request failed",n),t(3,u="Network error during scan")}finally{t(2,b=!1),requestAnimationFrame(()=>{l==null||l.focus(),l==null||l.select()})}}}function A(a){a.key==="Enter"&&(a.preventDefault(),E())}const N=a=>{if(!a)return"";const n=a.replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/[_-]+/g," ").trim();return n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()};function j(a){ue[a?"unshift":"push"](()=>{l=a,t(4,l)})}function m(){_=this.value,t(1,_)}return[o,_,b,u,l,s,f,c,A,N,j,m,a=>c.includes(a[0])]}class De extends _e{constructor(e){super(),pe(this,e,we,Ce,re,{})}}export{De as component};
