import{s as Ne,n as ae,d,a as K,i as S,b as u,p as me,c as v,e as b,f as p,j as L,h as T,k as m,t as M,l as V,m as Ie,B as Qe,g as fe,u as ue,v as We,w as Xe}from"../chunks/DUYTDFI5.js";import{S as Pe,i as xe,d as we,t as Q,a as G,g as ge,c as ke,m as Ee,b as De,e as Se}from"../chunks/z4FfSzan.js";import{e as Te}from"../chunks/fXUx-Agj.js";import{a as Ve}from"../chunks/BF9jo3u2.js";import{g as Ce}from"../chunks/BF-jVcxJ.js";import{b as Oe,a as Ze,c as $e}from"../chunks/DIk-eZFi.js";import{H as et}from"../chunks/C2P6MsPl.js";function Me(n){let e,t='<i class="fa-solid fa-pencil text-picton-blue"></i>',s,i;return{c(){e=m("button"),e.innerHTML=t,this.h()},l(l){e=b(l,"BUTTON",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-sjzna3"&&(e.innerHTML=t),this.h()},h(){v(e,"class","rounded-lg bg-blue-whale shadow shadow-black shadow-sm w-8 h-8")},m(l,r){S(l,e,r),s||(i=me(e,"click",n[11]),s=!0)},p:ae,d(l){l&&d(e),s=!1,i()}}}function tt(n){let e;return{c(){e=m("i"),this.h()},l(t){e=b(t,"I",{class:!0}),p(e).forEach(d),this.h()},h(){v(e,"class","fa-solid fa-expand text-blue-whale")},m(t,s){S(t,e,s)},d(t){t&&d(e)}}}function it(n){let e;return{c(){e=m("i"),this.h()},l(t){e=b(t,"I",{class:!0}),p(e).forEach(d),this.h()},h(){v(e,"class","fa-solid fa-times text-blue-whale")},m(t,s){S(t,e,s)},d(t){t&&d(e)}}}function st(n){let e,t,s,i,l,r,c=n[0].subscribe.maxParticipants+"",a;return{c(){e=m("div"),t=m("i"),s=V(),i=m("span"),l=M(n[1]),r=M(" / "),a=M(c),this.h()},l(f){e=b(f,"DIV",{class:!0});var o=p(e);t=b(o,"I",{class:!0}),p(t).forEach(d),s=T(o),i=b(o,"SPAN",{});var h=p(i);l=L(h,n[1]),r=L(h," / "),a=L(h,c),h.forEach(d),o.forEach(d),this.h()},h(){v(t,"class","fa-solid fa-users"),v(e,"class","flex gap-2 items-center text-gray-600 flex-shrink-0 whitespace-nowrap")},m(f,o){S(f,e,o),u(e,t),u(e,s),u(e,i),u(i,l),u(i,r),u(i,a)},p(f,o){o&2&&K(l,f[1]),o&1&&c!==(c=f[0].subscribe.maxParticipants+"")&&K(a,c)},d(f){f&&d(e)}}}function lt(n){let e,t;function s(r,c){return c&1&&(e=null),r[10]?nt:(e==null&&(e=new Date(r[0].subscribe.subscriptionListOpenDate)>new Date),e?at:rt)}let i=s(n,-1),l=i(n);return{c(){l.c(),t=ue()},l(r){l.l(r),t=ue()},m(r,c){l.m(r,c),S(r,t,c)},p(r,c){i===(i=s(r,c))&&l?l.p(r,c):(l.d(1),l=i(r),l&&(l.c(),l.m(t.parentNode,t)))},d(r){r&&d(t),l.d(r)}}}function rt(n){let e,t,s=new Date(n[0].subscribe.subscriptionListCloseDate)+"",i;return{c(){e=m("span"),t=M("Activity subscription closed on "),i=M(s),this.h()},l(l){e=b(l,"SPAN",{class:!0});var r=p(e);t=L(r,"Activity subscription closed on "),i=L(r,s),r.forEach(d),this.h()},h(){v(e,"class","text-xs")},m(l,r){S(l,e,r),u(e,t),u(e,i)},p(l,r){r&1&&s!==(s=new Date(l[0].subscribe.subscriptionListCloseDate)+"")&&K(i,s)},d(l){l&&d(e)}}}function at(n){let e,t,s=new Date(n[0].subscribe.subscriptionListOpenDate)+"",i;return{c(){e=m("span"),t=M("Activity subscription opens on "),i=M(s),this.h()},l(l){e=b(l,"SPAN",{class:!0});var r=p(e);t=L(r,"Activity subscription opens on "),i=L(r,s),r.forEach(d),this.h()},h(){v(e,"class","text-xs")},m(l,r){S(l,e,r),u(e,t),u(e,i)},p(l,r){r&1&&s!==(s=new Date(l[0].subscribe.subscriptionListOpenDate)+"")&&K(i,s)},d(l){l&&d(e)}}}function nt(n){let e,t,s,i,l,r,c;function a(h,_){return h[2]||h[4]?ot:ct}let f=a(n),o=f(n);return{c(){e=m("button"),t=m("i"),i=V(),o.c(),this.h()},l(h){e=b(h,"BUTTON",{class:!0});var _=p(e);t=b(_,"I",{class:!0}),p(t).forEach(d),i=T(_),o.l(_),_.forEach(d),this.h()},h(){v(t,"class",s="fa-solid "+(n[2]||n[4]?"fa-check":"fa-plus")),v(e,"class",l="inline-flex shrink-0 cursor-pointer disabled:cursor-not-allowed disabled:bg-gray-700 items-center gap-2 px-4 py-2 rounded-md text-sm font-medium text-white "+(n[2]||n[4]?"bg-green-600":"bg-blue-whale hover:bg-blue-whale-dark")+" transition-colors duration-200"),e.disabled=!n[10]},m(h,_){S(h,e,_),u(e,t),u(e,i),o.m(e,null),r||(c=me(e,"click",n[8]),r=!0)},p(h,_){_&20&&s!==(s="fa-solid "+(h[2]||h[4]?"fa-check":"fa-plus"))&&v(t,"class",s),f!==(f=a(h))&&(o.d(1),o=f(h),o&&(o.c(),o.m(e,null))),_&20&&l!==(l="inline-flex shrink-0 cursor-pointer disabled:cursor-not-allowed disabled:bg-gray-700 items-center gap-2 px-4 py-2 rounded-md text-sm font-medium text-white "+(h[2]||h[4]?"bg-green-600":"bg-blue-whale hover:bg-blue-whale-dark")+" transition-colors duration-200")&&v(e,"class",l)},d(h){h&&d(e),o.d(),r=!1,c()}}}function ct(n){let e;return{c(){e=M("Join Activity")},l(t){e=L(t,"Join Activity")},m(t,s){S(t,e,s)},d(t){t&&d(e)}}}function ot(n){let e;return{c(){e=M("Joined activity")},l(t){e=L(t,"Joined activity")},m(t,s){S(t,e,s)},d(t){t&&d(e)}}}function ft(n){let e,t,s,i=n[0].name+"",l,r,c,a,f,o,h,_,E,g,N,w=n[0].location+"",x,J,k,j,F,B,R=n[0].speakers.map(je)+"",Y,Z,q,z,ne,te=n[7](n[0].description)+"",W,ie,$,se,X,H=n[5]&&Me(n);function ce(y,I){return y[3]?it:tt}let U=ce(n),A=U(n),D=n[9]&&st(n),P=n[9]&&lt(n);return{c(){e=m("div"),t=m("div"),s=m("h3"),l=M(i),r=V(),c=m("div"),H&&H.c(),a=V(),f=m("button"),A.c(),o=V(),h=m("div"),_=m("div"),E=m("i"),g=V(),N=m("span"),x=M(w),J=V(),k=m("div"),j=m("i"),F=V(),B=m("span"),Y=M(R),Z=V(),D&&D.c(),q=V(),z=m("div"),ne=m("div"),W=M(te),ie=V(),$=m("div"),P&&P.c(),this.h()},l(y){e=b(y,"DIV",{class:!0});var I=p(e);t=b(I,"DIV",{class:!0});var oe=p(t);s=b(oe,"H3",{class:!0});var C=p(s);l=L(C,i),C.forEach(d),r=T(oe),c=b(oe,"DIV",{class:!0});var O=p(c);H&&H.l(O),a=T(O),f=b(O,"BUTTON",{class:!0});var ee=p(f);A.l(ee),ee.forEach(d),O.forEach(d),oe.forEach(d),o=T(I),h=b(I,"DIV",{class:!0});var le=p(h);_=b(le,"DIV",{class:!0});var re=p(_);E=b(re,"I",{class:!0}),p(E).forEach(d),g=T(re),N=b(re,"SPAN",{class:!0});var de=p(N);x=L(de,w),de.forEach(d),re.forEach(d),J=T(le),k=b(le,"DIV",{class:!0});var ve=p(k);j=b(ve,"I",{class:!0}),p(j).forEach(d),F=T(ve),B=b(ve,"SPAN",{class:!0});var _e=p(B);Y=L(_e,R),_e.forEach(d),ve.forEach(d),Z=T(le),D&&D.l(le),le.forEach(d),I.forEach(d),q=T(y),z=b(y,"DIV",{class:!0});var he=p(z);ne=b(he,"DIV",{class:!0});var ye=p(ne);W=L(ye,te),ye.forEach(d),ie=T(he),$=b(he,"DIV",{class:!0});var pe=p($);P&&P.l(pe),pe.forEach(d),he.forEach(d),this.h()},h(){v(s,"class","text-xl font-semibold text-blue-whale leading-tight flex-1 mr-4 h-20"),v(f,"class","rounded-lg bg-gray-100 duration-100 transition-all hover:bg-gray-50 hover:shadow-md w-8 h-8"),v(c,"class","h-full flex gap-2 items-center"),v(t,"class","flex items-start justify-between mb-3"),v(E,"class","fa-solid fa-location-dot"),v(N,"class","text-sm font-medium"),v(_,"class","flex gap-2 items-center text-gray-600 whitespace-nowrap"),v(j,"class","fa-solid fa-user"),v(B,"class","text-sm font-medium"),v(k,"class","flex gap-2 items-center text-gray-600 whitespace-nowrap"),v(h,"class","flex flex-wrap gap-3"),v(e,"class","p-6 pb-2"),v(ne,"class","text-gray-700 text-sm leading-relaxed mb-4"),v($,"class","flex items-center justify-between py-2 border-t border-gray-100"),v(z,"class","px-6")},m(y,I){S(y,e,I),u(e,t),u(t,s),u(s,l),u(t,r),u(t,c),H&&H.m(c,null),u(c,a),u(c,f),A.m(f,null),u(e,o),u(e,h),u(h,_),u(_,E),u(_,g),u(_,N),u(N,x),u(h,J),u(h,k),u(k,j),u(k,F),u(k,B),u(B,Y),u(h,Z),D&&D.m(h,null),S(y,q,I),S(y,z,I),u(z,ne),u(ne,W),u(z,ie),u(z,$),P&&P.m($,null),se||(X=me(f,"click",n[12]),se=!0)},p(y,[I]){I&1&&i!==(i=y[0].name+"")&&K(l,i),y[5]?H?H.p(y,I):(H=Me(y),H.c(),H.m(c,a)):H&&(H.d(1),H=null),U!==(U=ce(y))&&(A.d(1),A=U(y),A&&(A.c(),A.m(f,null))),I&1&&w!==(w=y[0].location+"")&&K(x,w),I&1&&R!==(R=y[0].speakers.map(je)+"")&&K(Y,R),y[9]&&D.p(y,I),I&1&&te!==(te=y[7](y[0].description)+"")&&K(W,te),y[9]&&P.p(y,I)},i:ae,o:ae,d(y){y&&(d(e),d(q),d(z)),H&&H.d(),A.d(),D&&D.d(),P&&P.d(),se=!1,X()}}}const je=n=>n.name;function ut(n,e,t){let s;Ie(n,Oe,w=>t(5,s=w));let{activity:i}=e,{nrOfSubscribers:l}=e,{isSubscribed:r}=e,{close:c=!1}=e;const a=Qe();function f(w,x=150){return w.length<=x||c?w:w.substring(0,x).trim()+"..."}const o=async()=>{try{(await fetch(Ve(`/activity/${i.id}/subscribe`),{method:"POST",credentials:"include"})).ok?(t(4,h=!0),a("activitySubscribed",{activity:i,activityId:i.id})):console.error("Failed to subscribe to activity")}catch(w){console.error("Error subscribing to activity:",w)}};let h=!1;const _=i.subscribe&&i.subscribe.maxParticipants&&i.subscribe.subscribers,E=_&&!isNaN(Date.parse(i.subscribe.subscriptionListOpenDate))&&!isNaN(Date.parse(i.subscribe.subscriptionListCloseDate))&&new Date(i.subscribe.subscriptionListOpenDate)<=new Date&&new Date(i.subscribe.subscriptionListCloseDate)>new Date,g=()=>Ce(`/program/activity/edit?id=${i.id}`),N=()=>a(c?"close":"expand");return n.$$set=w=>{"activity"in w&&t(0,i=w.activity),"nrOfSubscribers"in w&&t(1,l=w.nrOfSubscribers),"isSubscribed"in w&&t(2,r=w.isSubscribed),"close"in w&&t(3,c=w.close)},[i,l,r,c,h,s,a,f,o,_,E,g,N]}class Ye extends Pe{constructor(e){super(),xe(this,e,ut,ft,Ne,{activity:0,nrOfSubscribers:1,isSubscribed:2,close:3})}}function Be(n){let e,t,s,i,l,r,c,a;return l=new Ye({props:{activity:n[0],nrOfSubscribers:n[1],isSubscribed:n[2],close:!0}}),l.$on("activitySubscribed",n[4]),l.$on("close",n[7]),{c(){e=m("button"),t=V(),s=m("div"),i=m("div"),Se(l.$$.fragment),this.h()},l(f){e=b(f,"BUTTON",{class:!0}),p(e).forEach(d),t=T(f),s=b(f,"DIV",{class:!0});var o=p(s);i=b(o,"DIV",{class:!0});var h=p(i);De(l.$$.fragment,h),h.forEach(d),o.forEach(d),this.h()},h(){v(e,"class","fixed top-0 left-0 w-full h-full bg-black/60 cursor-default backdrop-blur-lg"),v(i,"class","w-full md:max-w-3xl bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden"),v(s,"class","fixed w-screen h-screen left-0 top-0 flex items-center justify-center")},m(f,o){S(f,e,o),S(f,t,o),S(f,s,o),u(s,i),Ee(l,i,null),r=!0,c||(a=me(e,"click",n[6]),c=!0)},p(f,o){const h={};o&1&&(h.activity=f[0]),o&2&&(h.nrOfSubscribers=f[1]),o&4&&(h.isSubscribed=f[2]),l.$set(h)},i(f){r||(G(l.$$.fragment,f),r=!0)},o(f){Q(l.$$.fragment,f),r=!1},d(f){f&&(d(e),d(t),d(s)),we(l),c=!1,a()}}}function dt(n){let e,t,s,i,l;t=new Ye({props:{activity:n[0],nrOfSubscribers:n[1],isSubscribed:n[2]}}),t.$on("activitySubscribed",n[4]),t.$on("expand",n[5]);let r=n[3]&&Be(n);return{c(){e=m("div"),Se(t.$$.fragment),s=V(),r&&r.c(),i=ue(),this.h()},l(c){e=b(c,"DIV",{class:!0});var a=p(e);De(t.$$.fragment,a),a.forEach(d),s=T(c),r&&r.l(c),i=ue(),this.h()},h(){v(e,"class","bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 border border-gray-200 w-full md:max-w-sm shrink-0 svelte-18tlhkx")},m(c,a){S(c,e,a),Ee(t,e,null),S(c,s,a),r&&r.m(c,a),S(c,i,a),l=!0},p(c,[a]){const f={};a&1&&(f.activity=c[0]),a&2&&(f.nrOfSubscribers=c[1]),a&4&&(f.isSubscribed=c[2]),t.$set(f),c[3]?r?(r.p(c,a),a&8&&G(r,1)):(r=Be(c),r.c(),G(r,1),r.m(i.parentNode,i)):r&&(ge(),Q(r,1,1,()=>{r=null}),ke())},i(c){l||(G(t.$$.fragment,c),G(r),l=!0)},o(c){Q(t.$$.fragment,c),Q(r),l=!1},d(c){c&&(d(e),d(s),d(i)),we(t),r&&r.d(c)}}}function ht(n,e,t){let{activity:s}=e,{nrOfSubscribers:i}=e,{isSubscribed:l}=e,r=!1;const c=Qe();function a(_){c("activitySubscribed",_.detail)}const f=()=>t(3,r=!0),o=()=>t(3,r=!1),h=()=>t(3,r=!1);return n.$$set=_=>{"activity"in _&&t(0,s=_.activity),"nrOfSubscribers"in _&&t(1,i=_.nrOfSubscribers),"isSubscribed"in _&&t(2,l=_.isSubscribed)},[s,i,l,r,a,f,o,h]}class bt extends Pe{constructor(e){super(),xe(this,e,ht,dt,Ne,{activity:0,nrOfSubscribers:1,isSubscribed:2})}}function He(n,e,t){const s=n.slice();return s[16]=e[t],s}function mt(n){let e,t,s,i,l=n[0].name+"",r,c,a,f=Ae(n[0].beginTime,n[0].endTime)+"",o,h,_,E,g,N="Start:",w,x,J=be(n[0].beginTime)+"",k,j,F,B,R="End:",Y,Z,q=be(n[0].endTime)+"",z,ne,te,W,ie,$,se,X,H,ce,U=n[6]&&Ue(n),A=n[4]&&Fe(n);return{c(){e=m("button"),t=m("div"),s=m("div"),i=m("h3"),r=M(l),c=V(),a=m("span"),o=M(f),h=V(),_=m("div"),E=m("div"),g=m("span"),g.textContent=N,w=V(),x=m("span"),k=M(J),j=V(),F=m("div"),B=m("span"),B.textContent=R,Y=V(),Z=m("span"),z=M(q),ne=V(),U&&U.c(),te=V(),W=m("i"),$=V(),A&&A.c(),se=ue(),this.h()},l(D){e=b(D,"BUTTON",{class:!0});var P=p(e);t=b(P,"DIV",{class:!0});var y=p(t);s=b(y,"DIV",{class:!0});var I=p(s);i=b(I,"H3",{class:!0});var oe=p(i);r=L(oe,l),oe.forEach(d),c=T(I),a=b(I,"SPAN",{class:!0});var C=p(a);o=L(C,f),C.forEach(d),I.forEach(d),h=T(y),_=b(y,"DIV",{class:!0});var O=p(_);E=b(O,"DIV",{class:!0});var ee=p(E);g=b(ee,"SPAN",{class:!0,"data-svelte-h":!0}),fe(g)!=="svelte-11t2hy0"&&(g.textContent=N),w=T(ee),x=b(ee,"SPAN",{});var le=p(x);k=L(le,J),le.forEach(d),ee.forEach(d),j=T(O),F=b(O,"DIV",{class:!0});var re=p(F);B=b(re,"SPAN",{class:!0,"data-svelte-h":!0}),fe(B)!=="svelte-i1trgj"&&(B.textContent=R),Y=T(re),Z=b(re,"SPAN",{});var de=p(Z);z=L(de,q),de.forEach(d),re.forEach(d),O.forEach(d),y.forEach(d),ne=T(P),U&&U.l(P),te=T(P),W=b(P,"I",{class:!0}),p(W).forEach(d),P.forEach(d),$=T(D),A&&A.l(D),se=ue(),this.h()},h(){v(i,"class","text-lg font-medium text-gray-900"),v(a,"class","inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800"),v(s,"class","flex items-center space-x-4"),v(g,"class","font-medium"),v(E,"class","flex items-center space-x-1"),v(B,"class","font-medium"),v(F,"class","flex items-center space-x-1"),v(_,"class","flex items-center space-x-6 text-sm text-gray-600"),v(t,"class","mr-auto"),v(W,"class",ie=`fa-solid fa-chevron-${n[4]?"up":"down"}`),v(e,"class","p-6 w-full flex rounded-t-xl items-center gap-8 bg-gray-100 hover:bg-gray-200 transition-colors")},m(D,P){S(D,e,P),u(e,t),u(t,s),u(s,i),u(i,r),u(s,c),u(s,a),u(a,o),u(t,h),u(t,_),u(_,E),u(E,g),u(E,w),u(E,x),u(x,k),u(_,j),u(_,F),u(F,B),u(F,Y),u(F,Z),u(Z,z),u(e,ne),U&&U.m(e,null),u(e,te),u(e,W),S(D,$,P),A&&A.m(D,P),S(D,se,P),X=!0,H||(ce=me(e,"click",n[13]),H=!0)},p(D,P){(!X||P&1)&&l!==(l=D[0].name+"")&&K(r,l),(!X||P&1)&&f!==(f=Ae(D[0].beginTime,D[0].endTime)+"")&&K(o,f),(!X||P&1)&&J!==(J=be(D[0].beginTime)+"")&&K(k,J),(!X||P&1)&&q!==(q=be(D[0].endTime)+"")&&K(z,q),D[6]?U?U.p(D,P):(U=Ue(D),U.c(),U.m(e,te)):U&&(U.d(1),U=null),(!X||P&16&&ie!==(ie=`fa-solid fa-chevron-${D[4]?"up":"down"}`))&&v(W,"class",ie),D[4]?A?(A.p(D,P),P&16&&G(A,1)):(A=Fe(D),A.c(),G(A,1),A.m(se.parentNode,se)):A&&(ge(),Q(A,1,1,()=>{A=null}),ke())},i(D){X||(G(A),X=!0)},o(D){Q(A),X=!1},d(D){D&&(d(e),d($),d(se)),U&&U.d(),A&&A.d(D),H=!1,ce()}}}function vt(n){var oe;let e,t,s,i,l,r=n[0].name+"",c,a,f,o=(((oe=n[1])==null?void 0:oe[0].activity.name)??"")+"",h,_,E,g=Ae(n[0].beginTime,n[0].endTime)+"",N,w,x,J,k,j="Start:",F,B,R=be(n[0].beginTime)+"",Y,Z,q,z,ne="End:",te,W,ie=be(n[0].endTime)+"",$,se,X,H,ce,U,A,D,P,y=n[7]&&qe(n),I=n[4]&&Ge(n);return{c(){e=m("button"),t=m("div"),s=m("div"),i=m("h3"),l=m("b"),c=M(r),a=M(":"),f=V(),h=M(o),_=V(),E=m("span"),N=M(g),w=V(),x=m("div"),J=m("div"),k=m("span"),k.textContent=j,F=V(),B=m("span"),Y=M(R),Z=V(),q=m("div"),z=m("span"),z.textContent=ne,te=V(),W=m("span"),$=M(ie),se=V(),y&&y.c(),X=V(),H=m("i"),U=V(),I&&I.c(),A=ue(),this.h()},l(C){e=b(C,"BUTTON",{class:!0});var O=p(e);t=b(O,"DIV",{class:!0});var ee=p(t);s=b(ee,"DIV",{class:!0});var le=p(s);i=b(le,"H3",{class:!0});var re=p(i);l=b(re,"B",{});var de=p(l);c=L(de,r),a=L(de,":"),de.forEach(d),f=T(re),h=L(re,o),re.forEach(d),_=T(le),E=b(le,"SPAN",{class:!0});var ve=p(E);N=L(ve,g),ve.forEach(d),le.forEach(d),w=T(ee),x=b(ee,"DIV",{class:!0});var _e=p(x);J=b(_e,"DIV",{class:!0});var he=p(J);k=b(he,"SPAN",{class:!0,"data-svelte-h":!0}),fe(k)!=="svelte-11t2hy0"&&(k.textContent=j),F=T(he),B=b(he,"SPAN",{});var ye=p(B);Y=L(ye,R),ye.forEach(d),he.forEach(d),Z=T(_e),q=b(_e,"DIV",{class:!0});var pe=p(q);z=b(pe,"SPAN",{class:!0,"data-svelte-h":!0}),fe(z)!=="svelte-i1trgj"&&(z.textContent=ne),te=T(pe),W=b(pe,"SPAN",{});var Le=p(W);$=L(Le,ie),Le.forEach(d),pe.forEach(d),_e.forEach(d),ee.forEach(d),se=T(O),y&&y.l(O),X=T(O),H=b(O,"I",{class:!0}),p(H).forEach(d),O.forEach(d),U=T(C),I&&I.l(C),A=ue(),this.h()},h(){v(i,"class","text-lg font-medium text-gray-900"),v(E,"class","inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800"),v(s,"class","flex items-center space-x-4"),v(k,"class","font-medium"),v(J,"class","flex items-center space-x-1"),v(z,"class","font-medium"),v(q,"class","flex items-center space-x-1"),v(x,"class","flex items-center space-x-6 text-sm text-gray-600"),v(t,"class","mr-auto"),v(H,"class",ce=`fa-solid fa-chevron-${n[4]?"up":"down"}`),v(e,"class","py-4 px-6 w-full flex rounded-t-xl items-center gap-8 bg-gray-100 hover:bg-gray-200 transition-colors")},m(C,O){S(C,e,O),u(e,t),u(t,s),u(s,i),u(i,l),u(l,c),u(l,a),u(i,f),u(i,h),u(s,_),u(s,E),u(E,N),u(t,w),u(t,x),u(x,J),u(J,k),u(J,F),u(J,B),u(B,Y),u(x,Z),u(x,q),u(q,z),u(q,te),u(q,W),u(W,$),u(e,se),y&&y.m(e,null),u(e,X),u(e,H),S(C,U,O),I&&I.m(C,O),S(C,A,O),D||(P=me(e,"click",n[12]),D=!0)},p(C,O){var ee;O&1&&r!==(r=C[0].name+"")&&K(c,r),O&2&&o!==(o=(((ee=C[1])==null?void 0:ee[0].activity.name)??"")+"")&&K(h,o),O&1&&g!==(g=Ae(C[0].beginTime,C[0].endTime)+"")&&K(N,g),O&1&&R!==(R=be(C[0].beginTime)+"")&&K(Y,R),O&1&&ie!==(ie=be(C[0].endTime)+"")&&K($,ie),C[7]?y?y.p(C,O):(y=qe(C),y.c(),y.m(e,X)):y&&(y.d(1),y=null),O&16&&ce!==(ce=`fa-solid fa-chevron-${C[4]?"up":"down"}`)&&v(H,"class",ce),C[4]?I?I.p(C,O):(I=Ge(C),I.c(),I.m(A.parentNode,A)):I&&(I.d(1),I=null)},i:ae,o:ae,d(C){C&&(d(e),d(U),d(A)),y&&y.d(),I&&I.d(C),D=!1,P()}}}function Ue(n){let e,t,s,i,l,r=n[6].name+"",c,a,f,o,h,_,E=n[6].location+"",g;return{c(){e=m("div"),t=m("div"),s=m("i"),i=V(),l=m("span"),c=M(r),a=V(),f=m("div"),o=m("i"),h=V(),_=m("span"),g=M(E),this.h()},l(N){e=b(N,"DIV",{class:!0});var w=p(e);t=b(w,"DIV",{class:!0});var x=p(t);s=b(x,"I",{class:!0}),p(s).forEach(d),i=T(x),l=b(x,"SPAN",{class:!0});var J=p(l);c=L(J,r),J.forEach(d),x.forEach(d),a=T(w),f=b(w,"DIV",{class:!0});var k=p(f);o=b(k,"I",{class:!0}),p(o).forEach(d),h=T(k),_=b(k,"SPAN",{class:!0});var j=p(_);g=L(j,E),j.forEach(d),k.forEach(d),w.forEach(d),this.h()},h(){v(s,"class","fa-solid fa-person-chalkboard"),v(l,"class","max-w-48 overflow-hidden whitespace-nowrap text-ellipsis"),v(t,"class","flex gap-1 items-center"),v(o,"class","fa-solid fa-location-dot"),v(_,"class","max-w-32 overflow-hidden whitespace-nowrap text-ellipsis"),v(f,"class","flex gap-1 items-center"),v(e,"class","bg-blue-whale px-4 py-2 rounded-full items-center text-white flex gap-2")},m(N,w){S(N,e,w),u(e,t),u(t,s),u(t,i),u(t,l),u(l,c),u(e,a),u(e,f),u(f,o),u(f,h),u(f,_),u(_,g)},p(N,w){w&64&&r!==(r=N[6].name+"")&&K(c,r),w&64&&E!==(E=N[6].location+"")&&K(g,E)},d(N){N&&d(e)}}}function Fe(n){let e,t,s,i=Te(n[5]),l=[];for(let a=0;a<i.length;a+=1)l[a]=ze(He(n,i,a));const r=a=>Q(l[a],1,1,()=>{l[a]=null});let c=n[2]&&Je(n);return{c(){e=m("div");for(let a=0;a<l.length;a+=1)l[a].c();t=V(),c&&c.c(),this.h()},l(a){e=b(a,"DIV",{class:!0});var f=p(e);for(let o=0;o<l.length;o+=1)l[o].l(f);t=T(f),c&&c.l(f),f.forEach(d),this.h()},h(){v(e,"class","flex gap-4 flex-col md:flex-row items-stretch bg-gray-300 p-4 rounded-b-xl overflow-auto")},m(a,f){S(a,e,f);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);u(e,t),c&&c.m(e,null),s=!0},p(a,f){if(f&808){i=Te(a[5]);let o;for(o=0;o<i.length;o+=1){const h=He(a,i,o);l[o]?(l[o].p(h,f),G(l[o],1)):(l[o]=ze(h),l[o].c(),G(l[o],1),l[o].m(e,t))}for(ge(),o=i.length;o<l.length;o+=1)r(o);ke()}a[2]?c?c.p(a,f):(c=Je(a),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(a){if(!s){for(let f=0;f<i.length;f+=1)G(l[f]);s=!0}},o(a){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)Q(l[f]);s=!1},d(a){a&&d(e),Xe(l,a),c&&c.d()}}}function ze(n){let e,t;return e=new bt({props:{activity:n[16].activity,nrOfSubscribers:n[16].nrOfSubscribers,isSubscribed:n[8](n[3],n[16].activity.id)}}),e.$on("activitySubscribed",n[9]),{c(){Se(e.$$.fragment)},l(s){De(e.$$.fragment,s)},m(s,i){Ee(e,s,i),t=!0},p(s,i){const l={};i&32&&(l.activity=s[16].activity),i&32&&(l.nrOfSubscribers=s[16].nrOfSubscribers),i&40&&(l.isSubscribed=s[8](s[3],s[16].activity.id)),e.$set(l)},i(s){t||(G(e.$$.fragment,s),t=!0)},o(s){Q(e.$$.fragment,s),t=!1},d(s){we(e,s)}}}function Je(n){let e,t,s="+",i,l;return{c(){e=m("div"),t=m("button"),t.textContent=s,this.h()},l(r){e=b(r,"DIV",{class:!0});var c=p(e);t=b(c,"BUTTON",{class:!0,"data-svelte-h":!0}),fe(t)!=="svelte-1cav9my"&&(t.textContent=s),c.forEach(d),this.h()},h(){v(t,"class","size-16 bg-blue-whale text-white text-5xl rounded-full ml-2"),v(e,"class","flex items-center")},m(r,c){S(r,e,c),u(e,t),i||(l=me(t,"click",n[14]),i=!0)},p:ae,d(r){r&&d(e),i=!1,l()}}}function qe(n){let e,t='<i class="fa-solid fa-pencil text-picton-blue"></i>',s,i;return{c(){e=m("button"),e.innerHTML=t,this.h()},l(l){e=b(l,"BUTTON",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-1bvd5dk"&&(e.innerHTML=t),this.h()},h(){v(e,"class","rounded-lg bg-blue-whale shadow shadow-black shadow-sm w-8 h-8")},m(l,r){S(l,e,r),s||(i=me(e,"click",n[11]),s=!0)},p:ae,d(l){l&&d(e),s=!1,i()}}}function Ge(n){let e,t=n[1][0].activity.description+"",s,i,l,r,c,a='<span class="text-xs">This is a keynote, you are automatically subscribed to this activity</span>';return{c(){e=m("div"),s=M(t),i=V(),l=m("br"),r=V(),c=m("div"),c.innerHTML=a,this.h()},l(f){e=b(f,"DIV",{class:!0});var o=p(e);s=L(o,t),i=T(o),l=b(o,"BR",{}),r=T(o),c=b(o,"DIV",{class:!0,"data-svelte-h":!0}),fe(c)!=="svelte-mgeikw"&&(c.innerHTML=a),o.forEach(d),this.h()},h(){v(c,"class","pt-2 mt-2 border-t"),v(e,"class","flex gap-2 flex-col items-stretch bg-gray-100 py-2 px-6 rounded-b-xl")},m(f,o){S(f,e,o),u(e,s),u(e,i),u(e,l),u(e,r),u(e,c)},p(f,o){o&2&&t!==(t=f[1][0].activity.description+"")&&K(s,t)},d(f){f&&d(e)}}}function _t(n){let e,t,s,i;const l=[vt,mt],r=[];function c(a,f){return a[10]?0:1}return t=c(n),s=r[t]=l[t](n),{c(){e=m("div"),s.c(),this.h()},l(a){e=b(a,"DIV",{class:!0});var f=p(e);s.l(f),f.forEach(d),this.h()},h(){v(e,"class","flex flex-col shadow-md shadow-black/35 rounded-xl overflow-hidden")},m(a,f){S(a,e,f),r[t].m(e,null),i=!0},p(a,[f]){s.p(a,f)},i(a){i||(G(s),i=!0)},o(a){Q(s),i=!1},d(a){a&&d(e),r[t].d()}}}function be(n){return new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}function Ae(n,e){const t=new Date(n),i=new Date(e).getTime()-t.getTime(),l=Math.round(i/(1e3*60));if(l<60)return`${l} min`;{const r=Math.floor(l/60),c=l%60;return c>0?`${r}h ${c}m`:`${r}h`}}function pt(n,e,t){let s;Ie(n,Oe,k=>t(7,s=k));let{part:i}=e,{activities:l}=e,{admin:r}=e,c=!0,a,f=[];async function o(){try{const k=await fetch(Ve("/profile"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});k.ok&&t(3,a=await k.json())}catch(k){console.error(k)}}const h=(k,j)=>{var F;return((F=k==null?void 0:k.subscriptions)==null?void 0:F.length)&&k.subscriptions.some(B=>B.activity.id===j)};let _;function E(k){const{activity:j}=k.detail;t(4,c=!1),t(6,_=j),o()}We(()=>{o()});const g=l.some(k=>k.activity.speakers.some(j=>j.type==="keynote")),N=()=>Ce(`/program/activity/edit?id=${l[0].activity.id}`),w=()=>t(4,c=!c),x=()=>t(4,c=!c),J=()=>Ce(`/program/activity/create?programPartId=${i.id}`);return n.$$set=k=>{"part"in k&&t(0,i=k.part),"activities"in k&&t(1,l=k.activities),"admin"in k&&t(2,r=k.admin)},n.$$.update=()=>{var k;n.$$.dirty&2&&t(5,f=l?[...l].sort((j,F)=>{var Y,Z,q,z;const B=((Z=(Y=j==null?void 0:j.activity)==null?void 0:Y.subscribe)==null?void 0:Z.maxParticipants)??0;return(((z=(q=F==null?void 0:F.activity)==null?void 0:q.subscribe)==null?void 0:z.maxParticipants)??0)-B}):[]),n.$$.dirty&10&&t(6,_=a&&a.subscriptions&&l?((k=l.find(j=>a.subscriptions.some(F=>{var B,R;return((B=F.activity)==null?void 0:B.id)===((R=j.activity)==null?void 0:R.id)})))==null?void 0:k.activity)??void 0:void 0)},[i,l,r,a,c,f,_,s,h,E,g,N,w,x,J]}class gt extends Pe{constructor(e){super(),xe(this,e,pt,_t,Ne,{part:0,activities:1,admin:2})}}function Ke(n,e,t){const s=n.slice();return s[11]=e[t],s}function kt(n){let e,t;return{c(){e=m("div"),t=M(n[5]),this.h()},l(s){e=b(s,"DIV",{class:!0});var i=p(e);t=L(i,n[5]),i.forEach(d),this.h()},h(){v(e,"class","bg-red-100 text-red-700 p-4 rounded mt-12 text-center")},m(s,i){S(s,e,i),u(e,t)},p(s,i){i&32&&K(t,s[5])},i:ae,o:ae,d(s){s&&d(e)}}}function yt(n){let e,t,s,i;const l=[Dt,Et,wt],r=[];function c(a,f){return a[4]?0:a[2].length===0?1:2}return e=c(n),t=r[e]=l[e](n),{c(){t.c(),s=ue()},l(a){t.l(a),s=ue()},m(a,f){r[e].m(a,f),S(a,s,f),i=!0},p(a,f){let o=e;e=c(a),e===o?r[e].p(a,f):(ge(),Q(r[o],1,1,()=>{r[o]=null}),ke(),t=r[e],t?t.p(a,f):(t=r[e]=l[e](a),t.c()),G(t,1),t.m(s.parentNode,s))},i(a){i||(G(t),i=!0)},o(a){Q(t),i=!1},d(a){a&&d(s),r[e].d(a)}}}function wt(n){let e,t,s=Te(n[2]),i=[];for(let r=0;r<s.length;r+=1)i[r]=Re(Ke(n,s,r));const l=r=>Q(i[r],1,1,()=>{i[r]=null});return{c(){e=m("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=b(r,"DIV",{class:!0});var c=p(e);for(let a=0;a<i.length;a+=1)i[a].l(c);c.forEach(d),this.h()},h(){v(e,"class","space-y-8 p-8")},m(r,c){S(r,e,c);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);t=!0},p(r,c){if(c&76){s=Te(r[2]);let a;for(a=0;a<s.length;a+=1){const f=Ke(r,s,a);i[a]?(i[a].p(f,c),G(i[a],1)):(i[a]=Re(f),i[a].c(),G(i[a],1),i[a].m(e,null))}for(ge(),a=s.length;a<i.length;a+=1)l(a);ke()}},i(r){if(!t){for(let c=0;c<s.length;c+=1)G(i[c]);t=!0}},o(r){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)Q(i[c]);t=!1},d(r){r&&d(e),Xe(i,r)}}}function Et(n){let e,t='<div class="text-gray-500 text-lg">No program parts scheduled yet</div> <p class="text-gray-400 mt-2">Check back later for updates</p>';return{c(){e=m("div"),e.innerHTML=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-calpt5"&&(e.innerHTML=t),this.h()},h(){v(e,"class","text-center py-12")},m(s,i){S(s,e,i)},p:ae,i:ae,o:ae,d(s){s&&d(e)}}}function Dt(n){let e,t,s,i,l,r="Loading program...",c,a;function f(_,E){if(_[0])return It;if(_[1])return St}let o=f(n),h=o&&o(n);return{c(){e=m("div"),t=m("div"),s=m("div"),i=V(),l=m("div"),l.textContent=r,c=V(),a=m("div"),h&&h.c(),this.h()},l(_){e=b(_,"DIV",{class:!0});var E=p(e);t=b(E,"DIV",{class:!0});var g=p(t);s=b(g,"DIV",{class:!0}),p(s).forEach(d),i=T(g),l=b(g,"DIV",{class:!0,"data-svelte-h":!0}),fe(l)!=="svelte-hb50jb"&&(l.textContent=r),c=T(g),a=b(g,"DIV",{class:!0});var N=p(a);h&&h.l(N),N.forEach(d),g.forEach(d),E.forEach(d),this.h()},h(){v(s,"class","animate-spin rounded-full h-12 w-12 border-b-2 border-blue-whale mx-auto mb-4"),v(l,"class","text-gray-500 text-lg"),v(a,"class","text-gray-400 text-sm mt-2"),v(t,"class","text-center"),v(e,"class","flex justify-center items-center py-16")},m(_,E){S(_,e,E),u(e,t),u(t,s),u(t,i),u(t,l),u(t,c),u(t,a),h&&h.m(a,null)},p(_,E){o!==(o=f(_))&&(h&&h.d(1),h=o&&o(_),h&&(h.c(),h.m(a,null)))},i:ae,o:ae,d(_){_&&d(e),h&&h.d()}}}function Re(n){let e,t;function s(...i){return n[7](n[11],...i)}return e=new gt({props:{part:n[11],activities:n[3].filter(s),admin:n[6]}}),{c(){Se(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,l){Ee(e,i,l),t=!0},p(i,l){n=i;const r={};l&4&&(r.part=n[11]),l&12&&(r.activities=n[3].filter(s)),l&64&&(r.admin=n[6]),e.$set(r)},i(i){t||(G(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){we(e,i)}}}function St(n){let e;return{c(){e=M("Loading activities...")},l(t){e=L(t,"Loading activities...")},m(t,s){S(t,e,s)},d(t){t&&d(e)}}}function It(n){let e;return{c(){e=M("Loading program parts...")},l(t){e=L(t,"Loading program parts...")},m(t,s){S(t,e,s)},d(t){t&&d(e)}}}function Tt(n){let e,t,s,i,l,r;e=new et({props:{title:"Program"}});const c=[yt,kt],a=[];function f(o,h){return o[5]?1:0}return i=f(n),l=a[i]=c[i](n),{c(){Se(e.$$.fragment),t=V(),s=m("div"),l.c(),this.h()},l(o){De(e.$$.fragment,o),t=T(o),s=b(o,"DIV",{id:!0,class:!0});var h=p(s);l.l(h),h.forEach(d),this.h()},h(){v(s,"id","program_section"),v(s,"class","container flex-col text-blue-whale gap-4 text-center md:text-left")},m(o,h){Ee(e,o,h),S(o,t,h),S(o,s,h),a[i].m(s,null),r=!0},p(o,[h]){let _=i;i=f(o),i===_?a[i].p(o,h):(ge(),Q(a[_],1,1,()=>{a[_]=null}),ke(),l=a[i],l?l.p(o,h):(l=a[i]=c[i](o),l.c()),G(l,1),l.m(s,null))},i(o){r||(G(e.$$.fragment,o),G(l),r=!0)},o(o){Q(e.$$.fragment,o),Q(l),r=!1},d(o){o&&(d(t),d(s)),we(e,o),a[i].d()}}}function Vt(n,e,t){let s,i;Ie(n,$e,g=>t(8,s=g)),Ie(n,Oe,g=>t(6,i=g));let l=[],r=[],c=!0,a="",f=!0,o=!0;We(async()=>{s||await Ze.init(),await h(),await _()});async function h(){t(0,f=!0),t(5,a="");try{const g=await fetch(Ve("/programpart"));g.ok?t(2,l=await g.json()):(t(5,a=g.status===401?"Unauthorized":"Failed to load program"),console.error("Failed to fetch program parts:",g.status))}catch(g){t(5,a="Network error occurred"),console.error("Error fetching program parts:",g)}finally{t(0,f=!1)}}async function _(){t(1,o=!0),t(5,a="");try{const g=await fetch(Ve("/activity"));g.ok?t(3,r=await g.json()):(t(5,a=g.status===401?"Unauthorized":"Failed to load activities"),console.error("Failed to fetch activities:",g.status))}catch(g){t(5,a="Network error occurred"),console.error("Error fetching activities:",g)}finally{t(1,o=!1)}}const E=(g,N)=>{var w,x;return((x=(w=N==null?void 0:N.activity)==null?void 0:w.programPart)==null?void 0:x.id)===g.id};return n.$$.update=()=>{n.$$.dirty&3&&t(4,c=f||o)},[f,o,l,r,c,a,i,E]}class Mt extends Pe{constructor(e){super(),xe(this,e,Vt,Tt,Ne,{})}}export{Mt as component};
