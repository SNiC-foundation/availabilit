import{s as Te,n as Z,d as c,i as R,b as l,c as d,e as f,f as v,k as h,v as Ve,a as I,p as Ne,g as $,h as L,j as k,l as C,t as E,w as Le}from"../chunks/DUYTDFI5.js";import{e as ye}from"../chunks/fXUx-Agj.js";import{S as Ce,i as Ie}from"../chunks/z4FfSzan.js";import{a as Se}from"../chunks/BF9jo3u2.js";function be(a,e,t){const s=a.slice();return s[4]=e[t],s}function Ae(a){let e,t;return{c(){e=h("div"),t=E(a[2]),this.h()},l(s){e=f(s,"DIV",{class:!0});var n=v(e);t=k(n,a[2]),n.forEach(c),this.h()},h(){d(e,"class","bg-red-100 text-red-700 p-4 rounded mt-12 text-center")},m(s,n){R(s,e,n),l(e,t)},p(s,n){n&4&&I(t,s[2])},d(s){s&&c(e)}}}function Ue(a){let e,t,s,n="User Management",i,r,u=a[0]?"Loading...":"Refresh",x,D,H,V;function S(_,b){return _[0]?je:_[1].length===0?Me:He}let A=S(a),y=A(a);return{c(){e=h("div"),t=h("div"),s=h("h1"),s.textContent=n,i=C(),r=h("button"),x=E(u),D=C(),y.c(),this.h()},l(_){e=f(_,"DIV",{class:!0});var b=v(e);t=f(b,"DIV",{class:!0});var T=v(t);s=f(T,"H1",{class:!0,"data-svelte-h":!0}),$(s)!=="svelte-1xcogxn"&&(s.textContent=n),i=L(T),r=f(T,"BUTTON",{class:!0});var P=v(r);x=k(P,u),P.forEach(c),T.forEach(c),D=L(b),y.l(b),b.forEach(c),this.h()},h(){d(s,"class","text-3xl font-bold text-blue-whale"),r.disabled=a[0],d(r,"class","bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:opacity-50"),d(t,"class","flex justify-between items-center mb-6"),d(e,"class","bg-white rounded-lg shadow-md p-8 mt-16")},m(_,b){R(_,e,b),l(e,t),l(t,s),l(t,i),l(t,r),l(r,x),l(e,D),y.m(e,null),H||(V=Ne(r,"click",a[3]),H=!0)},p(_,b){b&1&&u!==(u=_[0]?"Loading...":"Refresh")&&I(x,u),b&1&&(r.disabled=_[0]),A===(A=S(_))&&y?y.p(_,b):(y.d(1),y=A(_),y&&(y.c(),y.m(e,null)))},d(_){_&&c(e),y.d(),H=!1,V()}}}function He(a){let e,t,s,n='<tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">User ID</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Roles</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ticket Code</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Association</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Dietary Wishes</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Special Needs</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Created</th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email Verified</th></tr>',i,r,u,x,D,H,V=a[1].length+"",S,A,y=a[1].length!==1?"s":"",_,b,T,P,q=new Date().toLocaleTimeString()+"",F,U=ye(a[1]),g=[];for(let p=0;p<U.length;p+=1)g[p]=we(be(a,U,p));return{c(){e=h("div"),t=h("table"),s=h("thead"),s.innerHTML=n,i=C(),r=h("tbody");for(let p=0;p<g.length;p+=1)g[p].c();u=C(),x=h("div"),D=h("div"),H=E("Showing "),S=E(V),A=E(" user"),_=E(y),b=C(),T=h("div"),P=E("Last updated: "),F=E(q),this.h()},l(p){e=f(p,"DIV",{class:!0});var N=v(e);t=f(N,"TABLE",{class:!0});var m=v(t);s=f(m,"THEAD",{class:!0,"data-svelte-h":!0}),$(s)!=="svelte-1p8jf9y"&&(s.innerHTML=n),i=L(m),r=f(m,"TBODY",{class:!0});var M=v(r);for(let O=0;O<g.length;O+=1)g[O].l(M);M.forEach(c),m.forEach(c),N.forEach(c),u=L(p),x=f(p,"DIV",{class:!0});var W=v(x);D=f(W,"DIV",{class:!0});var z=v(D);H=k(z,"Showing "),S=k(z,V),A=k(z," user"),_=k(z,y),z.forEach(c),b=L(W),T=f(W,"DIV",{class:!0});var B=v(T);P=k(B,"Last updated: "),F=k(B,q),B.forEach(c),W.forEach(c),this.h()},h(){d(s,"class","bg-gray-50"),d(r,"class","bg-white divide-y divide-gray-200"),d(t,"class","min-w-full divide-y divide-gray-200"),d(e,"class","overflow-x-auto"),d(D,"class","text-sm text-gray-500"),d(T,"class","text-sm text-gray-500"),d(x,"class","mt-6 flex justify-between items-center")},m(p,N){R(p,e,N),l(e,t),l(t,s),l(t,i),l(t,r);for(let m=0;m<g.length;m+=1)g[m]&&g[m].m(r,null);R(p,u,N),R(p,x,N),l(x,D),l(D,H),l(D,S),l(D,A),l(D,_),l(x,b),l(x,T),l(T,P),l(T,F)},p(p,N){if(N&2){U=ye(p[1]);let m;for(m=0;m<U.length;m+=1){const M=be(p,U,m);g[m]?g[m].p(M,N):(g[m]=we(M),g[m].c(),g[m].m(r,null))}for(;m<g.length;m+=1)g[m].d(1);g.length=U.length}N&2&&V!==(V=p[1].length+"")&&I(S,V),N&2&&y!==(y=p[1].length!==1?"s":"")&&I(_,y)},d(p){p&&(c(e),c(u),c(x)),Le(g,p)}}}function Me(a){let e,t='<div class="text-gray-500 text-lg">No users found</div>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(s){e=f(s,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-1pf7zs2"&&(e.innerHTML=t),this.h()},h(){d(e,"class","text-center py-12")},m(s,n){R(s,e,n)},p:Z,d(s){s&&c(e)}}}function je(a){let e,t='<div class="text-gray-500">Loading users...</div>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(s){e=f(s,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-kg7eew"&&(e.innerHTML=t),this.h()},h(){d(e,"class","flex justify-center items-center py-12")},m(s,n){R(s,e,n)},p:Z,d(s){s&&c(e)}}}function Re(a){let e,t="No ticket";return{c(){e=h("span"),e.textContent=t,this.h()},l(s){e=f(s,"SPAN",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-1ltvq4q"&&(e.textContent=t),this.h()},h(){d(e,"class","text-gray-400")},m(s,n){R(s,e,n)},p:Z,d(s){s&&c(e)}}}function Pe(a){let e,t=Ee(a[4].ticket.code)+"",s,n;return{c(){e=h("span"),s=E(t),this.h()},l(i){e=f(i,"SPAN",{title:!0});var r=v(e);s=k(r,t),r.forEach(c),this.h()},h(){d(e,"title",n=a[4].ticket.code)},m(i,r){R(i,e,r),l(e,s)},p(i,r){r&2&&t!==(t=Ee(i[4].ticket.code)+"")&&I(s,t),r&2&&n!==(n=i[4].ticket.code)&&d(e,"title",n)},d(i){i&&c(e)}}}function we(a){var ce;let e,t,s,n=a[4].id+"",i,r,u,x=a[4].name+"",D,H,V,S=a[4].email+"",A,y,_,b=De(a[4].roles)+"",T,P,q,F,U,g=(((ce=a[4].ticket)==null?void 0:ce.association)||"N/A")+"",p,N,m,M=(a[4].dietaryWishes||"None")+"",W,z,B,O=(a[4].needs||"None")+"",ee,re,G,Q=ke(a[4].createdAt)+"",te,ie,J,Y,X=a[4].emailVerified?"Verified":"Unverified",se,le,ne;function oe(w,o){return w[4].ticket?Pe:Re}let ae=oe(a),j=ae(a);return{c(){e=h("tr"),t=h("td"),s=E("#"),i=E(n),r=C(),u=h("td"),D=E(x),H=C(),V=h("td"),A=E(S),y=C(),_=h("td"),T=E(b),P=C(),q=h("td"),j.c(),F=C(),U=h("td"),p=E(g),N=C(),m=h("td"),W=E(M),z=C(),B=h("td"),ee=E(O),re=C(),G=h("td"),te=E(Q),ie=C(),J=h("td"),Y=h("span"),se=E(X),ne=C(),this.h()},l(w){e=f(w,"TR",{class:!0});var o=v(e);t=f(o,"TD",{class:!0});var K=v(t);s=k(K,"#"),i=k(K,n),K.forEach(c),r=L(o),u=f(o,"TD",{class:!0});var de=v(u);D=k(de,x),de.forEach(c),H=L(o),V=f(o,"TD",{class:!0});var ue=v(V);A=k(ue,S),ue.forEach(c),y=L(o),_=f(o,"TD",{class:!0});var fe=v(_);T=k(fe,b),fe.forEach(c),P=L(o),q=f(o,"TD",{class:!0});var he=v(q);j.l(he),he.forEach(c),F=L(o),U=f(o,"TD",{class:!0});var pe=v(U);p=k(pe,g),pe.forEach(c),N=L(o),m=f(o,"TD",{class:!0});var me=v(m);W=k(me,M),me.forEach(c),z=L(o),B=f(o,"TD",{class:!0});var _e=v(B);ee=k(_e,O),_e.forEach(c),re=L(o),G=f(o,"TD",{class:!0});var ve=v(G);te=k(ve,Q),ve.forEach(c),ie=L(o),J=f(o,"TD",{class:!0});var xe=v(J);Y=f(xe,"SPAN",{class:!0});var ge=v(Y);se=k(ge,X),ge.forEach(c),xe.forEach(c),ne=L(o),o.forEach(c),this.h()},h(){d(t,"class","px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"),d(u,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-900"),d(V,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),d(_,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),d(q,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"),d(U,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),d(m,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),d(B,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),d(G,"class","px-6 py-4 whitespace-nowrap text-sm text-gray-500"),d(Y,"class",le="inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(a[4].emailVerified?"bg-green-100 text-green-800":"bg-red-100 text-red-800")),d(J,"class","px-6 py-4 whitespace-nowrap"),d(e,"class","hover:bg-gray-50")},m(w,o){R(w,e,o),l(e,t),l(t,s),l(t,i),l(e,r),l(e,u),l(u,D),l(e,H),l(e,V),l(V,A),l(e,y),l(e,_),l(_,T),l(e,P),l(e,q),j.m(q,null),l(e,F),l(e,U),l(U,p),l(e,N),l(e,m),l(m,W),l(e,z),l(e,B),l(B,ee),l(e,re),l(e,G),l(G,te),l(e,ie),l(e,J),l(J,Y),l(Y,se),l(e,ne)},p(w,o){var K;o&2&&n!==(n=w[4].id+"")&&I(i,n),o&2&&x!==(x=w[4].name+"")&&I(D,x),o&2&&S!==(S=w[4].email+"")&&I(A,S),o&2&&b!==(b=De(w[4].roles)+"")&&I(T,b),ae===(ae=oe(w))&&j?j.p(w,o):(j.d(1),j=ae(w),j&&(j.c(),j.m(q,null))),o&2&&g!==(g=(((K=w[4].ticket)==null?void 0:K.association)||"N/A")+"")&&I(p,g),o&2&&M!==(M=(w[4].dietaryWishes||"None")+"")&&I(W,M),o&2&&O!==(O=(w[4].needs||"None")+"")&&I(ee,O),o&2&&Q!==(Q=ke(w[4].createdAt)+"")&&I(te,Q),o&2&&X!==(X=w[4].emailVerified?"Verified":"Unverified")&&I(se,X),o&2&&le!==(le="inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(w[4].emailVerified?"bg-green-100 text-green-800":"bg-red-100 text-red-800"))&&d(Y,"class",le)},d(w){w&&c(e),j.d()}}}function qe(a){let e,t;function s(r,u){return r[2]?Ae:Ue}let n=s(a),i=n(a);return{c(){e=h("div"),t=h("div"),i.c(),this.h()},l(r){e=f(r,"DIV",{class:!0});var u=v(e);t=f(u,"DIV",{class:!0});var x=v(t);i.l(x),x.forEach(c),u.forEach(c),this.h()},h(){d(t,"class","max-w-7xl mx-auto"),d(e,"class","min-h-screen bg-bottom-backdrop p-8")},m(r,u){R(r,e,u),l(e,t),i.m(t,null)},p(r,[u]){n===(n=s(r))&&i?i.p(r,u):(i.d(1),i=n(r),i&&(i.c(),i.m(t,null)))},i:Z,o:Z,d(r){r&&c(e),i.d()}}}function ke(a){return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Ee(a){return a.substring(0,8)+"..."}function De(a){return a.map(e=>e.name).join(", ")}function Be(a,e,t){let s=!0,n=[],i="";Ve(async()=>{await r()});async function r(){t(0,s=!0),t(2,i="");try{const u=await fetch(Se("/user"),{credentials:"include"});u.ok?t(1,n=await u.json()):t(2,i=u.status===401?"Unauthorized":"Failed to load users")}catch(u){t(2,i="Network error occurred"),console.error("Error fetching users:",u)}finally{t(0,s=!1)}}return[s,n,i,r]}class Ye extends Ce{constructor(e){super(),Ie(this,e,Be,qe,Te,{})}}export{Ye as component};
