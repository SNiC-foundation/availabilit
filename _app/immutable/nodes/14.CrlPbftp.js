import{s as ve,n as le,d as h,a as x,i as H,b as o,c as d,A as ye,h as T,e as m,f as v,j as R,l as I,k as _,t as M,m as ke,v as Pe,g as J,u as me,r as Ee,o as se,p as fe,q as Te,D as _e}from"../chunks/DpgxVbgB.js";import{S as Ie,i as Ce}from"../chunks/7JM-qOu2.js";import{p as Ve}from"../chunks/dCsmGOU-.js";import{g as De}from"../chunks/Ck3ztXKh.js";import{a as Le}from"../chunks/JSKLHevw.js";function Re(l){let t,e,s=l[7]&&be(l);function a(n,w){return n[8]?Se:He}let i=a(l),r=i(l);return{c(){s&&s.c(),t=I(),r.c(),e=me()},l(n){s&&s.l(n),t=T(n),r.l(n),e=me()},m(n,w){s&&s.m(n,w),H(n,t,w),r.m(n,w),H(n,e,w)},p(n,w){n[7]?s?s.p(n,w):(s=be(n),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),i===(i=a(n))&&r?r.p(n,w):(r.d(1),r=i(n),r&&(r.c(),r.m(e.parentNode,e)))},d(n){n&&(h(t),h(e)),s&&s.d(n),r.d(n)}}}function Me(l){let t,e='<p class="text-gray-600 mb-4">The password reset link is invalid or has expired.</p> <a href="/forgotPassword" class="text-blue-600 hover:underline">Request a new password reset</a>';return{c(){t=_("div"),t.innerHTML=e,this.h()},l(s){t=m(s,"DIV",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-1wyd7g0"&&(t.innerHTML=e),this.h()},h(){d(t,"class","text-center")},m(s,a){H(s,t,a)},p:le,d(s){s&&h(t)}}}function Ne(l){let t,e='<div class="text-gray-500">Validating reset token...</div>';return{c(){t=_("div"),t.innerHTML=e,this.h()},l(s){t=m(s,"DIV",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-f1dws0"&&(t.innerHTML=e),this.h()},h(){d(t,"class","flex justify-center items-center py-8")},m(s,a){H(s,t,a)},p:le,d(s){s&&h(t)}}}function be(l){let t,e;return{c(){t=_("div"),e=M(l[7]),this.h()},l(s){t=m(s,"DIV",{class:!0});var a=v(t);e=R(a,l[7]),a.forEach(h),this.h()},h(){d(t,"class","bg-red-100 text-red-700 p-4 rounded mb-6")},m(s,a){H(s,t,a),o(t,e)},p(s,a){a&128&&x(e,s[7])},d(s){s&&h(t)}}}function He(l){let t,e,s,a="New Password *",i,r,n,w,f,u,L="Confirm New Password *",y,c,b,k,V,C,N="Password Requirements:",B,S,j,D=l[0].length>=8?"✓":"•",q,Y,Q,re,U,z=l[3]&&l[1]?"✓":"•",W,ae,X,oe,A,K=l[6]?"Resetting Password...":"Reset Password",Z,$,ne,O,ce=`<p class="text-sm text-gray-600">Remember your password? 
                            <a href="/login" class="text-blue-600 hover:underline">Sign in here</a></p>`,ie,he,P=l[0]&&ge(l),E=l[1]&&we(l);return{c(){t=_("form"),e=_("div"),s=_("label"),s.textContent=a,i=I(),r=_("input"),n=I(),P&&P.c(),w=I(),f=_("div"),u=_("label"),u.textContent=L,y=I(),c=_("input"),b=I(),E&&E.c(),k=I(),V=_("div"),C=_("h4"),C.textContent=N,B=I(),S=_("ul"),j=_("li"),q=M(D),Y=M(" At least 8 characters"),re=I(),U=_("li"),W=M(z),ae=M(" Passwords must match"),oe=I(),A=_("button"),Z=M(K),ne=I(),O=_("div"),O.innerHTML=ce,this.h()},l(p){t=m(p,"FORM",{class:!0});var g=v(t);e=m(g,"DIV",{});var F=v(e);s=m(F,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(s)!=="svelte-1wbd28e"&&(s.textContent=a),i=T(F),r=m(F,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),n=T(F),P&&P.l(F),F.forEach(h),w=T(g),f=m(g,"DIV",{});var G=v(f);u=m(G,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),J(u)!=="svelte-yptj2s"&&(u.textContent=L),y=T(G),c=m(G,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),b=T(G),E&&E.l(G),G.forEach(h),k=T(g),V=m(g,"DIV",{class:!0});var ee=v(V);C=m(ee,"H4",{class:!0,"data-svelte-h":!0}),J(C)!=="svelte-1phosp0"&&(C.textContent=N),B=T(ee),S=m(ee,"UL",{class:!0});var te=v(S);j=m(te,"LI",{class:!0});var de=v(j);q=R(de,D),Y=R(de," At least 8 characters"),de.forEach(h),re=T(te),U=m(te,"LI",{class:!0});var ue=v(U);W=R(ue,z),ae=R(ue," Passwords must match"),ue.forEach(h),te.forEach(h),ee.forEach(h),oe=T(g),A=m(g,"BUTTON",{type:!0,class:!0});var pe=v(A);Z=R(pe,K),pe.forEach(h),ne=T(g),O=m(g,"DIV",{class:!0,"data-svelte-h":!0}),J(O)!=="svelte-oao96l"&&(O.innerHTML=ce),g.forEach(h),this.h()},h(){d(s,"for","newPassword"),d(s,"class","block text-sm font-medium text-gray-700"),d(r,"type","password"),d(r,"id","newPassword"),r.required=!0,r.disabled=l[6],d(r,"class","mt-1 w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),d(r,"placeholder","Enter your new password"),d(u,"for","confirmPassword"),d(u,"class","block text-sm font-medium text-gray-700"),d(c,"type","password"),d(c,"id","confirmPassword"),c.required=!0,c.disabled=l[6],d(c,"class","mt-1 w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"),d(c,"placeholder","Confirm your new password"),d(C,"class","text-sm font-medium text-gray-700 mb-2"),d(j,"class",Q=l[0].length>=8?"text-green-600":"text-gray-600"),d(U,"class",X=l[3]&&l[1]?"text-green-600":"text-gray-600"),d(S,"class","text-xs text-gray-600 space-y-1"),d(V,"class","bg-gray-50 border border-gray-200 rounded-lg p-3"),d(A,"type","submit"),d(A,"class","w-full mt-6 p-3 bg-blue-whale text-white rounded-md hover:bg-blue-whale-dark disabled:opacity-50 disabled:cursor-not-allowed"),A.disabled=$=l[6]||!l[12],d(O,"class","text-center mt-4"),d(t,"class","space-y-4")},m(p,g){H(p,t,g),o(t,e),o(e,s),o(e,i),o(e,r),se(r,l[0]),o(e,n),P&&P.m(e,null),o(t,w),o(t,f),o(f,u),o(f,y),o(f,c),se(c,l[1]),o(f,b),E&&E.m(f,null),o(t,k),o(t,V),o(V,C),o(V,B),o(V,S),o(S,j),o(j,q),o(j,Y),o(S,re),o(S,U),o(U,W),o(U,ae),o(t,oe),o(t,A),o(A,Z),o(t,ne),o(t,O),ie||(he=[fe(r,"input",l[14]),fe(c,"input",l[15]),fe(t,"submit",Te(l[13]))],ie=!0)},p(p,g){g&64&&(r.disabled=p[6]),g&1&&r.value!==p[0]&&se(r,p[0]),p[0]?P?P.p(p,g):(P=ge(p),P.c(),P.m(e,null)):P&&(P.d(1),P=null),g&64&&(c.disabled=p[6]),g&2&&c.value!==p[1]&&se(c,p[1]),p[1]?E?E.p(p,g):(E=we(p),E.c(),E.m(f,null)):E&&(E.d(1),E=null),g&1&&D!==(D=p[0].length>=8?"✓":"•")&&x(q,D),g&1&&Q!==(Q=p[0].length>=8?"text-green-600":"text-gray-600")&&d(j,"class",Q),g&10&&z!==(z=p[3]&&p[1]?"✓":"•")&&x(W,z),g&10&&X!==(X=p[3]&&p[1]?"text-green-600":"text-gray-600")&&d(U,"class",X),g&64&&K!==(K=p[6]?"Resetting Password...":"Reset Password")&&x(Z,K),g&4160&&$!==($=p[6]||!p[12])&&(A.disabled=$)},d(p){p&&h(t),P&&P.d(),E&&E.d(),ie=!1,Ee(he)}}}function Se(l){let t,e;return{c(){t=_("div"),e=M(l[8]),this.h()},l(s){t=m(s,"DIV",{class:!0});var a=v(t);e=R(a,l[8]),a.forEach(h),this.h()},h(){d(t,"class","bg-green-100 text-green-700 p-4 rounded mb-6")},m(s,a){H(s,t,a),o(t,e)},p(s,a){a&256&&x(e,s[8])},d(s){s&&h(t)}}}function ge(l){let t,e,s,a,i,r,n,w;return{c(){t=_("div"),e=_("div"),s=_("div"),i=I(),r=_("p"),n=M(l[11]),this.h()},l(f){t=m(f,"DIV",{class:!0});var u=v(t);e=m(u,"DIV",{class:!0});var L=v(e);s=m(L,"DIV",{class:!0,style:!0}),v(s).forEach(h),L.forEach(h),i=T(u),r=m(u,"P",{class:!0});var y=v(r);n=R(y,l[11]),y.forEach(h),u.forEach(h),this.h()},h(){d(s,"class",a="h-2 rounded-full transition-all duration-300 "+l[10]),_e(s,"width",Math.min(l[0].length/12*100,100)+"%"),d(e,"class","w-full bg-gray-200 rounded-full h-2"),d(r,"class",w="text-xs mt-1 "+(l[4]?"text-green-600":"text-red-600")),d(t,"class","mt-2")},m(f,u){H(f,t,u),o(t,e),o(e,s),o(t,i),o(t,r),o(r,n)},p(f,u){u&1024&&a!==(a="h-2 rounded-full transition-all duration-300 "+f[10])&&d(s,"class",a),u&1&&_e(s,"width",Math.min(f[0].length/12*100,100)+"%"),u&2048&&x(n,f[11]),u&16&&w!==(w="text-xs mt-1 "+(f[4]?"text-green-600":"text-red-600"))&&d(r,"class",w)},d(f){f&&h(t)}}}function we(l){let t,e=l[3]?"✓ Passwords match":"✗ Passwords do not match",s,a;return{c(){t=_("p"),s=M(e),this.h()},l(i){t=m(i,"P",{class:!0});var r=v(t);s=R(r,e),r.forEach(h),this.h()},h(){d(t,"class",a="text-xs mt-1 "+(l[3]?"text-green-600":"text-red-600"))},m(i,r){H(i,t,r),o(t,s)},p(i,r){r&8&&e!==(e=i[3]?"✓ Passwords match":"✗ Passwords do not match")&&x(s,e),r&8&&a!==(a="text-xs mt-1 "+(i[3]?"text-green-600":"text-red-600"))&&d(t,"class",a)},d(i){i&&h(t)}}}function je(l){let t,e,s,a,i,r=l[5]?"for":"",n,w,f,u;function L(b,k){return b[9]?Ne:b[2]?Re:Me}let y=L(l),c=y(l);return{c(){t=I(),e=_("div"),s=_("div"),a=_("h1"),i=M("Reset password "),n=M(r),w=I(),f=M(l[5]),u=I(),c.c(),this.h()},l(b){ye("svelte-1u0qgjk",document.head).forEach(h),t=T(b),e=m(b,"DIV",{class:!0});var V=v(e);s=m(V,"DIV",{class:!0});var C=v(s);a=m(C,"H1",{class:!0});var N=v(a);i=R(N,"Reset password "),n=R(N,r),w=T(N),f=R(N,l[5]),N.forEach(h),u=T(C),c.l(C),C.forEach(h),V.forEach(h),this.h()},h(){document.title="Reset Password - Availabilit",d(a,"class","text-2xl font-bold text-blue-whale mb-6"),d(s,"class","p-6 w-full max-w-md rounded-lg bg-white shadow-md"),d(e,"class","min-h-screen bg-bottom-backdrop p-8 flex flex-col items-center justify-center")},m(b,k){H(b,t,k),H(b,e,k),o(e,s),o(s,a),o(a,i),o(a,n),o(a,w),o(a,f),o(s,u),c.m(s,null)},p(b,[k]){k&32&&r!==(r=b[5]?"for":"")&&x(n,r),k&32&&x(f,b[5]),y===(y=L(b))&&c?c.p(b,k):(c.d(1),c=y(b),c&&(c.c(),c.m(s,null)))},i:le,o:le,d(b){b&&(h(t),h(e)),c.d()}}}function qe(l,t,e){let s,a;ke(l,Ve,D=>e(17,a=D));let i="",r="",n="",w="",f=!1,u="",L="",y=!1,c=!0,b=!0,k=!0;Pe(async()=>{const D=a.url.searchParams.get("token");D?(n=D,await V()):e(9,c=!1),e(5,w=a.url.searchParams.get("email")??"")});async function V(){e(9,c=!0);try{n&&n.length>10?e(2,y=!0):(e(7,u="Invalid reset token format"),e(2,y=!1))}catch{e(7,u="Failed to validate token"),e(2,y=!1)}finally{e(9,c=!1)}}async function C(){if(e(6,f=!0),e(7,u=""),e(8,L=""),!b){e(7,u="Passwords do not match"),e(6,f=!1);return}if(!k){e(7,u="Password must be at least 8 characters long"),e(6,f=!1);return}if(!n){e(7,u="No reset token available"),e(6,f=!1);return}const D={token:n,newPassword:i};try{const q=await fetch(Le("/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(D)});if(q.ok)e(8,L="Password reset successful! You can now log in with your new password."),e(0,i=""),e(1,r=""),setTimeout(()=>{De("/login")},3e3);else{const Y=await q.json();e(7,u=Y.message||"Failed to reset password. The token may be expired or invalid.")}}catch(q){e(7,u="Network error occurred"),console.error(q)}finally{e(6,f=!1)}}let N="bg-gray-200",B="Enter a password";function S(){i=this.value,e(0,i)}function j(){r=this.value,e(1,r)}return l.$$.update=()=>{l.$$.dirty&3&&e(3,b=i==r),l.$$.dirty&1&&e(4,k=i.length>=8),l.$$.dirty&31&&e(12,s=b&&k&&i&&r&&y),l.$$.dirty&1&&e(10,N=i?i.length<8?"bg-red-200":i.length<12?"bg-yellow-200":"bg-green-200":"bg-gray-200"),l.$$.dirty&1&&e(11,B=i?i.length<8?"Too short (minimum 8 characters)":i.length<12?"Good":"Strong":"Enter a password")},[i,r,y,b,k,w,f,u,L,c,N,B,s,C,S,j]}class Fe extends Ie{constructor(t){super(),Ce(this,t,qe,je,ve,{})}}export{Fe as component};
