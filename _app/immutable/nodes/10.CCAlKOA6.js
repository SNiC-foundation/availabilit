import{s as Ne,n as te,d,a as K,i as D,b as u,p as ve,c as m,e as b,f as p,j as L,h as T,k as v,t as M,l as V,m as we,B as Qe,g as ce,u as ue,v as We,w as Xe}from"../chunks/DUYTDFI5.js";import{S as xe,i as Pe,d as Ee,t as Q,a as G,g as ge,c as ke,m as De,b as Se,e as Ie}from"../chunks/z4FfSzan.js";import{e as Te}from"../chunks/fXUx-Agj.js";import{a as Ve}from"../chunks/BF9jo3u2.js";import{g as Ce}from"../chunks/Cw7KkdVI.js";import{b as Oe,c as Ye,a as $e}from"../chunks/ghvnP3zL.js";import{H as et}from"../chunks/C2P6MsPl.js";function Me(n){let e,t='<i class="fa-solid fa-pencil text-picton-blue"></i>',s,l;return{c(){e=v("button"),e.innerHTML=t,this.h()},l(i){e=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-sjzna3"&&(e.innerHTML=t),this.h()},h(){m(e,"class","rounded-lg bg-blue-whale shadow shadow-black shadow-sm w-8 h-8")},m(i,a){D(i,e,a),s||(l=ve(e,"click",n[12]),s=!0)},p:te,d(i){i&&d(e),s=!1,l()}}}function tt(n){let e;return{c(){e=v("i"),this.h()},l(t){e=b(t,"I",{class:!0}),p(e).forEach(d),this.h()},h(){m(e,"class","fa-solid fa-expand text-blue-whale")},m(t,s){D(t,e,s)},d(t){t&&d(e)}}}function st(n){let e;return{c(){e=v("i"),this.h()},l(t){e=b(t,"I",{class:!0}),p(e).forEach(d),this.h()},h(){m(e,"class","fa-solid fa-times text-blue-whale")},m(t,s){D(t,e,s)},d(t){t&&d(e)}}}function it(n){let e,t,s,l,i,a,c=n[0].subscribe.maxParticipants+"",r;return{c(){e=v("div"),t=v("i"),s=V(),l=v("span"),i=M(n[1]),a=M(" / "),r=M(c),this.h()},l(f){e=b(f,"DIV",{class:!0});var o=p(e);t=b(o,"I",{class:!0}),p(t).forEach(d),s=T(o),l=b(o,"SPAN",{});var h=p(l);i=L(h,n[1]),a=L(h," / "),r=L(h,c),h.forEach(d),o.forEach(d),this.h()},h(){m(t,"class","fa-solid fa-users"),m(e,"class","flex gap-2 items-center text-gray-600 flex-shrink-0 whitespace-nowrap")},m(f,o){D(f,e,o),u(e,t),u(e,s),u(e,l),u(l,i),u(l,a),u(l,r)},p(f,o){o&2&&K(i,f[1]),o&1&&c!==(c=f[0].subscribe.maxParticipants+"")&&K(r,c)},d(f){f&&d(e)}}}function lt(n){let e,t,s;function l(c,r){return r&1&&(e=null),r&1&&(t=null),c[11]&&c[6]?ct:(e==null&&(e=new Date(c[0].subscribe.subscriptionListOpenDate)>new Date),e?nt:(t==null&&(t=new Date(c[0].subscribe.subscriptionListCloseDate)<new Date),t?at:rt))}let i=l(n,-1),a=i(n);return{c(){a.c(),s=ue()},l(c){a.l(c),s=ue()},m(c,r){a.m(c,r),D(c,s,r)},p(c,r){i===(i=l(c,r))&&a?a.p(c,r):(a.d(1),a=i(c),a&&(a.c(),a.m(s.parentNode,s)))},d(c){c&&d(s),a.d(c)}}}function rt(n){let e,t="Log in to subscribe to an activity";return{c(){e=v("span"),e.textContent=t,this.h()},l(s){e=b(s,"SPAN",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-1vs1ovh"&&(e.textContent=t),this.h()},h(){m(e,"class","text-xs")},m(s,l){D(s,e,l)},p:te,d(s){s&&d(e)}}}function at(n){let e,t,s=new Date(n[0].subscribe.subscriptionListCloseDate)+"",l;return{c(){e=v("span"),t=M("Activity subscription closed on "),l=M(s),this.h()},l(i){e=b(i,"SPAN",{class:!0});var a=p(e);t=L(a,"Activity subscription closed on "),l=L(a,s),a.forEach(d),this.h()},h(){m(e,"class","text-xs")},m(i,a){D(i,e,a),u(e,t),u(e,l)},p(i,a){a&1&&s!==(s=new Date(i[0].subscribe.subscriptionListCloseDate)+"")&&K(l,s)},d(i){i&&d(e)}}}function nt(n){let e,t,s=new Date(n[0].subscribe.subscriptionListOpenDate)+"",l;return{c(){e=v("span"),t=M("Activity subscription opens on "),l=M(s),this.h()},l(i){e=b(i,"SPAN",{class:!0});var a=p(e);t=L(a,"Activity subscription opens on "),l=L(a,s),a.forEach(d),this.h()},h(){m(e,"class","text-xs")},m(i,a){D(i,e,a),u(e,t),u(e,l)},p(i,a){a&1&&s!==(s=new Date(i[0].subscribe.subscriptionListOpenDate)+"")&&K(l,s)},d(i){i&&d(e)}}}function ct(n){let e,t,s,l,i,a,c;function r(h,_){return h[2]||h[4]?ft:ot}let f=r(n),o=f(n);return{c(){e=v("button"),t=v("i"),l=V(),o.c(),this.h()},l(h){e=b(h,"BUTTON",{class:!0});var _=p(e);t=b(_,"I",{class:!0}),p(t).forEach(d),l=T(_),o.l(_),_.forEach(d),this.h()},h(){m(t,"class",s="fa-solid "+(n[2]||n[4]?"fa-check":"fa-plus")),m(e,"class",i="inline-flex shrink-0 cursor-pointer disabled:cursor-not-allowed disabled:bg-gray-700 items-center gap-2 px-4 py-2 rounded-md text-sm font-medium text-white "+(n[2]||n[4]?"bg-green-600":"bg-blue-whale hover:bg-blue-whale-dark")+" transition-colors duration-200"),e.disabled=!n[11]},m(h,_){D(h,e,_),u(e,t),u(e,l),o.m(e,null),a||(c=ve(e,"click",n[9]),a=!0)},p(h,_){_&20&&s!==(s="fa-solid "+(h[2]||h[4]?"fa-check":"fa-plus"))&&m(t,"class",s),f!==(f=r(h))&&(o.d(1),o=f(h),o&&(o.c(),o.m(e,null))),_&20&&i!==(i="inline-flex shrink-0 cursor-pointer disabled:cursor-not-allowed disabled:bg-gray-700 items-center gap-2 px-4 py-2 rounded-md text-sm font-medium text-white "+(h[2]||h[4]?"bg-green-600":"bg-blue-whale hover:bg-blue-whale-dark")+" transition-colors duration-200")&&m(e,"class",i)},d(h){h&&d(e),o.d(),a=!1,c()}}}function ot(n){let e;return{c(){e=M("Join Activity")},l(t){e=L(t,"Join Activity")},m(t,s){D(t,e,s)},d(t){t&&d(e)}}}function ft(n){let e;return{c(){e=M("Joined activity")},l(t){e=L(t,"Joined activity")},m(t,s){D(t,e,s)},d(t){t&&d(e)}}}function ut(n){let e,t,s,l=n[0].name+"",i,a,c,r,f,o,h,_,E,g,N,C=n[0].location+"",y,U,k,j,z,B,R=n[0].speakers.map(je)+"",Y,Z,q,J,ne,se=n[8](n[0].description)+"",W,ie,$,le,X,H=n[5]&&Me(n);function oe(w,I){return w[3]?st:tt}let F=oe(n),A=F(n),S=n[10]&&it(n),x=n[10]&&lt(n);return{c(){e=v("div"),t=v("div"),s=v("h3"),i=M(l),a=V(),c=v("div"),H&&H.c(),r=V(),f=v("button"),A.c(),o=V(),h=v("div"),_=v("div"),E=v("i"),g=V(),N=v("span"),y=M(C),U=V(),k=v("div"),j=v("i"),z=V(),B=v("span"),Y=M(R),Z=V(),S&&S.c(),q=V(),J=v("div"),ne=v("div"),W=M(se),ie=V(),$=v("div"),x&&x.c(),this.h()},l(w){e=b(w,"DIV",{class:!0});var I=p(e);t=b(I,"DIV",{class:!0});var fe=p(t);s=b(fe,"H3",{class:!0});var P=p(s);i=L(P,l),P.forEach(d),a=T(fe),c=b(fe,"DIV",{class:!0});var O=p(c);H&&H.l(O),r=T(O),f=b(O,"BUTTON",{class:!0});var ee=p(f);A.l(ee),ee.forEach(d),O.forEach(d),fe.forEach(d),o=T(I),h=b(I,"DIV",{class:!0});var re=p(h);_=b(re,"DIV",{class:!0});var ae=p(_);E=b(ae,"I",{class:!0}),p(E).forEach(d),g=T(ae),N=b(ae,"SPAN",{class:!0});var de=p(N);y=L(de,C),de.forEach(d),ae.forEach(d),U=T(re),k=b(re,"DIV",{class:!0});var me=p(k);j=b(me,"I",{class:!0}),p(j).forEach(d),z=T(me),B=b(me,"SPAN",{class:!0});var _e=p(B);Y=L(_e,R),_e.forEach(d),me.forEach(d),Z=T(re),S&&S.l(re),re.forEach(d),I.forEach(d),q=T(w),J=b(w,"DIV",{class:!0});var he=p(J);ne=b(he,"DIV",{class:!0});var ye=p(ne);W=L(ye,se),ye.forEach(d),ie=T(he),$=b(he,"DIV",{class:!0});var pe=p($);x&&x.l(pe),pe.forEach(d),he.forEach(d),this.h()},h(){m(s,"class","text-xl font-semibold text-blue-whale leading-tight flex-1 mr-4 h-20"),m(f,"class","rounded-lg bg-gray-100 duration-100 transition-all hover:bg-gray-50 hover:shadow-md w-8 h-8"),m(c,"class","h-full flex gap-2 items-center"),m(t,"class","flex items-start justify-between mb-3"),m(E,"class","fa-solid fa-location-dot"),m(N,"class","text-sm font-medium"),m(_,"class","flex gap-2 items-center text-gray-600 whitespace-nowrap"),m(j,"class","fa-solid fa-user"),m(B,"class","text-sm font-medium"),m(k,"class","flex gap-2 items-center text-gray-600 whitespace-nowrap"),m(h,"class","flex flex-wrap gap-3"),m(e,"class","p-6 pb-2"),m(ne,"class","text-gray-700 text-sm leading-relaxed mb-4"),m($,"class","flex items-center justify-between py-2 border-t border-gray-100"),m(J,"class","px-6")},m(w,I){D(w,e,I),u(e,t),u(t,s),u(s,i),u(t,a),u(t,c),H&&H.m(c,null),u(c,r),u(c,f),A.m(f,null),u(e,o),u(e,h),u(h,_),u(_,E),u(_,g),u(_,N),u(N,y),u(h,U),u(h,k),u(k,j),u(k,z),u(k,B),u(B,Y),u(h,Z),S&&S.m(h,null),D(w,q,I),D(w,J,I),u(J,ne),u(ne,W),u(J,ie),u(J,$),x&&x.m($,null),le||(X=ve(f,"click",n[13]),le=!0)},p(w,[I]){I&1&&l!==(l=w[0].name+"")&&K(i,l),w[5]?H?H.p(w,I):(H=Me(w),H.c(),H.m(c,r)):H&&(H.d(1),H=null),F!==(F=oe(w))&&(A.d(1),A=F(w),A&&(A.c(),A.m(f,null))),I&1&&C!==(C=w[0].location+"")&&K(y,C),I&1&&R!==(R=w[0].speakers.map(je)+"")&&K(Y,R),w[10]&&S.p(w,I),I&1&&se!==(se=w[8](w[0].description)+"")&&K(W,se),w[10]&&x.p(w,I)},i:te,o:te,d(w){w&&(d(e),d(q),d(J)),H&&H.d(),A.d(),S&&S.d(),x&&x.d(),le=!1,X()}}}const je=n=>n.name;function dt(n,e,t){let s,l;we(n,Oe,y=>t(5,s=y)),we(n,Ye,y=>t(6,l=y));let{activity:i}=e,{nrOfSubscribers:a}=e,{isSubscribed:c}=e,{close:r=!1}=e;const f=Qe();function o(y,U=150){return y.length<=U||r?y:y.substring(0,U).trim()+"..."}const h=async()=>{try{(await fetch(Ve(`/activity/${i.id}/subscribe`),{method:"POST",credentials:"include"})).ok?(t(4,_=!0),f("activitySubscribed",{activity:i,activityId:i.id})):console.error("Failed to subscribe to activity")}catch(y){console.error("Error subscribing to activity:",y)}};let _=!1;const E=i.subscribe&&i.subscribe.maxParticipants&&i.subscribe.subscribers,g=E&&!isNaN(Date.parse(i.subscribe.subscriptionListOpenDate))&&!isNaN(Date.parse(i.subscribe.subscriptionListCloseDate))&&new Date(i.subscribe.subscriptionListOpenDate)<=new Date&&new Date(i.subscribe.subscriptionListCloseDate)>new Date,N=()=>Ce(`/program/activity/edit?id=${i.id}`),C=()=>f(r?"close":"expand");return n.$$set=y=>{"activity"in y&&t(0,i=y.activity),"nrOfSubscribers"in y&&t(1,a=y.nrOfSubscribers),"isSubscribed"in y&&t(2,c=y.isSubscribed),"close"in y&&t(3,r=y.close)},[i,a,c,r,_,s,l,f,o,h,E,g,N,C]}class Ze extends xe{constructor(e){super(),Pe(this,e,dt,ut,Ne,{activity:0,nrOfSubscribers:1,isSubscribed:2,close:3})}}function Be(n){let e,t,s,l,i,a,c,r;return i=new Ze({props:{activity:n[0],nrOfSubscribers:n[1],isSubscribed:n[2],close:!0}}),i.$on("activitySubscribed",n[4]),i.$on("close",n[7]),{c(){e=v("button"),t=V(),s=v("div"),l=v("div"),Ie(i.$$.fragment),this.h()},l(f){e=b(f,"BUTTON",{class:!0}),p(e).forEach(d),t=T(f),s=b(f,"DIV",{class:!0});var o=p(s);l=b(o,"DIV",{class:!0});var h=p(l);Se(i.$$.fragment,h),h.forEach(d),o.forEach(d),this.h()},h(){m(e,"class","fixed top-0 left-0 w-full h-full bg-black/60 cursor-default backdrop-blur-lg"),m(l,"class","w-full md:max-w-3xl bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden"),m(s,"class","fixed w-screen h-screen left-0 top-0 flex items-center justify-center")},m(f,o){D(f,e,o),D(f,t,o),D(f,s,o),u(s,l),De(i,l,null),a=!0,c||(r=ve(e,"click",n[6]),c=!0)},p(f,o){const h={};o&1&&(h.activity=f[0]),o&2&&(h.nrOfSubscribers=f[1]),o&4&&(h.isSubscribed=f[2]),i.$set(h)},i(f){a||(G(i.$$.fragment,f),a=!0)},o(f){Q(i.$$.fragment,f),a=!1},d(f){f&&(d(e),d(t),d(s)),Ee(i),c=!1,r()}}}function ht(n){let e,t,s,l,i;t=new Ze({props:{activity:n[0],nrOfSubscribers:n[1],isSubscribed:n[2]}}),t.$on("activitySubscribed",n[4]),t.$on("expand",n[5]);let a=n[3]&&Be(n);return{c(){e=v("div"),Ie(t.$$.fragment),s=V(),a&&a.c(),l=ue(),this.h()},l(c){e=b(c,"DIV",{class:!0});var r=p(e);Se(t.$$.fragment,r),r.forEach(d),s=T(c),a&&a.l(c),l=ue(),this.h()},h(){m(e,"class","bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 border border-gray-200 w-full md:max-w-sm shrink-0 svelte-18tlhkx")},m(c,r){D(c,e,r),De(t,e,null),D(c,s,r),a&&a.m(c,r),D(c,l,r),i=!0},p(c,[r]){const f={};r&1&&(f.activity=c[0]),r&2&&(f.nrOfSubscribers=c[1]),r&4&&(f.isSubscribed=c[2]),t.$set(f),c[3]?a?(a.p(c,r),r&8&&G(a,1)):(a=Be(c),a.c(),G(a,1),a.m(l.parentNode,l)):a&&(ge(),Q(a,1,1,()=>{a=null}),ke())},i(c){i||(G(t.$$.fragment,c),G(a),i=!0)},o(c){Q(t.$$.fragment,c),Q(a),i=!1},d(c){c&&(d(e),d(s),d(l)),Ee(t),a&&a.d(c)}}}function bt(n,e,t){let{activity:s}=e,{nrOfSubscribers:l}=e,{isSubscribed:i}=e,a=!1;const c=Qe();function r(_){c("activitySubscribed",_.detail)}const f=()=>t(3,a=!0),o=()=>t(3,a=!1),h=()=>t(3,a=!1);return n.$$set=_=>{"activity"in _&&t(0,s=_.activity),"nrOfSubscribers"in _&&t(1,l=_.nrOfSubscribers),"isSubscribed"in _&&t(2,i=_.isSubscribed)},[s,l,i,a,r,f,o,h]}class vt extends xe{constructor(e){super(),Pe(this,e,bt,ht,Ne,{activity:0,nrOfSubscribers:1,isSubscribed:2})}}function He(n,e,t){const s=n.slice();return s[16]=e[t],s}function mt(n){let e,t,s,l,i=n[0].name+"",a,c,r,f=Ae(n[0].beginTime,n[0].endTime)+"",o,h,_,E,g,N="Start:",C,y,U=be(n[0].beginTime)+"",k,j,z,B,R="End:",Y,Z,q=be(n[0].endTime)+"",J,ne,se,W,ie,$,le,X,H,oe,F=n[6]&&Ue(n),A=n[4]&&Fe(n);return{c(){e=v("button"),t=v("div"),s=v("div"),l=v("h3"),a=M(i),c=V(),r=v("span"),o=M(f),h=V(),_=v("div"),E=v("div"),g=v("span"),g.textContent=N,C=V(),y=v("span"),k=M(U),j=V(),z=v("div"),B=v("span"),B.textContent=R,Y=V(),Z=v("span"),J=M(q),ne=V(),F&&F.c(),se=V(),W=v("i"),$=V(),A&&A.c(),le=ue(),this.h()},l(S){e=b(S,"BUTTON",{class:!0});var x=p(e);t=b(x,"DIV",{class:!0});var w=p(t);s=b(w,"DIV",{class:!0});var I=p(s);l=b(I,"H3",{class:!0});var fe=p(l);a=L(fe,i),fe.forEach(d),c=T(I),r=b(I,"SPAN",{class:!0});var P=p(r);o=L(P,f),P.forEach(d),I.forEach(d),h=T(w),_=b(w,"DIV",{class:!0});var O=p(_);E=b(O,"DIV",{class:!0});var ee=p(E);g=b(ee,"SPAN",{class:!0,"data-svelte-h":!0}),ce(g)!=="svelte-11t2hy0"&&(g.textContent=N),C=T(ee),y=b(ee,"SPAN",{});var re=p(y);k=L(re,U),re.forEach(d),ee.forEach(d),j=T(O),z=b(O,"DIV",{class:!0});var ae=p(z);B=b(ae,"SPAN",{class:!0,"data-svelte-h":!0}),ce(B)!=="svelte-i1trgj"&&(B.textContent=R),Y=T(ae),Z=b(ae,"SPAN",{});var de=p(Z);J=L(de,q),de.forEach(d),ae.forEach(d),O.forEach(d),w.forEach(d),ne=T(x),F&&F.l(x),se=T(x),W=b(x,"I",{class:!0}),p(W).forEach(d),x.forEach(d),$=T(S),A&&A.l(S),le=ue(),this.h()},h(){m(l,"class","text-lg font-medium text-gray-900"),m(r,"class","inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800"),m(s,"class","flex items-center space-x-4"),m(g,"class","font-medium"),m(E,"class","flex items-center space-x-1"),m(B,"class","font-medium"),m(z,"class","flex items-center space-x-1"),m(_,"class","flex items-center space-x-6 text-sm text-gray-600"),m(t,"class","mr-auto"),m(W,"class",ie=`fa-solid fa-chevron-${n[4]?"up":"down"}`),m(e,"class","p-6 w-full flex rounded-t-xl items-center gap-8 bg-gray-100 hover:bg-gray-200 transition-colors")},m(S,x){D(S,e,x),u(e,t),u(t,s),u(s,l),u(l,a),u(s,c),u(s,r),u(r,o),u(t,h),u(t,_),u(_,E),u(E,g),u(E,C),u(E,y),u(y,k),u(_,j),u(_,z),u(z,B),u(z,Y),u(z,Z),u(Z,J),u(e,ne),F&&F.m(e,null),u(e,se),u(e,W),D(S,$,x),A&&A.m(S,x),D(S,le,x),X=!0,H||(oe=ve(e,"click",n[13]),H=!0)},p(S,x){(!X||x&1)&&i!==(i=S[0].name+"")&&K(a,i),(!X||x&1)&&f!==(f=Ae(S[0].beginTime,S[0].endTime)+"")&&K(o,f),(!X||x&1)&&U!==(U=be(S[0].beginTime)+"")&&K(k,U),(!X||x&1)&&q!==(q=be(S[0].endTime)+"")&&K(J,q),S[6]?F?F.p(S,x):(F=Ue(S),F.c(),F.m(e,se)):F&&(F.d(1),F=null),(!X||x&16&&ie!==(ie=`fa-solid fa-chevron-${S[4]?"up":"down"}`))&&m(W,"class",ie),S[4]?A?(A.p(S,x),x&16&&G(A,1)):(A=Fe(S),A.c(),G(A,1),A.m(le.parentNode,le)):A&&(ge(),Q(A,1,1,()=>{A=null}),ke())},i(S){X||(G(A),X=!0)},o(S){Q(A),X=!1},d(S){S&&(d(e),d($),d(le)),F&&F.d(),A&&A.d(S),H=!1,oe()}}}function _t(n){var fe;let e,t,s,l,i,a=n[0].name+"",c,r,f,o=(((fe=n[1])==null?void 0:fe[0].activity.name)??"")+"",h,_,E,g=Ae(n[0].beginTime,n[0].endTime)+"",N,C,y,U,k,j="Start:",z,B,R=be(n[0].beginTime)+"",Y,Z,q,J,ne="End:",se,W,ie=be(n[0].endTime)+"",$,le,X,H,oe,F,A,S,x,w=n[7]&&qe(n),I=n[4]&&Ge(n);return{c(){e=v("button"),t=v("div"),s=v("div"),l=v("h3"),i=v("b"),c=M(a),r=M(":"),f=V(),h=M(o),_=V(),E=v("span"),N=M(g),C=V(),y=v("div"),U=v("div"),k=v("span"),k.textContent=j,z=V(),B=v("span"),Y=M(R),Z=V(),q=v("div"),J=v("span"),J.textContent=ne,se=V(),W=v("span"),$=M(ie),le=V(),w&&w.c(),X=V(),H=v("i"),F=V(),I&&I.c(),A=ue(),this.h()},l(P){e=b(P,"BUTTON",{class:!0});var O=p(e);t=b(O,"DIV",{class:!0});var ee=p(t);s=b(ee,"DIV",{class:!0});var re=p(s);l=b(re,"H3",{class:!0});var ae=p(l);i=b(ae,"B",{});var de=p(i);c=L(de,a),r=L(de,":"),de.forEach(d),f=T(ae),h=L(ae,o),ae.forEach(d),_=T(re),E=b(re,"SPAN",{class:!0});var me=p(E);N=L(me,g),me.forEach(d),re.forEach(d),C=T(ee),y=b(ee,"DIV",{class:!0});var _e=p(y);U=b(_e,"DIV",{class:!0});var he=p(U);k=b(he,"SPAN",{class:!0,"data-svelte-h":!0}),ce(k)!=="svelte-11t2hy0"&&(k.textContent=j),z=T(he),B=b(he,"SPAN",{});var ye=p(B);Y=L(ye,R),ye.forEach(d),he.forEach(d),Z=T(_e),q=b(_e,"DIV",{class:!0});var pe=p(q);J=b(pe,"SPAN",{class:!0,"data-svelte-h":!0}),ce(J)!=="svelte-i1trgj"&&(J.textContent=ne),se=T(pe),W=b(pe,"SPAN",{});var Le=p(W);$=L(Le,ie),Le.forEach(d),pe.forEach(d),_e.forEach(d),ee.forEach(d),le=T(O),w&&w.l(O),X=T(O),H=b(O,"I",{class:!0}),p(H).forEach(d),O.forEach(d),F=T(P),I&&I.l(P),A=ue(),this.h()},h(){m(l,"class","text-lg font-medium text-gray-900"),m(E,"class","inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800"),m(s,"class","flex items-center space-x-4"),m(k,"class","font-medium"),m(U,"class","flex items-center space-x-1"),m(J,"class","font-medium"),m(q,"class","flex items-center space-x-1"),m(y,"class","flex items-center space-x-6 text-sm text-gray-600"),m(t,"class","mr-auto"),m(H,"class",oe=`fa-solid fa-chevron-${n[4]?"up":"down"}`),m(e,"class","py-4 px-6 w-full flex rounded-t-xl items-center gap-8 bg-gray-100 hover:bg-gray-200 transition-colors")},m(P,O){D(P,e,O),u(e,t),u(t,s),u(s,l),u(l,i),u(i,c),u(i,r),u(l,f),u(l,h),u(s,_),u(s,E),u(E,N),u(t,C),u(t,y),u(y,U),u(U,k),u(U,z),u(U,B),u(B,Y),u(y,Z),u(y,q),u(q,J),u(q,se),u(q,W),u(W,$),u(e,le),w&&w.m(e,null),u(e,X),u(e,H),D(P,F,O),I&&I.m(P,O),D(P,A,O),S||(x=ve(e,"click",n[12]),S=!0)},p(P,O){var ee;O&1&&a!==(a=P[0].name+"")&&K(c,a),O&2&&o!==(o=(((ee=P[1])==null?void 0:ee[0].activity.name)??"")+"")&&K(h,o),O&1&&g!==(g=Ae(P[0].beginTime,P[0].endTime)+"")&&K(N,g),O&1&&R!==(R=be(P[0].beginTime)+"")&&K(Y,R),O&1&&ie!==(ie=be(P[0].endTime)+"")&&K($,ie),P[7]?w?w.p(P,O):(w=qe(P),w.c(),w.m(e,X)):w&&(w.d(1),w=null),O&16&&oe!==(oe=`fa-solid fa-chevron-${P[4]?"up":"down"}`)&&m(H,"class",oe),P[4]?I?I.p(P,O):(I=Ge(P),I.c(),I.m(A.parentNode,A)):I&&(I.d(1),I=null)},i:te,o:te,d(P){P&&(d(e),d(F),d(A)),w&&w.d(),I&&I.d(P),S=!1,x()}}}function Ue(n){let e,t,s,l,i,a=n[6].name+"",c,r,f,o,h,_,E=n[6].location+"",g;return{c(){e=v("div"),t=v("div"),s=v("i"),l=V(),i=v("span"),c=M(a),r=V(),f=v("div"),o=v("i"),h=V(),_=v("span"),g=M(E),this.h()},l(N){e=b(N,"DIV",{class:!0});var C=p(e);t=b(C,"DIV",{class:!0});var y=p(t);s=b(y,"I",{class:!0}),p(s).forEach(d),l=T(y),i=b(y,"SPAN",{class:!0});var U=p(i);c=L(U,a),U.forEach(d),y.forEach(d),r=T(C),f=b(C,"DIV",{class:!0});var k=p(f);o=b(k,"I",{class:!0}),p(o).forEach(d),h=T(k),_=b(k,"SPAN",{class:!0});var j=p(_);g=L(j,E),j.forEach(d),k.forEach(d),C.forEach(d),this.h()},h(){m(s,"class","fa-solid fa-person-chalkboard"),m(i,"class","max-w-48 overflow-hidden whitespace-nowrap text-ellipsis"),m(t,"class","flex gap-1 items-center"),m(o,"class","fa-solid fa-location-dot"),m(_,"class","max-w-32 overflow-hidden whitespace-nowrap text-ellipsis"),m(f,"class","flex gap-1 items-center"),m(e,"class","bg-blue-whale px-4 py-2 rounded-full items-center text-white flex gap-2")},m(N,C){D(N,e,C),u(e,t),u(t,s),u(t,l),u(t,i),u(i,c),u(e,r),u(e,f),u(f,o),u(f,h),u(f,_),u(_,g)},p(N,C){C&64&&a!==(a=N[6].name+"")&&K(c,a),C&64&&E!==(E=N[6].location+"")&&K(g,E)},d(N){N&&d(e)}}}function Fe(n){let e,t,s,l=Te(n[5]),i=[];for(let r=0;r<l.length;r+=1)i[r]=ze(He(n,l,r));const a=r=>Q(i[r],1,1,()=>{i[r]=null});let c=n[2]&&Je(n);return{c(){e=v("div");for(let r=0;r<i.length;r+=1)i[r].c();t=V(),c&&c.c(),this.h()},l(r){e=b(r,"DIV",{class:!0});var f=p(e);for(let o=0;o<i.length;o+=1)i[o].l(f);t=T(f),c&&c.l(f),f.forEach(d),this.h()},h(){m(e,"class","flex gap-4 flex-col md:flex-row items-stretch bg-gray-300 p-4 rounded-b-xl overflow-auto")},m(r,f){D(r,e,f);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null);u(e,t),c&&c.m(e,null),s=!0},p(r,f){if(f&808){l=Te(r[5]);let o;for(o=0;o<l.length;o+=1){const h=He(r,l,o);i[o]?(i[o].p(h,f),G(i[o],1)):(i[o]=ze(h),i[o].c(),G(i[o],1),i[o].m(e,t))}for(ge(),o=l.length;o<i.length;o+=1)a(o);ke()}r[2]?c?c.p(r,f):(c=Je(r),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(r){if(!s){for(let f=0;f<l.length;f+=1)G(i[f]);s=!0}},o(r){i=i.filter(Boolean);for(let f=0;f<i.length;f+=1)Q(i[f]);s=!1},d(r){r&&d(e),Xe(i,r),c&&c.d()}}}function ze(n){let e,t;return e=new vt({props:{activity:n[16].activity,nrOfSubscribers:n[16].nrOfSubscribers,isSubscribed:n[8](n[3],n[16].activity.id)}}),e.$on("activitySubscribed",n[9]),{c(){Ie(e.$$.fragment)},l(s){Se(e.$$.fragment,s)},m(s,l){De(e,s,l),t=!0},p(s,l){const i={};l&32&&(i.activity=s[16].activity),l&32&&(i.nrOfSubscribers=s[16].nrOfSubscribers),l&40&&(i.isSubscribed=s[8](s[3],s[16].activity.id)),e.$set(i)},i(s){t||(G(e.$$.fragment,s),t=!0)},o(s){Q(e.$$.fragment,s),t=!1},d(s){Ee(e,s)}}}function Je(n){let e,t,s="+",l,i;return{c(){e=v("div"),t=v("button"),t.textContent=s,this.h()},l(a){e=b(a,"DIV",{class:!0});var c=p(e);t=b(c,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(t)!=="svelte-1cav9my"&&(t.textContent=s),c.forEach(d),this.h()},h(){m(t,"class","size-16 bg-blue-whale text-white text-5xl rounded-full ml-2"),m(e,"class","flex items-center")},m(a,c){D(a,e,c),u(e,t),l||(i=ve(t,"click",n[14]),l=!0)},p:te,d(a){a&&d(e),l=!1,i()}}}function qe(n){let e,t='<i class="fa-solid fa-pencil text-picton-blue"></i>',s,l;return{c(){e=v("button"),e.innerHTML=t,this.h()},l(i){e=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-1bvd5dk"&&(e.innerHTML=t),this.h()},h(){m(e,"class","rounded-lg bg-blue-whale shadow shadow-black shadow-sm w-8 h-8")},m(i,a){D(i,e,a),s||(l=ve(e,"click",n[11]),s=!0)},p:te,d(i){i&&d(e),s=!1,l()}}}function Ge(n){let e,t=n[1][0].activity.description+"",s,l,i,a,c,r='<span class="text-xs">This is a keynote, you are automatically subscribed to this activity</span>';return{c(){e=v("div"),s=M(t),l=V(),i=v("br"),a=V(),c=v("div"),c.innerHTML=r,this.h()},l(f){e=b(f,"DIV",{class:!0});var o=p(e);s=L(o,t),l=T(o),i=b(o,"BR",{}),a=T(o),c=b(o,"DIV",{class:!0,"data-svelte-h":!0}),ce(c)!=="svelte-mgeikw"&&(c.innerHTML=r),o.forEach(d),this.h()},h(){m(c,"class","pt-2 mt-2 border-t"),m(e,"class","flex gap-2 flex-col items-stretch bg-gray-100 py-2 px-6 rounded-b-xl")},m(f,o){D(f,e,o),u(e,s),u(e,l),u(e,i),u(e,a),u(e,c)},p(f,o){o&2&&t!==(t=f[1][0].activity.description+"")&&K(s,t)},d(f){f&&d(e)}}}function pt(n){let e,t,s,l;const i=[_t,mt],a=[];function c(r,f){return r[10]?0:1}return t=c(n),s=a[t]=i[t](n),{c(){e=v("div"),s.c(),this.h()},l(r){e=b(r,"DIV",{class:!0});var f=p(e);s.l(f),f.forEach(d),this.h()},h(){m(e,"class","flex flex-col shadow-md shadow-black/35 rounded-xl overflow-hidden")},m(r,f){D(r,e,f),a[t].m(e,null),l=!0},p(r,[f]){s.p(r,f)},i(r){l||(G(s),l=!0)},o(r){Q(s),l=!1},d(r){r&&d(e),a[t].d()}}}function be(n){return new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}function Ae(n,e){const t=new Date(n),l=new Date(e).getTime()-t.getTime(),i=Math.round(l/(1e3*60));if(i<60)return`${i} min`;{const a=Math.floor(i/60),c=i%60;return c>0?`${a}h ${c}m`:`${a}h`}}function gt(n,e,t){let s;we(n,Oe,k=>t(7,s=k));let{part:l}=e,{activities:i}=e,{admin:a}=e,c=!0,r,f=[];async function o(){try{const k=await fetch(Ve("/profile"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});k.ok&&t(3,r=await k.json())}catch(k){console.error(k)}}const h=(k,j)=>{var z;return((z=k==null?void 0:k.subscriptions)==null?void 0:z.length)&&k.subscriptions.some(B=>B.activity.id===j)};let _;function E(k){const{activity:j}=k.detail;t(4,c=!1),t(6,_=j),o()}We(()=>{o()});const g=i.some(k=>k.activity.speakers.some(j=>j.type==="keynote")),N=()=>Ce(`/program/activity/edit?id=${i[0].activity.id}`),C=()=>t(4,c=!c),y=()=>t(4,c=!c),U=()=>Ce(`/program/activity/create?programPartId=${l.id}`);return n.$$set=k=>{"part"in k&&t(0,l=k.part),"activities"in k&&t(1,i=k.activities),"admin"in k&&t(2,a=k.admin)},n.$$.update=()=>{var k;n.$$.dirty&2&&t(5,f=i?[...i].sort((j,z)=>{var Y,Z,q,J;const B=((Z=(Y=j==null?void 0:j.activity)==null?void 0:Y.subscribe)==null?void 0:Z.maxParticipants)??0;return(((J=(q=z==null?void 0:z.activity)==null?void 0:q.subscribe)==null?void 0:J.maxParticipants)??0)-B}):[]),n.$$.dirty&10&&t(6,_=r&&r.subscriptions&&i?((k=i.find(j=>r.subscriptions.some(z=>{var B,R;return((B=z.activity)==null?void 0:B.id)===((R=j.activity)==null?void 0:R.id)})))==null?void 0:k.activity)??void 0:void 0)},[l,i,a,r,c,f,_,s,h,E,g,N,C,y,U]}class kt extends xe{constructor(e){super(),Pe(this,e,gt,pt,Ne,{part:0,activities:1,admin:2})}}function Ke(n,e,t){const s=n.slice();return s[11]=e[t],s}function yt(n){let e,t;return{c(){e=v("div"),t=M(n[5]),this.h()},l(s){e=b(s,"DIV",{class:!0});var l=p(e);t=L(l,n[5]),l.forEach(d),this.h()},h(){m(e,"class","bg-red-100 text-red-700 p-4 rounded mt-12 text-center")},m(s,l){D(s,e,l),u(e,t)},p(s,l){l&32&&K(t,s[5])},i:te,o:te,d(s){s&&d(e)}}}function wt(n){let e,t,s,l;const i=[St,Dt,Et],a=[];function c(r,f){return r[4]?0:r[2].length===0?1:2}return e=c(n),t=a[e]=i[e](n),{c(){t.c(),s=ue()},l(r){t.l(r),s=ue()},m(r,f){a[e].m(r,f),D(r,s,f),l=!0},p(r,f){let o=e;e=c(r),e===o?a[e].p(r,f):(ge(),Q(a[o],1,1,()=>{a[o]=null}),ke(),t=a[e],t?t.p(r,f):(t=a[e]=i[e](r),t.c()),G(t,1),t.m(s.parentNode,s))},i(r){l||(G(t),l=!0)},o(r){Q(t),l=!1},d(r){r&&d(s),a[e].d(r)}}}function Et(n){let e,t,s=Te(n[2]),l=[];for(let a=0;a<s.length;a+=1)l[a]=Re(Ke(n,s,a));const i=a=>Q(l[a],1,1,()=>{l[a]=null});return{c(){e=v("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=b(a,"DIV",{class:!0});var c=p(e);for(let r=0;r<l.length;r+=1)l[r].l(c);c.forEach(d),this.h()},h(){m(e,"class","space-y-8 p-8")},m(a,c){D(a,e,c);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null);t=!0},p(a,c){if(c&76){s=Te(a[2]);let r;for(r=0;r<s.length;r+=1){const f=Ke(a,s,r);l[r]?(l[r].p(f,c),G(l[r],1)):(l[r]=Re(f),l[r].c(),G(l[r],1),l[r].m(e,null))}for(ge(),r=s.length;r<l.length;r+=1)i(r);ke()}},i(a){if(!t){for(let c=0;c<s.length;c+=1)G(l[c]);t=!0}},o(a){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)Q(l[c]);t=!1},d(a){a&&d(e),Xe(l,a)}}}function Dt(n){let e,t='<div class="text-gray-500 text-lg">No program parts scheduled yet</div> <p class="text-gray-400 mt-2">Check back later for updates</p>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-calpt5"&&(e.innerHTML=t),this.h()},h(){m(e,"class","text-center py-12")},m(s,l){D(s,e,l)},p:te,i:te,o:te,d(s){s&&d(e)}}}function St(n){let e,t,s,l,i,a="Loading program...",c,r;function f(_,E){if(_[0])return Tt;if(_[1])return It}let o=f(n),h=o&&o(n);return{c(){e=v("div"),t=v("div"),s=v("div"),l=V(),i=v("div"),i.textContent=a,c=V(),r=v("div"),h&&h.c(),this.h()},l(_){e=b(_,"DIV",{class:!0});var E=p(e);t=b(E,"DIV",{class:!0});var g=p(t);s=b(g,"DIV",{class:!0}),p(s).forEach(d),l=T(g),i=b(g,"DIV",{class:!0,"data-svelte-h":!0}),ce(i)!=="svelte-hb50jb"&&(i.textContent=a),c=T(g),r=b(g,"DIV",{class:!0});var N=p(r);h&&h.l(N),N.forEach(d),g.forEach(d),E.forEach(d),this.h()},h(){m(s,"class","animate-spin rounded-full h-12 w-12 border-b-2 border-blue-whale mx-auto mb-4"),m(i,"class","text-gray-500 text-lg"),m(r,"class","text-gray-400 text-sm mt-2"),m(t,"class","text-center"),m(e,"class","flex justify-center items-center py-16")},m(_,E){D(_,e,E),u(e,t),u(t,s),u(t,l),u(t,i),u(t,c),u(t,r),h&&h.m(r,null)},p(_,E){o!==(o=f(_))&&(h&&h.d(1),h=o&&o(_),h&&(h.c(),h.m(r,null)))},i:te,o:te,d(_){_&&d(e),h&&h.d()}}}function Re(n){let e,t;function s(...l){return n[7](n[11],...l)}return e=new kt({props:{part:n[11],activities:n[3].filter(s),admin:n[6]}}),{c(){Ie(e.$$.fragment)},l(l){Se(e.$$.fragment,l)},m(l,i){De(e,l,i),t=!0},p(l,i){n=l;const a={};i&4&&(a.part=n[11]),i&12&&(a.activities=n[3].filter(s)),i&64&&(a.admin=n[6]),e.$set(a)},i(l){t||(G(e.$$.fragment,l),t=!0)},o(l){Q(e.$$.fragment,l),t=!1},d(l){Ee(e,l)}}}function It(n){let e;return{c(){e=M("Loading activities...")},l(t){e=L(t,"Loading activities...")},m(t,s){D(t,e,s)},d(t){t&&d(e)}}}function Tt(n){let e;return{c(){e=M("Loading program parts...")},l(t){e=L(t,"Loading program parts...")},m(t,s){D(t,e,s)},d(t){t&&d(e)}}}function Vt(n){let e,t,s,l,i,a;e=new et({props:{title:"Program"}});const c=[wt,yt],r=[];function f(o,h){return o[5]?1:0}return l=f(n),i=r[l]=c[l](n),{c(){Ie(e.$$.fragment),t=V(),s=v("div"),i.c(),this.h()},l(o){Se(e.$$.fragment,o),t=T(o),s=b(o,"DIV",{id:!0,class:!0});var h=p(s);i.l(h),h.forEach(d),this.h()},h(){m(s,"id","program_section"),m(s,"class","container flex-col text-blue-whale gap-4 text-center md:text-left")},m(o,h){De(e,o,h),D(o,t,h),D(o,s,h),r[l].m(s,null),a=!0},p(o,[h]){let _=l;l=f(o),l===_?r[l].p(o,h):(ge(),Q(r[_],1,1,()=>{r[_]=null}),ke(),i=r[l],i?i.p(o,h):(i=r[l]=c[l](o),i.c()),G(i,1),i.m(s,null))},i(o){a||(G(e.$$.fragment,o),G(i),a=!0)},o(o){Q(e.$$.fragment,o),Q(i),a=!1},d(o){o&&(d(t),d(s)),Ee(e,o),r[l].d()}}}function At(n,e,t){let s,l;we(n,Ye,g=>t(8,s=g)),we(n,Oe,g=>t(6,l=g));let i=[],a=[],c=!0,r="",f=!0,o=!0;We(async()=>{s||await $e.init(),await h(),await _()});async function h(){t(0,f=!0),t(5,r="");try{const g=await fetch(Ve("/programpart"));g.ok?t(2,i=await g.json()):(t(5,r=g.status===401?"Unauthorized":"Failed to load program"),console.error("Failed to fetch program parts:",g.status))}catch(g){t(5,r="Network error occurred"),console.error("Error fetching program parts:",g)}finally{t(0,f=!1)}}async function _(){t(1,o=!0),t(5,r="");try{const g=await fetch(Ve("/activity"));g.ok?t(3,a=await g.json()):(t(5,r=g.status===401?"Unauthorized":"Failed to load activities"),console.error("Failed to fetch activities:",g.status))}catch(g){t(5,r="Network error occurred"),console.error("Error fetching activities:",g)}finally{t(1,o=!1)}}const E=(g,N)=>{var C,y;return((y=(C=N==null?void 0:N.activity)==null?void 0:C.programPart)==null?void 0:y.id)===g.id};return n.$$.update=()=>{n.$$.dirty&3&&t(4,c=f||o)},[f,o,i,a,c,r,l,E]}class jt extends xe{constructor(e){super(),Pe(this,e,At,Vt,Ne,{})}}export{jt as component};
