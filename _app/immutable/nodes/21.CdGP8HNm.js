import{s as ue,n as K,d as u,i as S,c as w,A as de,h as x,e as g,f as y,l as V,k as C,m as ee,v as he,E as _e,r as pe,o as te,b as h,p as le,g as q,a as B,j as L,t as z,w as me,u as se}from"../chunks/DpgxVbgB.js";import{e as ne}from"../chunks/DW0hWwPi.js";import{S as ve,i as be}from"../chunks/7JM-qOu2.js";import{a as ke}from"../chunks/JSKLHevw.js";import{c as ge,d as Ce}from"../chunks/2Lxiq0HD.js";function ie(r,e,t){const l=r.slice();return l[14]=e[t],l}function we(r){let e,t="Unauthorized";return{c(){e=C("div"),e.textContent=t,this.h()},l(l){e=g(l,"DIV",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-hz8uf6"&&(e.textContent=t),this.h()},h(){w(e,"class","bg-red-100 text-red-700 p-4 rounded mt-12 text-center mx-auto")},m(l,s){S(l,e,s)},p:K,d(l){l&&u(e)}}}function Ee(r){let e,t,l="Participant code",s,i,n,f,k,p,a,m="Scanned participant",A,D,N,v=r[2]&&ae(),b=r[3]&&oe(r),c=r[0]!=null&&re(r);return{c(){e=C("div"),t=C("h1"),t.textContent=l,s=V(),i=C("input"),n=V(),v&&v.c(),f=V(),b&&b.c(),k=V(),p=C("div"),a=C("h1"),a.textContent=m,A=V(),c&&c.c(),this.h()},l(o){e=g(o,"DIV",{class:!0});var d=y(e);t=g(d,"H1",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-1nkxeb0"&&(t.textContent=l),s=x(d),i=g(d,"INPUT",{class:!0,placeholder:!0}),n=x(d),v&&v.l(d),f=x(d),b&&b.l(d),d.forEach(u),k=x(o),p=g(o,"DIV",{class:!0});var j=y(p);a=g(j,"H1",{class:!0,"data-svelte-h":!0}),q(a)!=="svelte-1hsp9xd"&&(a.textContent=m),A=x(j),c&&c.l(j),j.forEach(u),this.h()},h(){w(t,"class","font-bold text-2xl"),w(i,"class","border rounded-xl border-blue-whale w-full p-2"),w(i,"placeholder","Scan code here and press Enter"),i.disabled=r[2],w(e,"class","p-6 w-full rounded-lg bg-white shadow-md"),w(a,"class","font-bold text-2xl"),w(p,"class","p-6 w-full rounded-lg bg-white shadow-md")},m(o,d){S(o,e,d),h(e,t),h(e,s),h(e,i),r[10](i),te(i,r[1]),h(e,n),v&&v.m(e,null),h(e,f),b&&b.m(e,null),S(o,k,d),S(o,p,d),h(p,a),h(p,A),c&&c.m(p,null),D||(N=[le(i,"input",r[11]),le(i,"keydown",r[8])],D=!0)},p(o,d){d&4&&(i.disabled=o[2]),d&2&&i.value!==o[1]&&te(i,o[1]),o[2]?v||(v=ae(),v.c(),v.m(e,f)):v&&(v.d(1),v=null),o[3]?b?b.p(o,d):(b=oe(o),b.c(),b.m(e,null)):b&&(b.d(1),b=null),o[0]!=null?c?c.p(o,d):(c=re(o),c.c(),c.m(p,null)):c&&(c.d(1),c=null)},d(o){o&&(u(e),u(k),u(p)),r[10](null),v&&v.d(),b&&b.d(),c&&c.d(),D=!1,pe(N)}}}function ae(r){let e,t="Scanningâ€¦";return{c(){e=C("div"),e.textContent=t,this.h()},l(l){e=g(l,"DIV",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-ct3xmy"&&(e.textContent=t),this.h()},h(){w(e,"class","text-sm text-blue-whale mt-2")},m(l,s){S(l,e,s)},d(l){l&&u(e)}}}function oe(r){let e,t;return{c(){e=C("div"),t=z(r[3]),this.h()},l(l){e=g(l,"DIV",{class:!0});var s=y(e);t=L(s,r[3]),s.forEach(u),this.h()},h(){w(e,"class","text-sm text-red-600 mt-2")},m(l,s){S(l,e,s),h(e,t)},p(l,s){s&8&&B(t,l[3])},d(l){l&&u(e)}}}function re(r){var M,W,Z,J,Q,X;let e,t,l,s="Scans",i,n,f=(((W=(M=r[0])==null?void 0:M.scans)==null?void 0:W.length)??0)+"",k,p,a,m,A="Ticket printed",D,N,v=(((Q=(J=(Z=r[0])==null?void 0:Z.user)==null?void 0:J.subscriptions)==null?void 0:Q.length)??0)===3?"Yes":"No",b,c,o,d,j="Association",G,T,H=((X=r[0])==null?void 0:X.association)+"",F,I=r[0].user&&ce(r);return{c(){I&&I.c(),e=V(),t=C("div"),l=C("b"),l.textContent=s,i=V(),n=C("span"),k=z(f),p=V(),a=C("div"),m=C("b"),m.textContent=A,D=V(),N=C("span"),b=z(v),c=V(),o=C("div"),d=C("b"),d.textContent=j,G=V(),T=C("span"),F=z(H),this.h()},l(_){I&&I.l(_),e=x(_),t=g(_,"DIV",{class:!0});var E=y(t);l=g(E,"B",{class:!0,"data-svelte-h":!0}),q(l)!=="svelte-1sekp4m"&&(l.textContent=s),i=x(E),n=g(E,"SPAN",{});var O=y(n);k=L(O,f),O.forEach(u),E.forEach(u),p=x(_),a=g(_,"DIV",{class:!0});var P=y(a);m=g(P,"B",{class:!0,"data-svelte-h":!0}),q(m)!=="svelte-1vdltge"&&(m.textContent=A),D=x(P),N=g(P,"SPAN",{});var R=y(N);b=L(R,v),R.forEach(u),P.forEach(u),c=x(_),o=g(_,"DIV",{class:!0});var U=y(o);d=g(U,"B",{class:!0,"data-svelte-h":!0}),q(d)!=="svelte-lmkrov"&&(d.textContent=j),G=x(U),T=g(U,"SPAN",{});var Y=y(T);F=L(Y,H),Y.forEach(u),U.forEach(u),this.h()},h(){w(l,"class","font-medium"),w(t,"class","flex justify-between"),w(m,"class","font-medium"),w(a,"class","flex justify-between"),w(d,"class","font-medium"),w(o,"class","flex justify-between")},m(_,E){I&&I.m(_,E),S(_,e,E),S(_,t,E),h(t,l),h(t,i),h(t,n),h(n,k),S(_,p,E),S(_,a,E),h(a,m),h(a,D),h(a,N),h(N,b),S(_,c,E),S(_,o,E),h(o,d),h(o,G),h(o,T),h(T,F)},p(_,E){var O,P,R,U,Y,$;_[0].user?I?I.p(_,E):(I=ce(_),I.c(),I.m(e.parentNode,e)):I&&(I.d(1),I=null),E&1&&f!==(f=(((P=(O=_[0])==null?void 0:O.scans)==null?void 0:P.length)??0)+"")&&B(k,f),E&1&&v!==(v=(((Y=(U=(R=_[0])==null?void 0:R.user)==null?void 0:U.subscriptions)==null?void 0:Y.length)??0)===3?"Yes":"No")&&B(b,v),E&1&&H!==(H=(($=_[0])==null?void 0:$.association)+"")&&B(F,H)},d(_){_&&(u(e),u(t),u(p),u(a),u(c),u(o)),I&&I.d(_)}}}function ce(r){let e,t=ne(Object.entries(r[0].user).filter(r[12])),l=[];for(let s=0;s<t.length;s+=1)l[s]=fe(ie(r,t,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=se()},l(s){for(let i=0;i<l.length;i+=1)l[i].l(s);e=se()},m(s,i){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(s,i);S(s,e,i)},p(s,i){if(i&641){t=ne(Object.entries(s[0].user).filter(s[12]));let n;for(n=0;n<t.length;n+=1){const f=ie(s,t,n);l[n]?l[n].p(f,i):(l[n]=fe(f),l[n].c(),l[n].m(e.parentNode,e))}for(;n<l.length;n+=1)l[n].d(1);l.length=t.length}},d(s){s&&u(e),me(l,s)}}}function fe(r){let e,t,l=r[9](r[14][0])+"",s,i,n,f=r[14][1]+"",k,p;return{c(){e=C("div"),t=C("b"),s=z(l),i=V(),n=C("span"),k=z(f),p=V(),this.h()},l(a){e=g(a,"DIV",{class:!0});var m=y(e);t=g(m,"B",{class:!0});var A=y(t);s=L(A,l),A.forEach(u),i=x(m),n=g(m,"SPAN",{});var D=y(n);k=L(D,f),D.forEach(u),p=x(m),m.forEach(u),this.h()},h(){w(t,"class","font-medium"),w(e,"class","flex justify-between")},m(a,m){S(a,e,m),h(e,t),h(t,s),h(e,i),h(e,n),h(n,k),h(e,p)},p(a,m){m&1&&l!==(l=a[9](a[14][0])+"")&&B(s,l),m&1&&f!==(f=a[14][1]+"")&&B(k,f)},d(a){a&&u(e)}}}function Ie(r){let e,t;function l(n,f){return n[5]&&n[6]?Ee:we}let s=l(r),i=s(r);return{c(){e=V(),t=C("div"),i.c(),this.h()},l(n){de("svelte-1u0qgjk",document.head).forEach(u),e=x(n),t=g(n,"DIV",{class:!0});var k=y(t);i.l(k),k.forEach(u),this.h()},h(){document.title="Reset Password - Availabilit",w(t,"class","min-h-screen bg-bottom-backdrop p-8 flex flex-row items-center gap-8")},m(n,f){S(n,e,f),S(n,t,f),i.m(t,null)},p(n,[f]){s===(s=l(n))&&i?i.p(n,f):(i.d(1),i=s(n),i&&(i.c(),i.m(t,null)))},i:K,o:K,d(n){n&&(u(e),u(t)),i.d()}}}function Se(r,e,t){let l,s;ee(r,ge,c=>t(5,l=c)),ee(r,Ce,c=>t(6,s=c));let i;const n=["email","name","dietaryWishes","needs"];let f="",k=!1,p="",a=null;he(()=>{a==null||a.focus(),a&&a.select()});async function m(){const c=f.trim();if(c){t(2,k=!0),t(3,p="");try{const o=await fetch(ke(`ticket/${encodeURIComponent(c)}/scan`),{method:"GET",credentials:"include"});if(o.ok){const d=await o.json();t(0,i=d)}else{const d=await o.text();t(3,p=d||`Scan failed: ${o.status}`)}}catch(o){console.error("Scan request failed",o),t(3,p="Network error during scan")}finally{t(2,k=!1),requestAnimationFrame(()=>{a==null||a.focus(),a==null||a.select()})}}}function A(c){c.key==="Enter"&&(c.preventDefault(),m())}const D=c=>{if(!c)return"";const o=c.replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/[_-]+/g," ").trim();return o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()};function N(c){_e[c?"unshift":"push"](()=>{a=c,t(4,a)})}function v(){f=this.value,t(1,f)}return[i,f,k,p,a,l,s,n,A,D,N,v,c=>n.includes(c[0])]}class Ne extends ve{constructor(e){super(),be(this,e,Se,Ie,ue,{})}}export{Ne as component};
