import{s as Ae,n as ie,d,a as R,i as I,b as u,p as ve,c as m,e as b,f as _,j as B,h as D,k as v,t as H,l as S,m as we,B as We,g as ce,u as ue,v as Xe,w as Ye}from"../chunks/DpgxVbgB.js";import{S as Ne,i as Pe,d as Ee,t as Z,a as Q,g as ge,c as ke,m as De,b as Se,e as Ie}from"../chunks/7JM-qOu2.js";import{e as Te}from"../chunks/DW0hWwPi.js";import{a as Ve}from"../chunks/bWIU4s08.js";import{g as Ce}from"../chunks/sv-Pqv01.js";import{b as Oe,c as Ze,a as et}from"../chunks/luB3o1H-.js";import{H as tt}from"../chunks/BT7WRWO-.js";function Me(a){let e,t='<i class="fa-solid fa-pencil text-picton-blue"></i>',s,l;return{c(){e=v("button"),e.innerHTML=t,this.h()},l(i){e=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-sjzna3"&&(e.innerHTML=t),this.h()},h(){m(e,"class","rounded-lg bg-blue-whale shadow shadow-black shadow-sm w-8 h-8")},m(i,n){I(i,e,n),s||(l=ve(e,"click",a[12]),s=!0)},p:ie,d(i){i&&d(e),s=!1,l()}}}function st(a){let e;return{c(){e=v("i"),this.h()},l(t){e=b(t,"I",{class:!0}),_(e).forEach(d),this.h()},h(){m(e,"class","fa-solid fa-expand text-blue-whale")},m(t,s){I(t,e,s)},d(t){t&&d(e)}}}function it(a){let e;return{c(){e=v("i"),this.h()},l(t){e=b(t,"I",{class:!0}),_(e).forEach(d),this.h()},h(){m(e,"class","fa-solid fa-times text-blue-whale")},m(t,s){I(t,e,s)},d(t){t&&d(e)}}}function lt(a){let e,t,s,l,i,n,c=a[0].subscribe.maxParticipants+"",r;return{c(){e=v("div"),t=v("i"),s=S(),l=v("span"),i=H(a[1]),n=H(" / "),r=H(c),this.h()},l(f){e=b(f,"DIV",{class:!0});var o=_(e);t=b(o,"I",{class:!0}),_(t).forEach(d),s=D(o),l=b(o,"SPAN",{});var h=_(l);i=B(h,a[1]),n=B(h," / "),r=B(h,c),h.forEach(d),o.forEach(d),this.h()},h(){m(t,"class","fa-solid fa-users"),m(e,"class","flex gap-2 items-center text-gray-600 flex-shrink-0 whitespace-nowrap")},m(f,o){I(f,e,o),u(e,t),u(e,s),u(e,l),u(l,i),u(l,n),u(l,r)},p(f,o){o&2&&R(i,f[1]),o&1&&c!==(c=f[0].subscribe.maxParticipants+"")&&R(r,c)},d(f){f&&d(e)}}}function rt(a){let e,t,s;function l(c,r){return r&1&&(e=null),r&1&&(t=null),c[11]&&c[6]?ot:(e==null&&(e=new Date(c[0].subscribe.subscriptionListOpenDate)>new Date),e?ct:(t==null&&(t=new Date(c[0].subscribe.subscriptionListCloseDate)<new Date),t?nt:at))}let i=l(a,-1),n=i(a);return{c(){n.c(),s=ue()},l(c){n.l(c),s=ue()},m(c,r){n.m(c,r),I(c,s,r)},p(c,r){i===(i=l(c,r))&&n?n.p(c,r):(n.d(1),n=i(c),n&&(n.c(),n.m(s.parentNode,s)))},d(c){c&&d(s),n.d(c)}}}function at(a){let e,t="Log in to subscribe to an activity";return{c(){e=v("span"),e.textContent=t,this.h()},l(s){e=b(s,"SPAN",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-1vs1ovh"&&(e.textContent=t),this.h()},h(){m(e,"class","text-xs")},m(s,l){I(s,e,l)},p:ie,d(s){s&&d(e)}}}function nt(a){let e,t,s=new Date(a[0].subscribe.subscriptionListCloseDate)+"",l;return{c(){e=v("span"),t=H("Activity subscription closed on "),l=H(s),this.h()},l(i){e=b(i,"SPAN",{class:!0});var n=_(e);t=B(n,"Activity subscription closed on "),l=B(n,s),n.forEach(d),this.h()},h(){m(e,"class","text-xs")},m(i,n){I(i,e,n),u(e,t),u(e,l)},p(i,n){n&1&&s!==(s=new Date(i[0].subscribe.subscriptionListCloseDate)+"")&&R(l,s)},d(i){i&&d(e)}}}function ct(a){let e,t,s=new Date(a[0].subscribe.subscriptionListOpenDate)+"",l;return{c(){e=v("span"),t=H("Activity subscription opens on "),l=H(s),this.h()},l(i){e=b(i,"SPAN",{class:!0});var n=_(e);t=B(n,"Activity subscription opens on "),l=B(n,s),n.forEach(d),this.h()},h(){m(e,"class","text-xs")},m(i,n){I(i,e,n),u(e,t),u(e,l)},p(i,n){n&1&&s!==(s=new Date(i[0].subscribe.subscriptionListOpenDate)+"")&&R(l,s)},d(i){i&&d(e)}}}function ot(a){let e,t,s,l,i,n,c;function r(h,p){return h[2]||h[4]?ut:ft}let f=r(a),o=f(a);return{c(){e=v("button"),t=v("i"),l=S(),o.c(),this.h()},l(h){e=b(h,"BUTTON",{class:!0});var p=_(e);t=b(p,"I",{class:!0}),_(t).forEach(d),l=D(p),o.l(p),p.forEach(d),this.h()},h(){m(t,"class",s="fa-solid "+(a[2]||a[4]?"fa-check":"fa-plus")),m(e,"class",i="inline-flex shrink-0 cursor-pointer disabled:cursor-not-allowed disabled:bg-gray-700 items-center gap-2 px-4 py-2 rounded-md text-sm font-medium text-white "+(a[2]||a[4]?"bg-green-600":"bg-blue-whale hover:bg-blue-whale-dark")+" transition-colors duration-200"),e.disabled=!a[11]},m(h,p){I(h,e,p),u(e,t),u(e,l),o.m(e,null),n||(c=ve(e,"click",a[9]),n=!0)},p(h,p){p&20&&s!==(s="fa-solid "+(h[2]||h[4]?"fa-check":"fa-plus"))&&m(t,"class",s),f!==(f=r(h))&&(o.d(1),o=f(h),o&&(o.c(),o.m(e,null))),p&20&&i!==(i="inline-flex shrink-0 cursor-pointer disabled:cursor-not-allowed disabled:bg-gray-700 items-center gap-2 px-4 py-2 rounded-md text-sm font-medium text-white "+(h[2]||h[4]?"bg-green-600":"bg-blue-whale hover:bg-blue-whale-dark")+" transition-colors duration-200")&&m(e,"class",i)},d(h){h&&d(e),o.d(),n=!1,c()}}}function ft(a){let e;return{c(){e=H("Join Activity")},l(t){e=B(t,"Join Activity")},m(t,s){I(t,e,s)},d(t){t&&d(e)}}}function ut(a){let e;return{c(){e=H("Joined activity")},l(t){e=B(t,"Joined activity")},m(t,s){I(t,e,s)},d(t){t&&d(e)}}}function dt(a){let e,t,s,l=a[0].name+"",i,n,c,r,f,o,h,p,w,g,V,P=a[0].location+"",k,O,y,L,z,N,W=a[0].speakers.map(je)+"",G,M,J,U,ee,Y=a[8](a[0].description)+"",X,le,te,re,$,q=a[5]&&Me(a);function oe(E,x){return E[3]?it:st}let K=oe(a),A=K(a),T=a[11]&&lt(a),C=a[10]&&rt(a);return{c(){e=v("div"),t=v("div"),s=v("h3"),i=H(l),n=S(),c=v("div"),q&&q.c(),r=S(),f=v("button"),A.c(),o=S(),h=v("div"),p=v("div"),w=v("i"),g=S(),V=v("span"),k=H(P),O=S(),y=v("div"),L=v("i"),z=S(),N=v("span"),G=H(W),M=S(),T&&T.c(),J=S(),U=v("div"),ee=v("div"),X=H(Y),le=S(),te=v("div"),C&&C.c(),this.h()},l(E){e=b(E,"DIV",{class:!0});var x=_(e);t=b(x,"DIV",{class:!0});var fe=_(t);s=b(fe,"H3",{class:!0});var j=_(s);i=B(j,l),j.forEach(d),n=D(fe),c=b(fe,"DIV",{class:!0});var F=_(c);q&&q.l(F),r=D(F),f=b(F,"BUTTON",{class:!0});var se=_(f);A.l(se),se.forEach(d),F.forEach(d),fe.forEach(d),o=D(x),h=b(x,"DIV",{class:!0});var ae=_(h);p=b(ae,"DIV",{class:!0});var ne=_(p);w=b(ne,"I",{class:!0}),_(w).forEach(d),g=D(ne),V=b(ne,"SPAN",{class:!0});var de=_(V);k=B(de,P),de.forEach(d),ne.forEach(d),O=D(ae),y=b(ae,"DIV",{class:!0});var me=_(y);L=b(me,"I",{class:!0}),_(L).forEach(d),z=D(me),N=b(me,"SPAN",{class:!0});var pe=_(N);G=B(pe,W),pe.forEach(d),me.forEach(d),M=D(ae),T&&T.l(ae),ae.forEach(d),x.forEach(d),J=D(E),U=b(E,"DIV",{class:!0});var he=_(U);ee=b(he,"DIV",{class:!0});var ye=_(ee);X=B(ye,Y),ye.forEach(d),le=D(he),te=b(he,"DIV",{class:!0});var _e=_(te);C&&C.l(_e),_e.forEach(d),he.forEach(d),this.h()},h(){m(s,"class","text-xl font-semibold text-blue-whale leading-tight flex-1 mr-4 h-20"),m(f,"class","rounded-lg bg-gray-100 duration-100 transition-all hover:bg-gray-50 hover:shadow-md w-8 h-8"),m(c,"class","h-full flex gap-2 items-center"),m(t,"class","flex items-start justify-between mb-3"),m(w,"class","fa-solid fa-location-dot"),m(V,"class","text-sm font-medium"),m(p,"class","flex gap-2 items-center text-gray-600 whitespace-nowrap"),m(L,"class","fa-solid fa-user"),m(N,"class","text-sm font-medium"),m(y,"class","flex gap-2 items-center text-gray-600 whitespace-nowrap"),m(h,"class","flex flex-wrap gap-3"),m(e,"class","p-6 pb-2"),m(ee,"class","text-gray-700 text-sm leading-relaxed mb-4"),m(te,"class","flex items-center justify-between py-2 border-t border-gray-100"),m(U,"class","px-6")},m(E,x){I(E,e,x),u(e,t),u(t,s),u(s,i),u(t,n),u(t,c),q&&q.m(c,null),u(c,r),u(c,f),A.m(f,null),u(e,o),u(e,h),u(h,p),u(p,w),u(p,g),u(p,V),u(V,k),u(h,O),u(h,y),u(y,L),u(y,z),u(y,N),u(N,G),u(h,M),T&&T.m(h,null),I(E,J,x),I(E,U,x),u(U,ee),u(ee,X),u(U,le),u(U,te),C&&C.m(te,null),re||($=ve(f,"click",a[13]),re=!0)},p(E,[x]){x&1&&l!==(l=E[0].name+"")&&R(i,l),E[5]?q?q.p(E,x):(q=Me(E),q.c(),q.m(c,r)):q&&(q.d(1),q=null),K!==(K=oe(E))&&(A.d(1),A=K(E),A&&(A.c(),A.m(f,null))),x&1&&P!==(P=E[0].location+"")&&R(k,P),x&1&&W!==(W=E[0].speakers.map(je)+"")&&R(G,W),E[11]&&T.p(E,x),x&1&&Y!==(Y=E[8](E[0].description)+"")&&R(X,Y),E[10]&&C.p(E,x)},i:ie,o:ie,d(E){E&&(d(e),d(J),d(U)),q&&q.d(),A.d(),T&&T.d(),C&&C.d(),re=!1,$()}}}const je=a=>a.name;function ht(a,e,t){let s,l;we(a,Oe,k=>t(5,s=k)),we(a,Ze,k=>t(6,l=k));let{activity:i}=e,{nrOfSubscribers:n}=e,{isSubscribed:c}=e,{close:r=!1}=e;const f=We();function o(k,O=150){return k.length<=O||r?k:k.substring(0,O).trim()+"..."}const h=async()=>{try{(await fetch(Ve(`/activity/${i.id}/subscribe`),{method:"POST",credentials:"include"})).ok?(t(4,p=!0),f("activitySubscribed",{activity:i,activityId:i.id})):console.error("Failed to subscribe to activity")}catch(k){console.error("Error subscribing to activity:",k)}};let p=!1;const w=i.subscribe&&i.subscribe.maxParticipants&&i.subscribe.subscribers,g=w&&!isNaN(Date.parse(i.subscribe.subscriptionListOpenDate))&&!isNaN(Date.parse(i.subscribe.subscriptionListCloseDate))&&new Date(i.subscribe.subscriptionListOpenDate)<=new Date&&new Date(i.subscribe.subscriptionListCloseDate)>new Date,V=()=>Ce(`/program/activity/edit?id=${i.id}`),P=()=>f(r?"close":"expand");return a.$$set=k=>{"activity"in k&&t(0,i=k.activity),"nrOfSubscribers"in k&&t(1,n=k.nrOfSubscribers),"isSubscribed"in k&&t(2,c=k.isSubscribed),"close"in k&&t(3,r=k.close)},[i,n,c,r,p,s,l,f,o,h,w,g,V,P]}class $e extends Ne{constructor(e){super(),Pe(this,e,ht,dt,Ae,{activity:0,nrOfSubscribers:1,isSubscribed:2,close:3})}}function Be(a){let e,t,s,l,i,n,c,r;return i=new $e({props:{activity:a[0],nrOfSubscribers:a[1],isSubscribed:a[2],close:!0}}),i.$on("activitySubscribed",a[4]),i.$on("close",a[7]),{c(){e=v("button"),t=S(),s=v("div"),l=v("div"),Ie(i.$$.fragment),this.h()},l(f){e=b(f,"BUTTON",{class:!0}),_(e).forEach(d),t=D(f),s=b(f,"DIV",{class:!0});var o=_(s);l=b(o,"DIV",{class:!0});var h=_(l);Se(i.$$.fragment,h),h.forEach(d),o.forEach(d),this.h()},h(){m(e,"class","fixed top-0 left-0 w-full h-full bg-black/60 cursor-default backdrop-blur-lg"),m(l,"class","w-full md:max-w-3xl bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden"),m(s,"class","fixed w-screen h-screen left-0 top-0 flex items-center justify-center")},m(f,o){I(f,e,o),I(f,t,o),I(f,s,o),u(s,l),De(i,l,null),n=!0,c||(r=ve(e,"click",a[6]),c=!0)},p(f,o){const h={};o&1&&(h.activity=f[0]),o&2&&(h.nrOfSubscribers=f[1]),o&4&&(h.isSubscribed=f[2]),i.$set(h)},i(f){n||(Q(i.$$.fragment,f),n=!0)},o(f){Z(i.$$.fragment,f),n=!1},d(f){f&&(d(e),d(t),d(s)),Ee(i),c=!1,r()}}}function bt(a){let e,t,s,l,i;t=new $e({props:{activity:a[0],nrOfSubscribers:a[1],isSubscribed:a[2]}}),t.$on("activitySubscribed",a[4]),t.$on("expand",a[5]);let n=a[3]&&Be(a);return{c(){e=v("div"),Ie(t.$$.fragment),s=S(),n&&n.c(),l=ue(),this.h()},l(c){e=b(c,"DIV",{class:!0});var r=_(e);Se(t.$$.fragment,r),r.forEach(d),s=D(c),n&&n.l(c),l=ue(),this.h()},h(){m(e,"class","bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 border border-gray-200 w-full md:max-w-sm shrink-0 svelte-18tlhkx")},m(c,r){I(c,e,r),De(t,e,null),I(c,s,r),n&&n.m(c,r),I(c,l,r),i=!0},p(c,[r]){const f={};r&1&&(f.activity=c[0]),r&2&&(f.nrOfSubscribers=c[1]),r&4&&(f.isSubscribed=c[2]),t.$set(f),c[3]?n?(n.p(c,r),r&8&&Q(n,1)):(n=Be(c),n.c(),Q(n,1),n.m(l.parentNode,l)):n&&(ge(),Z(n,1,1,()=>{n=null}),ke())},i(c){i||(Q(t.$$.fragment,c),Q(n),i=!0)},o(c){Z(t.$$.fragment,c),Z(n),i=!1},d(c){c&&(d(e),d(s),d(l)),Ee(t),n&&n.d(c)}}}function vt(a,e,t){let{activity:s}=e,{nrOfSubscribers:l}=e,{isSubscribed:i}=e,n=!1;const c=We();function r(p){c("activitySubscribed",p.detail)}const f=()=>t(3,n=!0),o=()=>t(3,n=!1),h=()=>t(3,n=!1);return a.$$set=p=>{"activity"in p&&t(0,s=p.activity),"nrOfSubscribers"in p&&t(1,l=p.nrOfSubscribers),"isSubscribed"in p&&t(2,i=p.isSubscribed)},[s,l,i,n,r,f,o,h]}class mt extends Ne{constructor(e){super(),Pe(this,e,vt,bt,Ae,{activity:0,nrOfSubscribers:1,isSubscribed:2})}}function He(a,e,t){const s=a.slice();return s[16]=e[t],s}function pt(a){let e,t,s,l,i=a[0].name+"",n,c,r,f=xe(a[0].beginTime,a[0].endTime)+"",o,h,p,w,g,V="Start:",P,k,O=be(a[0].beginTime)+"",y,L,z,N,W="End:",G,M,J=be(a[0].endTime)+"",U,ee,Y,X,le,te,re,$,q,oe,K=a[6]&&Ue(a),A=a[4]&&Fe(a);return{c(){e=v("button"),t=v("div"),s=v("div"),l=v("h3"),n=H(i),c=S(),r=v("span"),o=H(f),h=S(),p=v("div"),w=v("div"),g=v("span"),g.textContent=V,P=S(),k=v("span"),y=H(O),L=S(),z=v("div"),N=v("span"),N.textContent=W,G=S(),M=v("span"),U=H(J),ee=S(),K&&K.c(),Y=S(),X=v("i"),te=S(),A&&A.c(),re=ue(),this.h()},l(T){e=b(T,"BUTTON",{class:!0});var C=_(e);t=b(C,"DIV",{class:!0});var E=_(t);s=b(E,"DIV",{class:!0});var x=_(s);l=b(x,"H3",{class:!0});var fe=_(l);n=B(fe,i),fe.forEach(d),c=D(x),r=b(x,"SPAN",{class:!0});var j=_(r);o=B(j,f),j.forEach(d),x.forEach(d),h=D(E),p=b(E,"DIV",{class:!0});var F=_(p);w=b(F,"DIV",{class:!0});var se=_(w);g=b(se,"SPAN",{class:!0,"data-svelte-h":!0}),ce(g)!=="svelte-11t2hy0"&&(g.textContent=V),P=D(se),k=b(se,"SPAN",{});var ae=_(k);y=B(ae,O),ae.forEach(d),se.forEach(d),L=D(F),z=b(F,"DIV",{class:!0});var ne=_(z);N=b(ne,"SPAN",{class:!0,"data-svelte-h":!0}),ce(N)!=="svelte-i1trgj"&&(N.textContent=W),G=D(ne),M=b(ne,"SPAN",{});var de=_(M);U=B(de,J),de.forEach(d),ne.forEach(d),F.forEach(d),E.forEach(d),ee=D(C),K&&K.l(C),Y=D(C),X=b(C,"I",{class:!0}),_(X).forEach(d),C.forEach(d),te=D(T),A&&A.l(T),re=ue(),this.h()},h(){m(l,"class","text-lg font-medium text-gray-900"),m(r,"class","inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800"),m(s,"class","flex items-center space-x-4"),m(g,"class","font-medium"),m(w,"class","flex items-center space-x-1"),m(N,"class","font-medium"),m(z,"class","flex items-center space-x-1"),m(p,"class","flex items-center space-x-6 text-sm text-gray-600"),m(t,"class","mr-auto"),m(X,"class",le=`fa-solid fa-chevron-${a[4]?"up":"down"}`),m(e,"class","p-6 w-full flex rounded-t-xl items-center gap-8 bg-gray-100 hover:bg-gray-200 transition-colors")},m(T,C){I(T,e,C),u(e,t),u(t,s),u(s,l),u(l,n),u(s,c),u(s,r),u(r,o),u(t,h),u(t,p),u(p,w),u(w,g),u(w,P),u(w,k),u(k,y),u(p,L),u(p,z),u(z,N),u(z,G),u(z,M),u(M,U),u(e,ee),K&&K.m(e,null),u(e,Y),u(e,X),I(T,te,C),A&&A.m(T,C),I(T,re,C),$=!0,q||(oe=ve(e,"click",a[13]),q=!0)},p(T,C){(!$||C&1)&&i!==(i=T[0].name+"")&&R(n,i),(!$||C&1)&&f!==(f=xe(T[0].beginTime,T[0].endTime)+"")&&R(o,f),(!$||C&1)&&O!==(O=be(T[0].beginTime)+"")&&R(y,O),(!$||C&1)&&J!==(J=be(T[0].endTime)+"")&&R(U,J),T[6]?K?K.p(T,C):(K=Ue(T),K.c(),K.m(e,Y)):K&&(K.d(1),K=null),(!$||C&16&&le!==(le=`fa-solid fa-chevron-${T[4]?"up":"down"}`))&&m(X,"class",le),T[4]?A?(A.p(T,C),C&16&&Q(A,1)):(A=Fe(T),A.c(),Q(A,1),A.m(re.parentNode,re)):A&&(ge(),Z(A,1,1,()=>{A=null}),ke())},i(T){$||(Q(A),$=!0)},o(T){Z(A),$=!1},d(T){T&&(d(e),d(te),d(re)),K&&K.d(),A&&A.d(T),q=!1,oe()}}}function _t(a){var fe;let e,t,s,l,i,n=a[0].name+"",c,r,f,o=(((fe=a[1])==null?void 0:fe[0].activity.name)??"")+"",h,p,w,g=xe(a[0].beginTime,a[0].endTime)+"",V,P,k,O,y,L="Start:",z,N,W=be(a[0].beginTime)+"",G,M,J,U,ee="End:",Y,X,le=be(a[0].endTime)+"",te,re,$,q,oe,K,A,T,C,E=a[7]&&qe(a),x=a[4]&&Ge(a);return{c(){e=v("button"),t=v("div"),s=v("div"),l=v("h3"),i=v("b"),c=H(n),r=H(":"),f=S(),h=H(o),p=S(),w=v("span"),V=H(g),P=S(),k=v("div"),O=v("div"),y=v("span"),y.textContent=L,z=S(),N=v("span"),G=H(W),M=S(),J=v("div"),U=v("span"),U.textContent=ee,Y=S(),X=v("span"),te=H(le),re=S(),E&&E.c(),$=S(),q=v("i"),K=S(),x&&x.c(),A=ue(),this.h()},l(j){e=b(j,"BUTTON",{class:!0});var F=_(e);t=b(F,"DIV",{class:!0});var se=_(t);s=b(se,"DIV",{class:!0});var ae=_(s);l=b(ae,"H3",{class:!0});var ne=_(l);i=b(ne,"B",{});var de=_(i);c=B(de,n),r=B(de,":"),de.forEach(d),f=D(ne),h=B(ne,o),ne.forEach(d),p=D(ae),w=b(ae,"SPAN",{class:!0});var me=_(w);V=B(me,g),me.forEach(d),ae.forEach(d),P=D(se),k=b(se,"DIV",{class:!0});var pe=_(k);O=b(pe,"DIV",{class:!0});var he=_(O);y=b(he,"SPAN",{class:!0,"data-svelte-h":!0}),ce(y)!=="svelte-11t2hy0"&&(y.textContent=L),z=D(he),N=b(he,"SPAN",{});var ye=_(N);G=B(ye,W),ye.forEach(d),he.forEach(d),M=D(pe),J=b(pe,"DIV",{class:!0});var _e=_(J);U=b(_e,"SPAN",{class:!0,"data-svelte-h":!0}),ce(U)!=="svelte-i1trgj"&&(U.textContent=ee),Y=D(_e),X=b(_e,"SPAN",{});var Le=_(X);te=B(Le,le),Le.forEach(d),_e.forEach(d),pe.forEach(d),se.forEach(d),re=D(F),E&&E.l(F),$=D(F),q=b(F,"I",{class:!0}),_(q).forEach(d),F.forEach(d),K=D(j),x&&x.l(j),A=ue(),this.h()},h(){m(l,"class","text-lg font-medium text-gray-900"),m(w,"class","inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800"),m(s,"class","flex items-center space-x-4"),m(y,"class","font-medium"),m(O,"class","flex items-center space-x-1"),m(U,"class","font-medium"),m(J,"class","flex items-center space-x-1"),m(k,"class","flex items-center space-x-6 text-sm text-gray-600"),m(t,"class","mr-auto"),m(q,"class",oe=`fa-solid fa-chevron-${a[4]?"up":"down"}`),m(e,"class","py-4 px-6 w-full flex rounded-t-xl items-center gap-8 bg-gray-100 hover:bg-gray-200 transition-colors")},m(j,F){I(j,e,F),u(e,t),u(t,s),u(s,l),u(l,i),u(i,c),u(i,r),u(l,f),u(l,h),u(s,p),u(s,w),u(w,V),u(t,P),u(t,k),u(k,O),u(O,y),u(O,z),u(O,N),u(N,G),u(k,M),u(k,J),u(J,U),u(J,Y),u(J,X),u(X,te),u(e,re),E&&E.m(e,null),u(e,$),u(e,q),I(j,K,F),x&&x.m(j,F),I(j,A,F),T||(C=ve(e,"click",a[12]),T=!0)},p(j,F){var se;F&1&&n!==(n=j[0].name+"")&&R(c,n),F&2&&o!==(o=(((se=j[1])==null?void 0:se[0].activity.name)??"")+"")&&R(h,o),F&1&&g!==(g=xe(j[0].beginTime,j[0].endTime)+"")&&R(V,g),F&1&&W!==(W=be(j[0].beginTime)+"")&&R(G,W),F&1&&le!==(le=be(j[0].endTime)+"")&&R(te,le),j[7]?E?E.p(j,F):(E=qe(j),E.c(),E.m(e,$)):E&&(E.d(1),E=null),F&16&&oe!==(oe=`fa-solid fa-chevron-${j[4]?"up":"down"}`)&&m(q,"class",oe),j[4]?x?x.p(j,F):(x=Ge(j),x.c(),x.m(A.parentNode,A)):x&&(x.d(1),x=null)},i:ie,o:ie,d(j){j&&(d(e),d(K),d(A)),E&&E.d(),x&&x.d(j),T=!1,C()}}}function Ue(a){let e,t,s,l,i,n=a[6].name+"",c,r,f,o,h,p,w=a[6].location+"",g;return{c(){e=v("div"),t=v("div"),s=v("i"),l=S(),i=v("span"),c=H(n),r=S(),f=v("div"),o=v("i"),h=S(),p=v("span"),g=H(w),this.h()},l(V){e=b(V,"DIV",{class:!0});var P=_(e);t=b(P,"DIV",{class:!0});var k=_(t);s=b(k,"I",{class:!0}),_(s).forEach(d),l=D(k),i=b(k,"SPAN",{class:!0});var O=_(i);c=B(O,n),O.forEach(d),k.forEach(d),r=D(P),f=b(P,"DIV",{class:!0});var y=_(f);o=b(y,"I",{class:!0}),_(o).forEach(d),h=D(y),p=b(y,"SPAN",{class:!0});var L=_(p);g=B(L,w),L.forEach(d),y.forEach(d),P.forEach(d),this.h()},h(){m(s,"class","fa-solid fa-person-chalkboard"),m(i,"class","max-w-48 overflow-hidden whitespace-nowrap text-ellipsis"),m(t,"class","flex gap-1 items-center"),m(o,"class","fa-solid fa-location-dot"),m(p,"class","max-w-32 overflow-hidden whitespace-nowrap text-ellipsis"),m(f,"class","flex gap-1 items-center"),m(e,"class","bg-blue-whale px-4 py-2 rounded-full items-center text-white flex gap-2")},m(V,P){I(V,e,P),u(e,t),u(t,s),u(t,l),u(t,i),u(i,c),u(e,r),u(e,f),u(f,o),u(f,h),u(f,p),u(p,g)},p(V,P){P&64&&n!==(n=V[6].name+"")&&R(c,n),P&64&&w!==(w=V[6].location+"")&&R(g,w)},d(V){V&&d(e)}}}function Fe(a){let e,t,s,l=Te(a[5]),i=[];for(let r=0;r<l.length;r+=1)i[r]=ze(He(a,l,r));const n=r=>Z(i[r],1,1,()=>{i[r]=null});let c=a[2]&&Je(a);return{c(){e=v("div");for(let r=0;r<i.length;r+=1)i[r].c();t=S(),c&&c.c(),this.h()},l(r){e=b(r,"DIV",{class:!0});var f=_(e);for(let o=0;o<i.length;o+=1)i[o].l(f);t=D(f),c&&c.l(f),f.forEach(d),this.h()},h(){m(e,"class","flex gap-4 flex-col md:flex-row items-stretch bg-gray-300 p-4 rounded-b-xl overflow-auto")},m(r,f){I(r,e,f);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null);u(e,t),c&&c.m(e,null),s=!0},p(r,f){if(f&808){l=Te(r[5]);let o;for(o=0;o<l.length;o+=1){const h=He(r,l,o);i[o]?(i[o].p(h,f),Q(i[o],1)):(i[o]=ze(h),i[o].c(),Q(i[o],1),i[o].m(e,t))}for(ge(),o=l.length;o<i.length;o+=1)n(o);ke()}r[2]?c?c.p(r,f):(c=Je(r),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(r){if(!s){for(let f=0;f<l.length;f+=1)Q(i[f]);s=!0}},o(r){i=i.filter(Boolean);for(let f=0;f<i.length;f+=1)Z(i[f]);s=!1},d(r){r&&d(e),Ye(i,r),c&&c.d()}}}function ze(a){let e,t;return e=new mt({props:{activity:a[16].activity,nrOfSubscribers:a[16].nrOfSubscribers,isSubscribed:a[8](a[3],a[16].activity.id)}}),e.$on("activitySubscribed",a[9]),{c(){Ie(e.$$.fragment)},l(s){Se(e.$$.fragment,s)},m(s,l){De(e,s,l),t=!0},p(s,l){const i={};l&32&&(i.activity=s[16].activity),l&32&&(i.nrOfSubscribers=s[16].nrOfSubscribers),l&40&&(i.isSubscribed=s[8](s[3],s[16].activity.id)),e.$set(i)},i(s){t||(Q(e.$$.fragment,s),t=!0)},o(s){Z(e.$$.fragment,s),t=!1},d(s){Ee(e,s)}}}function Je(a){let e,t,s="+",l,i;return{c(){e=v("div"),t=v("button"),t.textContent=s,this.h()},l(n){e=b(n,"DIV",{class:!0});var c=_(e);t=b(c,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(t)!=="svelte-1cav9my"&&(t.textContent=s),c.forEach(d),this.h()},h(){m(t,"class","size-16 bg-blue-whale text-white text-5xl rounded-full ml-2"),m(e,"class","flex items-center")},m(n,c){I(n,e,c),u(e,t),l||(i=ve(t,"click",a[14]),l=!0)},p:ie,d(n){n&&d(e),l=!1,i()}}}function qe(a){let e,t='<i class="fa-solid fa-pencil text-picton-blue"></i>',s,l;return{c(){e=v("button"),e.innerHTML=t,this.h()},l(i){e=b(i,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-1bvd5dk"&&(e.innerHTML=t),this.h()},h(){m(e,"class","rounded-lg bg-blue-whale shadow shadow-black shadow-sm w-8 h-8")},m(i,n){I(i,e,n),s||(l=ve(e,"click",a[11]),s=!0)},p:ie,d(i){i&&d(e),s=!1,l()}}}function Ge(a){let e,t,s,l,i,n,c=a[1][0].activity.location+"",r,f,o,h,p,w,g=a[1][0].activity.speakers.map(Ke)+"",V,P,k=a[1][0].activity.description+"",O,y,L,z,N,W='<span class="text-xs">This is a keynote, you are automatically subscribed to this activity</span>';return{c(){e=v("div"),t=v("div"),s=v("div"),l=v("i"),i=S(),n=v("span"),r=H(c),f=S(),o=v("div"),h=v("i"),p=S(),w=v("span"),V=H(g),P=S(),O=H(k),y=S(),L=v("br"),z=S(),N=v("div"),N.innerHTML=W,this.h()},l(G){e=b(G,"DIV",{class:!0});var M=_(e);t=b(M,"DIV",{class:!0});var J=_(t);s=b(J,"DIV",{class:!0});var U=_(s);l=b(U,"I",{class:!0}),_(l).forEach(d),i=D(U),n=b(U,"SPAN",{class:!0});var ee=_(n);r=B(ee,c),ee.forEach(d),U.forEach(d),f=D(J),o=b(J,"DIV",{class:!0});var Y=_(o);h=b(Y,"I",{class:!0}),_(h).forEach(d),p=D(Y),w=b(Y,"SPAN",{class:!0});var X=_(w);V=B(X,g),X.forEach(d),Y.forEach(d),J.forEach(d),P=D(M),O=B(M,k),y=D(M),L=b(M,"BR",{}),z=D(M),N=b(M,"DIV",{class:!0,"data-svelte-h":!0}),ce(N)!=="svelte-mgeikw"&&(N.innerHTML=W),M.forEach(d),this.h()},h(){m(l,"class","fa-solid fa-location-dot"),m(n,"class","text-sm font-medium"),m(s,"class","flex gap-2 items-center text-gray-600 whitespace-nowrap"),m(h,"class","fa-solid fa-user"),m(w,"class","text-sm font-medium"),m(o,"class","flex gap-2 items-center text-gray-600 whitespace-nowrap"),m(t,"class","flex flex-wrap gap-3"),m(N,"class","pt-2 mt-2 border-t"),m(e,"class","flex gap-2 flex-col items-stretch bg-gray-100 py-2 px-6 rounded-b-xl")},m(G,M){I(G,e,M),u(e,t),u(t,s),u(s,l),u(s,i),u(s,n),u(n,r),u(t,f),u(t,o),u(o,h),u(o,p),u(o,w),u(w,V),u(e,P),u(e,O),u(e,y),u(e,L),u(e,z),u(e,N)},p(G,M){M&2&&c!==(c=G[1][0].activity.location+"")&&R(r,c),M&2&&g!==(g=G[1][0].activity.speakers.map(Ke)+"")&&R(V,g),M&2&&k!==(k=G[1][0].activity.description+"")&&R(O,k)},d(G){G&&d(e)}}}function gt(a){let e,t,s,l;const i=[_t,pt],n=[];function c(r,f){return r[10]?0:1}return t=c(a),s=n[t]=i[t](a),{c(){e=v("div"),s.c(),this.h()},l(r){e=b(r,"DIV",{class:!0});var f=_(e);s.l(f),f.forEach(d),this.h()},h(){m(e,"class","flex flex-col shadow-md shadow-black/35 rounded-xl overflow-hidden")},m(r,f){I(r,e,f),n[t].m(e,null),l=!0},p(r,[f]){s.p(r,f)},i(r){l||(Q(s),l=!0)},o(r){Z(s),l=!1},d(r){r&&d(e),n[t].d()}}}function be(a){return new Date(a).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}function xe(a,e){const t=new Date(a),l=new Date(e).getTime()-t.getTime(),i=Math.round(l/(1e3*60));if(i<60)return`${i} min`;{const n=Math.floor(i/60),c=i%60;return c>0?`${n}h ${c}m`:`${n}h`}}const Ke=a=>a.name;function kt(a,e,t){let s;we(a,Oe,y=>t(7,s=y));let{part:l}=e,{activities:i}=e,{admin:n}=e,c=!0,r,f=[];async function o(){try{const y=await fetch(Ve("/profile"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});y.ok&&t(3,r=await y.json())}catch(y){console.error(y)}}const h=(y,L)=>{var z;return((z=y==null?void 0:y.subscriptions)==null?void 0:z.length)&&y.subscriptions.some(N=>N.activity.id===L)};let p;function w(y){const{activity:L}=y.detail;t(4,c=!1),t(6,p=L),o()}Xe(()=>{o()});const g=i.some(y=>y.activity.speakers.some(L=>L.type==="keynote")),V=()=>Ce(`/program/activity/edit?id=${i[0].activity.id}`),P=()=>t(4,c=!c),k=()=>t(4,c=!c),O=()=>Ce(`/program/activity/create?programPartId=${l.id}`);return a.$$set=y=>{"part"in y&&t(0,l=y.part),"activities"in y&&t(1,i=y.activities),"admin"in y&&t(2,n=y.admin)},a.$$.update=()=>{var y;a.$$.dirty&2&&t(5,f=i?[...i].sort((L,z)=>{var G,M,J,U;const N=((M=(G=L==null?void 0:L.activity)==null?void 0:G.subscribe)==null?void 0:M.maxParticipants)??0;return(((U=(J=z==null?void 0:z.activity)==null?void 0:J.subscribe)==null?void 0:U.maxParticipants)??0)-N}):[]),a.$$.dirty&10&&t(6,p=r&&r.subscriptions&&i?((y=i.find(L=>r.subscriptions.some(z=>{var N,W;return((N=z.activity)==null?void 0:N.id)===((W=L.activity)==null?void 0:W.id)})))==null?void 0:y.activity)??void 0:void 0)},[l,i,n,r,c,f,p,s,h,w,g,V,P,k,O]}class yt extends Ne{constructor(e){super(),Pe(this,e,kt,gt,Ae,{part:0,activities:1,admin:2})}}function Re(a,e,t){const s=a.slice();return s[11]=e[t],s}function wt(a){let e,t;return{c(){e=v("div"),t=H(a[5]),this.h()},l(s){e=b(s,"DIV",{class:!0});var l=_(e);t=B(l,a[5]),l.forEach(d),this.h()},h(){m(e,"class","bg-red-100 text-red-700 p-4 rounded mt-12 text-center")},m(s,l){I(s,e,l),u(e,t)},p(s,l){l&32&&R(t,s[5])},i:ie,o:ie,d(s){s&&d(e)}}}function Et(a){let e,t,s,l;const i=[It,St,Dt],n=[];function c(r,f){return r[4]?0:r[2].length===0?1:2}return e=c(a),t=n[e]=i[e](a),{c(){t.c(),s=ue()},l(r){t.l(r),s=ue()},m(r,f){n[e].m(r,f),I(r,s,f),l=!0},p(r,f){let o=e;e=c(r),e===o?n[e].p(r,f):(ge(),Z(n[o],1,1,()=>{n[o]=null}),ke(),t=n[e],t?t.p(r,f):(t=n[e]=i[e](r),t.c()),Q(t,1),t.m(s.parentNode,s))},i(r){l||(Q(t),l=!0)},o(r){Z(t),l=!1},d(r){r&&d(s),n[e].d(r)}}}function Dt(a){let e,t,s=Te(a[2]),l=[];for(let n=0;n<s.length;n+=1)l[n]=Qe(Re(a,s,n));const i=n=>Z(l[n],1,1,()=>{l[n]=null});return{c(){e=v("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=b(n,"DIV",{class:!0});var c=_(e);for(let r=0;r<l.length;r+=1)l[r].l(c);c.forEach(d),this.h()},h(){m(e,"class","space-y-8 p-8")},m(n,c){I(n,e,c);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null);t=!0},p(n,c){if(c&76){s=Te(n[2]);let r;for(r=0;r<s.length;r+=1){const f=Re(n,s,r);l[r]?(l[r].p(f,c),Q(l[r],1)):(l[r]=Qe(f),l[r].c(),Q(l[r],1),l[r].m(e,null))}for(ge(),r=s.length;r<l.length;r+=1)i(r);ke()}},i(n){if(!t){for(let c=0;c<s.length;c+=1)Q(l[c]);t=!0}},o(n){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)Z(l[c]);t=!1},d(n){n&&d(e),Ye(l,n)}}}function St(a){let e,t='<div class="text-gray-500 text-lg">No program parts scheduled yet</div> <p class="text-gray-400 mt-2">Check back later for updates</p>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(s){e=b(s,"DIV",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-calpt5"&&(e.innerHTML=t),this.h()},h(){m(e,"class","text-center py-12")},m(s,l){I(s,e,l)},p:ie,i:ie,o:ie,d(s){s&&d(e)}}}function It(a){let e,t,s,l,i,n="Loading program...",c,r;function f(p,w){if(p[0])return Vt;if(p[1])return Tt}let o=f(a),h=o&&o(a);return{c(){e=v("div"),t=v("div"),s=v("div"),l=S(),i=v("div"),i.textContent=n,c=S(),r=v("div"),h&&h.c(),this.h()},l(p){e=b(p,"DIV",{class:!0});var w=_(e);t=b(w,"DIV",{class:!0});var g=_(t);s=b(g,"DIV",{class:!0}),_(s).forEach(d),l=D(g),i=b(g,"DIV",{class:!0,"data-svelte-h":!0}),ce(i)!=="svelte-hb50jb"&&(i.textContent=n),c=D(g),r=b(g,"DIV",{class:!0});var V=_(r);h&&h.l(V),V.forEach(d),g.forEach(d),w.forEach(d),this.h()},h(){m(s,"class","animate-spin rounded-full h-12 w-12 border-b-2 border-blue-whale mx-auto mb-4"),m(i,"class","text-gray-500 text-lg"),m(r,"class","text-gray-400 text-sm mt-2"),m(t,"class","text-center"),m(e,"class","flex justify-center items-center py-16")},m(p,w){I(p,e,w),u(e,t),u(t,s),u(t,l),u(t,i),u(t,c),u(t,r),h&&h.m(r,null)},p(p,w){o!==(o=f(p))&&(h&&h.d(1),h=o&&o(p),h&&(h.c(),h.m(r,null)))},i:ie,o:ie,d(p){p&&d(e),h&&h.d()}}}function Qe(a){let e,t;function s(...l){return a[7](a[11],...l)}return e=new yt({props:{part:a[11],activities:a[3].filter(s),admin:a[6]}}),{c(){Ie(e.$$.fragment)},l(l){Se(e.$$.fragment,l)},m(l,i){De(e,l,i),t=!0},p(l,i){a=l;const n={};i&4&&(n.part=a[11]),i&12&&(n.activities=a[3].filter(s)),i&64&&(n.admin=a[6]),e.$set(n)},i(l){t||(Q(e.$$.fragment,l),t=!0)},o(l){Z(e.$$.fragment,l),t=!1},d(l){Ee(e,l)}}}function Tt(a){let e;return{c(){e=H("Loading activities...")},l(t){e=B(t,"Loading activities...")},m(t,s){I(t,e,s)},d(t){t&&d(e)}}}function Vt(a){let e;return{c(){e=H("Loading program parts...")},l(t){e=B(t,"Loading program parts...")},m(t,s){I(t,e,s)},d(t){t&&d(e)}}}function xt(a){let e,t,s,l,i,n;e=new tt({props:{title:"Program"}});const c=[Et,wt],r=[];function f(o,h){return o[5]?1:0}return l=f(a),i=r[l]=c[l](a),{c(){Ie(e.$$.fragment),t=S(),s=v("div"),i.c(),this.h()},l(o){Se(e.$$.fragment,o),t=D(o),s=b(o,"DIV",{id:!0,class:!0});var h=_(s);i.l(h),h.forEach(d),this.h()},h(){m(s,"id","program_section"),m(s,"class","container flex-col text-blue-whale gap-4 text-center md:text-left")},m(o,h){De(e,o,h),I(o,t,h),I(o,s,h),r[l].m(s,null),n=!0},p(o,[h]){let p=l;l=f(o),l===p?r[l].p(o,h):(ge(),Z(r[p],1,1,()=>{r[p]=null}),ke(),i=r[l],i?i.p(o,h):(i=r[l]=c[l](o),i.c()),Q(i,1),i.m(s,null))},i(o){n||(Q(e.$$.fragment,o),Q(i),n=!0)},o(o){Z(e.$$.fragment,o),Z(i),n=!1},d(o){o&&(d(t),d(s)),Ee(e,o),r[l].d()}}}function At(a,e,t){let s,l;we(a,Ze,g=>t(8,s=g)),we(a,Oe,g=>t(6,l=g));let i=[],n=[],c=!0,r="",f=!0,o=!0;Xe(async()=>{s||await et.init(),await h(),await p()});async function h(){t(0,f=!0),t(5,r="");try{const g=await fetch(Ve("/programpart"));g.ok?t(2,i=await g.json()):(t(5,r=g.status===401?"Unauthorized":"Failed to load program"),console.error("Failed to fetch program parts:",g.status))}catch(g){t(5,r="Network error occurred"),console.error("Error fetching program parts:",g)}finally{t(0,f=!1)}}async function p(){t(1,o=!0),t(5,r="");try{const g=await fetch(Ve("/activity"));g.ok?t(3,n=await g.json()):(t(5,r=g.status===401?"Unauthorized":"Failed to load activities"),console.error("Failed to fetch activities:",g.status))}catch(g){t(5,r="Network error occurred"),console.error("Error fetching activities:",g)}finally{t(1,o=!1)}}const w=(g,V)=>{var P,k;return((k=(P=V==null?void 0:V.activity)==null?void 0:P.programPart)==null?void 0:k.id)===g.id};return a.$$.update=()=>{a.$$.dirty&3&&t(4,c=f||o)},[f,o,i,n,c,r,l,w]}class Bt extends Ne{constructor(e){super(),Pe(this,e,At,xt,Ae,{})}}export{Bt as component};
