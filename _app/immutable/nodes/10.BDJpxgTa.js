import{s as Ne,n as ae,d,a as K,i as S,b as u,p as me,c as v,e as b,f as p,j as L,h as T,k as m,t as M,l as V,m as we,B as Qe,g as fe,u as ue,v as We,w as Xe}from"../chunks/DUYTDFI5.js";import{S as Pe,i as xe,d as Ee,t as Q,a as G,g as ge,c as ke,m as De,b as Se,e as Ie}from"../chunks/z4FfSzan.js";import{e as Te}from"../chunks/fXUx-Agj.js";import{a as Ve}from"../chunks/BF9jo3u2.js";import{g as Ce}from"../chunks/AwM9udOQ.js";import{b as Oe,c as Ye,a as $e}from"../chunks/n9rkcXxj.js";import{H as et}from"../chunks/C2P6MsPl.js";function Me(n){let e,t='<i class="fa-solid fa-pencil text-picton-blue"></i>',i,l;return{c(){e=m("button"),e.innerHTML=t,this.h()},l(s){e=b(s,"BUTTON",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-sjzna3"&&(e.innerHTML=t),this.h()},h(){v(e,"class","rounded-lg bg-blue-whale shadow shadow-black shadow-sm w-8 h-8")},m(s,r){S(s,e,r),i||(l=me(e,"click",n[12]),i=!0)},p:ae,d(s){s&&d(e),i=!1,l()}}}function tt(n){let e;return{c(){e=m("i"),this.h()},l(t){e=b(t,"I",{class:!0}),p(e).forEach(d),this.h()},h(){v(e,"class","fa-solid fa-expand text-blue-whale")},m(t,i){S(t,e,i)},d(t){t&&d(e)}}}function st(n){let e;return{c(){e=m("i"),this.h()},l(t){e=b(t,"I",{class:!0}),p(e).forEach(d),this.h()},h(){v(e,"class","fa-solid fa-times text-blue-whale")},m(t,i){S(t,e,i)},d(t){t&&d(e)}}}function it(n){let e,t,i,l,s,r,c=n[0].subscribe.maxParticipants+"",a;return{c(){e=m("div"),t=m("i"),i=V(),l=m("span"),s=M(n[1]),r=M(" / "),a=M(c),this.h()},l(f){e=b(f,"DIV",{class:!0});var o=p(e);t=b(o,"I",{class:!0}),p(t).forEach(d),i=T(o),l=b(o,"SPAN",{});var h=p(l);s=L(h,n[1]),r=L(h," / "),a=L(h,c),h.forEach(d),o.forEach(d),this.h()},h(){v(t,"class","fa-solid fa-users"),v(e,"class","flex gap-2 items-center text-gray-600 flex-shrink-0 whitespace-nowrap")},m(f,o){S(f,e,o),u(e,t),u(e,i),u(e,l),u(l,s),u(l,r),u(l,a)},p(f,o){o&2&&K(s,f[1]),o&1&&c!==(c=f[0].subscribe.maxParticipants+"")&&K(a,c)},d(f){f&&d(e)}}}function lt(n){let e,t;function i(r,c){return c&1&&(e=null),r[11]&&r[6]?nt:(e==null&&(e=new Date(r[0].subscribe.subscriptionListOpenDate)>new Date),e?at:rt)}let l=i(n,-1),s=l(n);return{c(){s.c(),t=ue()},l(r){s.l(r),t=ue()},m(r,c){s.m(r,c),S(r,t,c)},p(r,c){l===(l=i(r,c))&&s?s.p(r,c):(s.d(1),s=l(r),s&&(s.c(),s.m(t.parentNode,t)))},d(r){r&&d(t),s.d(r)}}}function rt(n){let e,t,i=new Date(n[0].subscribe.subscriptionListCloseDate)+"",l;return{c(){e=m("span"),t=M("Activity subscription closed on "),l=M(i),this.h()},l(s){e=b(s,"SPAN",{class:!0});var r=p(e);t=L(r,"Activity subscription closed on "),l=L(r,i),r.forEach(d),this.h()},h(){v(e,"class","text-xs")},m(s,r){S(s,e,r),u(e,t),u(e,l)},p(s,r){r&1&&i!==(i=new Date(s[0].subscribe.subscriptionListCloseDate)+"")&&K(l,i)},d(s){s&&d(e)}}}function at(n){let e,t,i=new Date(n[0].subscribe.subscriptionListOpenDate)+"",l;return{c(){e=m("span"),t=M("Activity subscription opens on "),l=M(i),this.h()},l(s){e=b(s,"SPAN",{class:!0});var r=p(e);t=L(r,"Activity subscription opens on "),l=L(r,i),r.forEach(d),this.h()},h(){v(e,"class","text-xs")},m(s,r){S(s,e,r),u(e,t),u(e,l)},p(s,r){r&1&&i!==(i=new Date(s[0].subscribe.subscriptionListOpenDate)+"")&&K(l,i)},d(s){s&&d(e)}}}function nt(n){let e,t,i,l,s,r,c;function a(h,_){return h[2]||h[4]?ot:ct}let f=a(n),o=f(n);return{c(){e=m("button"),t=m("i"),l=V(),o.c(),this.h()},l(h){e=b(h,"BUTTON",{class:!0});var _=p(e);t=b(_,"I",{class:!0}),p(t).forEach(d),l=T(_),o.l(_),_.forEach(d),this.h()},h(){v(t,"class",i="fa-solid "+(n[2]||n[4]?"fa-check":"fa-plus")),v(e,"class",s="inline-flex shrink-0 cursor-pointer disabled:cursor-not-allowed disabled:bg-gray-700 items-center gap-2 px-4 py-2 rounded-md text-sm font-medium text-white "+(n[2]||n[4]?"bg-green-600":"bg-blue-whale hover:bg-blue-whale-dark")+" transition-colors duration-200"),e.disabled=!n[11]},m(h,_){S(h,e,_),u(e,t),u(e,l),o.m(e,null),r||(c=me(e,"click",n[9]),r=!0)},p(h,_){_&20&&i!==(i="fa-solid "+(h[2]||h[4]?"fa-check":"fa-plus"))&&v(t,"class",i),f!==(f=a(h))&&(o.d(1),o=f(h),o&&(o.c(),o.m(e,null))),_&20&&s!==(s="inline-flex shrink-0 cursor-pointer disabled:cursor-not-allowed disabled:bg-gray-700 items-center gap-2 px-4 py-2 rounded-md text-sm font-medium text-white "+(h[2]||h[4]?"bg-green-600":"bg-blue-whale hover:bg-blue-whale-dark")+" transition-colors duration-200")&&v(e,"class",s)},d(h){h&&d(e),o.d(),r=!1,c()}}}function ct(n){let e;return{c(){e=M("Join Activity")},l(t){e=L(t,"Join Activity")},m(t,i){S(t,e,i)},d(t){t&&d(e)}}}function ot(n){let e;return{c(){e=M("Joined activity")},l(t){e=L(t,"Joined activity")},m(t,i){S(t,e,i)},d(t){t&&d(e)}}}function ft(n){let e,t,i,l=n[0].name+"",s,r,c,a,f,o,h,_,E,g,N,C=n[0].location+"",y,U,k,j,z,B,R=n[0].speakers.map(je)+"",Y,Z,q,J,ne,te=n[8](n[0].description)+"",W,se,$,ie,X,H=n[5]&&Me(n);function ce(w,I){return w[3]?st:tt}let F=ce(n),A=F(n),D=n[10]&&it(n),P=n[10]&&lt(n);return{c(){e=m("div"),t=m("div"),i=m("h3"),s=M(l),r=V(),c=m("div"),H&&H.c(),a=V(),f=m("button"),A.c(),o=V(),h=m("div"),_=m("div"),E=m("i"),g=V(),N=m("span"),y=M(C),U=V(),k=m("div"),j=m("i"),z=V(),B=m("span"),Y=M(R),Z=V(),D&&D.c(),q=V(),J=m("div"),ne=m("div"),W=M(te),se=V(),$=m("div"),P&&P.c(),this.h()},l(w){e=b(w,"DIV",{class:!0});var I=p(e);t=b(I,"DIV",{class:!0});var oe=p(t);i=b(oe,"H3",{class:!0});var x=p(i);s=L(x,l),x.forEach(d),r=T(oe),c=b(oe,"DIV",{class:!0});var O=p(c);H&&H.l(O),a=T(O),f=b(O,"BUTTON",{class:!0});var ee=p(f);A.l(ee),ee.forEach(d),O.forEach(d),oe.forEach(d),o=T(I),h=b(I,"DIV",{class:!0});var le=p(h);_=b(le,"DIV",{class:!0});var re=p(_);E=b(re,"I",{class:!0}),p(E).forEach(d),g=T(re),N=b(re,"SPAN",{class:!0});var de=p(N);y=L(de,C),de.forEach(d),re.forEach(d),U=T(le),k=b(le,"DIV",{class:!0});var ve=p(k);j=b(ve,"I",{class:!0}),p(j).forEach(d),z=T(ve),B=b(ve,"SPAN",{class:!0});var _e=p(B);Y=L(_e,R),_e.forEach(d),ve.forEach(d),Z=T(le),D&&D.l(le),le.forEach(d),I.forEach(d),q=T(w),J=b(w,"DIV",{class:!0});var he=p(J);ne=b(he,"DIV",{class:!0});var ye=p(ne);W=L(ye,te),ye.forEach(d),se=T(he),$=b(he,"DIV",{class:!0});var pe=p($);P&&P.l(pe),pe.forEach(d),he.forEach(d),this.h()},h(){v(i,"class","text-xl font-semibold text-blue-whale leading-tight flex-1 mr-4 h-20"),v(f,"class","rounded-lg bg-gray-100 duration-100 transition-all hover:bg-gray-50 hover:shadow-md w-8 h-8"),v(c,"class","h-full flex gap-2 items-center"),v(t,"class","flex items-start justify-between mb-3"),v(E,"class","fa-solid fa-location-dot"),v(N,"class","text-sm font-medium"),v(_,"class","flex gap-2 items-center text-gray-600 whitespace-nowrap"),v(j,"class","fa-solid fa-user"),v(B,"class","text-sm font-medium"),v(k,"class","flex gap-2 items-center text-gray-600 whitespace-nowrap"),v(h,"class","flex flex-wrap gap-3"),v(e,"class","p-6 pb-2"),v(ne,"class","text-gray-700 text-sm leading-relaxed mb-4"),v($,"class","flex items-center justify-between py-2 border-t border-gray-100"),v(J,"class","px-6")},m(w,I){S(w,e,I),u(e,t),u(t,i),u(i,s),u(t,r),u(t,c),H&&H.m(c,null),u(c,a),u(c,f),A.m(f,null),u(e,o),u(e,h),u(h,_),u(_,E),u(_,g),u(_,N),u(N,y),u(h,U),u(h,k),u(k,j),u(k,z),u(k,B),u(B,Y),u(h,Z),D&&D.m(h,null),S(w,q,I),S(w,J,I),u(J,ne),u(ne,W),u(J,se),u(J,$),P&&P.m($,null),ie||(X=me(f,"click",n[13]),ie=!0)},p(w,[I]){I&1&&l!==(l=w[0].name+"")&&K(s,l),w[5]?H?H.p(w,I):(H=Me(w),H.c(),H.m(c,a)):H&&(H.d(1),H=null),F!==(F=ce(w))&&(A.d(1),A=F(w),A&&(A.c(),A.m(f,null))),I&1&&C!==(C=w[0].location+"")&&K(y,C),I&1&&R!==(R=w[0].speakers.map(je)+"")&&K(Y,R),w[10]&&D.p(w,I),I&1&&te!==(te=w[8](w[0].description)+"")&&K(W,te),w[10]&&P.p(w,I)},i:ae,o:ae,d(w){w&&(d(e),d(q),d(J)),H&&H.d(),A.d(),D&&D.d(),P&&P.d(),ie=!1,X()}}}const je=n=>n.name;function ut(n,e,t){let i,l;we(n,Oe,y=>t(5,i=y)),we(n,Ye,y=>t(6,l=y));let{activity:s}=e,{nrOfSubscribers:r}=e,{isSubscribed:c}=e,{close:a=!1}=e;const f=Qe();function o(y,U=150){return y.length<=U||a?y:y.substring(0,U).trim()+"..."}const h=async()=>{try{(await fetch(Ve(`/activity/${s.id}/subscribe`),{method:"POST",credentials:"include"})).ok?(t(4,_=!0),f("activitySubscribed",{activity:s,activityId:s.id})):console.error("Failed to subscribe to activity")}catch(y){console.error("Error subscribing to activity:",y)}};let _=!1;const E=s.subscribe&&s.subscribe.maxParticipants&&s.subscribe.subscribers,g=E&&!isNaN(Date.parse(s.subscribe.subscriptionListOpenDate))&&!isNaN(Date.parse(s.subscribe.subscriptionListCloseDate))&&new Date(s.subscribe.subscriptionListOpenDate)<=new Date&&new Date(s.subscribe.subscriptionListCloseDate)>new Date,N=()=>Ce(`/program/activity/edit?id=${s.id}`),C=()=>f(a?"close":"expand");return n.$$set=y=>{"activity"in y&&t(0,s=y.activity),"nrOfSubscribers"in y&&t(1,r=y.nrOfSubscribers),"isSubscribed"in y&&t(2,c=y.isSubscribed),"close"in y&&t(3,a=y.close)},[s,r,c,a,_,i,l,f,o,h,E,g,N,C]}class Ze extends Pe{constructor(e){super(),xe(this,e,ut,ft,Ne,{activity:0,nrOfSubscribers:1,isSubscribed:2,close:3})}}function Be(n){let e,t,i,l,s,r,c,a;return s=new Ze({props:{activity:n[0],nrOfSubscribers:n[1],isSubscribed:n[2],close:!0}}),s.$on("activitySubscribed",n[4]),s.$on("close",n[7]),{c(){e=m("button"),t=V(),i=m("div"),l=m("div"),Ie(s.$$.fragment),this.h()},l(f){e=b(f,"BUTTON",{class:!0}),p(e).forEach(d),t=T(f),i=b(f,"DIV",{class:!0});var o=p(i);l=b(o,"DIV",{class:!0});var h=p(l);Se(s.$$.fragment,h),h.forEach(d),o.forEach(d),this.h()},h(){v(e,"class","fixed top-0 left-0 w-full h-full bg-black/60 cursor-default backdrop-blur-lg"),v(l,"class","w-full md:max-w-3xl bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden"),v(i,"class","fixed w-screen h-screen left-0 top-0 flex items-center justify-center")},m(f,o){S(f,e,o),S(f,t,o),S(f,i,o),u(i,l),De(s,l,null),r=!0,c||(a=me(e,"click",n[6]),c=!0)},p(f,o){const h={};o&1&&(h.activity=f[0]),o&2&&(h.nrOfSubscribers=f[1]),o&4&&(h.isSubscribed=f[2]),s.$set(h)},i(f){r||(G(s.$$.fragment,f),r=!0)},o(f){Q(s.$$.fragment,f),r=!1},d(f){f&&(d(e),d(t),d(i)),Ee(s),c=!1,a()}}}function dt(n){let e,t,i,l,s;t=new Ze({props:{activity:n[0],nrOfSubscribers:n[1],isSubscribed:n[2]}}),t.$on("activitySubscribed",n[4]),t.$on("expand",n[5]);let r=n[3]&&Be(n);return{c(){e=m("div"),Ie(t.$$.fragment),i=V(),r&&r.c(),l=ue(),this.h()},l(c){e=b(c,"DIV",{class:!0});var a=p(e);Se(t.$$.fragment,a),a.forEach(d),i=T(c),r&&r.l(c),l=ue(),this.h()},h(){v(e,"class","bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 border border-gray-200 w-full md:max-w-sm shrink-0 svelte-18tlhkx")},m(c,a){S(c,e,a),De(t,e,null),S(c,i,a),r&&r.m(c,a),S(c,l,a),s=!0},p(c,[a]){const f={};a&1&&(f.activity=c[0]),a&2&&(f.nrOfSubscribers=c[1]),a&4&&(f.isSubscribed=c[2]),t.$set(f),c[3]?r?(r.p(c,a),a&8&&G(r,1)):(r=Be(c),r.c(),G(r,1),r.m(l.parentNode,l)):r&&(ge(),Q(r,1,1,()=>{r=null}),ke())},i(c){s||(G(t.$$.fragment,c),G(r),s=!0)},o(c){Q(t.$$.fragment,c),Q(r),s=!1},d(c){c&&(d(e),d(i),d(l)),Ee(t),r&&r.d(c)}}}function ht(n,e,t){let{activity:i}=e,{nrOfSubscribers:l}=e,{isSubscribed:s}=e,r=!1;const c=Qe();function a(_){c("activitySubscribed",_.detail)}const f=()=>t(3,r=!0),o=()=>t(3,r=!1),h=()=>t(3,r=!1);return n.$$set=_=>{"activity"in _&&t(0,i=_.activity),"nrOfSubscribers"in _&&t(1,l=_.nrOfSubscribers),"isSubscribed"in _&&t(2,s=_.isSubscribed)},[i,l,s,r,a,f,o,h]}class bt extends Pe{constructor(e){super(),xe(this,e,ht,dt,Ne,{activity:0,nrOfSubscribers:1,isSubscribed:2})}}function He(n,e,t){const i=n.slice();return i[16]=e[t],i}function mt(n){let e,t,i,l,s=n[0].name+"",r,c,a,f=Ae(n[0].beginTime,n[0].endTime)+"",o,h,_,E,g,N="Start:",C,y,U=be(n[0].beginTime)+"",k,j,z,B,R="End:",Y,Z,q=be(n[0].endTime)+"",J,ne,te,W,se,$,ie,X,H,ce,F=n[6]&&Ue(n),A=n[4]&&Fe(n);return{c(){e=m("button"),t=m("div"),i=m("div"),l=m("h3"),r=M(s),c=V(),a=m("span"),o=M(f),h=V(),_=m("div"),E=m("div"),g=m("span"),g.textContent=N,C=V(),y=m("span"),k=M(U),j=V(),z=m("div"),B=m("span"),B.textContent=R,Y=V(),Z=m("span"),J=M(q),ne=V(),F&&F.c(),te=V(),W=m("i"),$=V(),A&&A.c(),ie=ue(),this.h()},l(D){e=b(D,"BUTTON",{class:!0});var P=p(e);t=b(P,"DIV",{class:!0});var w=p(t);i=b(w,"DIV",{class:!0});var I=p(i);l=b(I,"H3",{class:!0});var oe=p(l);r=L(oe,s),oe.forEach(d),c=T(I),a=b(I,"SPAN",{class:!0});var x=p(a);o=L(x,f),x.forEach(d),I.forEach(d),h=T(w),_=b(w,"DIV",{class:!0});var O=p(_);E=b(O,"DIV",{class:!0});var ee=p(E);g=b(ee,"SPAN",{class:!0,"data-svelte-h":!0}),fe(g)!=="svelte-11t2hy0"&&(g.textContent=N),C=T(ee),y=b(ee,"SPAN",{});var le=p(y);k=L(le,U),le.forEach(d),ee.forEach(d),j=T(O),z=b(O,"DIV",{class:!0});var re=p(z);B=b(re,"SPAN",{class:!0,"data-svelte-h":!0}),fe(B)!=="svelte-i1trgj"&&(B.textContent=R),Y=T(re),Z=b(re,"SPAN",{});var de=p(Z);J=L(de,q),de.forEach(d),re.forEach(d),O.forEach(d),w.forEach(d),ne=T(P),F&&F.l(P),te=T(P),W=b(P,"I",{class:!0}),p(W).forEach(d),P.forEach(d),$=T(D),A&&A.l(D),ie=ue(),this.h()},h(){v(l,"class","text-lg font-medium text-gray-900"),v(a,"class","inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800"),v(i,"class","flex items-center space-x-4"),v(g,"class","font-medium"),v(E,"class","flex items-center space-x-1"),v(B,"class","font-medium"),v(z,"class","flex items-center space-x-1"),v(_,"class","flex items-center space-x-6 text-sm text-gray-600"),v(t,"class","mr-auto"),v(W,"class",se=`fa-solid fa-chevron-${n[4]?"up":"down"}`),v(e,"class","p-6 w-full flex rounded-t-xl items-center gap-8 bg-gray-100 hover:bg-gray-200 transition-colors")},m(D,P){S(D,e,P),u(e,t),u(t,i),u(i,l),u(l,r),u(i,c),u(i,a),u(a,o),u(t,h),u(t,_),u(_,E),u(E,g),u(E,C),u(E,y),u(y,k),u(_,j),u(_,z),u(z,B),u(z,Y),u(z,Z),u(Z,J),u(e,ne),F&&F.m(e,null),u(e,te),u(e,W),S(D,$,P),A&&A.m(D,P),S(D,ie,P),X=!0,H||(ce=me(e,"click",n[13]),H=!0)},p(D,P){(!X||P&1)&&s!==(s=D[0].name+"")&&K(r,s),(!X||P&1)&&f!==(f=Ae(D[0].beginTime,D[0].endTime)+"")&&K(o,f),(!X||P&1)&&U!==(U=be(D[0].beginTime)+"")&&K(k,U),(!X||P&1)&&q!==(q=be(D[0].endTime)+"")&&K(J,q),D[6]?F?F.p(D,P):(F=Ue(D),F.c(),F.m(e,te)):F&&(F.d(1),F=null),(!X||P&16&&se!==(se=`fa-solid fa-chevron-${D[4]?"up":"down"}`))&&v(W,"class",se),D[4]?A?(A.p(D,P),P&16&&G(A,1)):(A=Fe(D),A.c(),G(A,1),A.m(ie.parentNode,ie)):A&&(ge(),Q(A,1,1,()=>{A=null}),ke())},i(D){X||(G(A),X=!0)},o(D){Q(A),X=!1},d(D){D&&(d(e),d($),d(ie)),F&&F.d(),A&&A.d(D),H=!1,ce()}}}function vt(n){var oe;let e,t,i,l,s,r=n[0].name+"",c,a,f,o=(((oe=n[1])==null?void 0:oe[0].activity.name)??"")+"",h,_,E,g=Ae(n[0].beginTime,n[0].endTime)+"",N,C,y,U,k,j="Start:",z,B,R=be(n[0].beginTime)+"",Y,Z,q,J,ne="End:",te,W,se=be(n[0].endTime)+"",$,ie,X,H,ce,F,A,D,P,w=n[7]&&qe(n),I=n[4]&&Ge(n);return{c(){e=m("button"),t=m("div"),i=m("div"),l=m("h3"),s=m("b"),c=M(r),a=M(":"),f=V(),h=M(o),_=V(),E=m("span"),N=M(g),C=V(),y=m("div"),U=m("div"),k=m("span"),k.textContent=j,z=V(),B=m("span"),Y=M(R),Z=V(),q=m("div"),J=m("span"),J.textContent=ne,te=V(),W=m("span"),$=M(se),ie=V(),w&&w.c(),X=V(),H=m("i"),F=V(),I&&I.c(),A=ue(),this.h()},l(x){e=b(x,"BUTTON",{class:!0});var O=p(e);t=b(O,"DIV",{class:!0});var ee=p(t);i=b(ee,"DIV",{class:!0});var le=p(i);l=b(le,"H3",{class:!0});var re=p(l);s=b(re,"B",{});var de=p(s);c=L(de,r),a=L(de,":"),de.forEach(d),f=T(re),h=L(re,o),re.forEach(d),_=T(le),E=b(le,"SPAN",{class:!0});var ve=p(E);N=L(ve,g),ve.forEach(d),le.forEach(d),C=T(ee),y=b(ee,"DIV",{class:!0});var _e=p(y);U=b(_e,"DIV",{class:!0});var he=p(U);k=b(he,"SPAN",{class:!0,"data-svelte-h":!0}),fe(k)!=="svelte-11t2hy0"&&(k.textContent=j),z=T(he),B=b(he,"SPAN",{});var ye=p(B);Y=L(ye,R),ye.forEach(d),he.forEach(d),Z=T(_e),q=b(_e,"DIV",{class:!0});var pe=p(q);J=b(pe,"SPAN",{class:!0,"data-svelte-h":!0}),fe(J)!=="svelte-i1trgj"&&(J.textContent=ne),te=T(pe),W=b(pe,"SPAN",{});var Le=p(W);$=L(Le,se),Le.forEach(d),pe.forEach(d),_e.forEach(d),ee.forEach(d),ie=T(O),w&&w.l(O),X=T(O),H=b(O,"I",{class:!0}),p(H).forEach(d),O.forEach(d),F=T(x),I&&I.l(x),A=ue(),this.h()},h(){v(l,"class","text-lg font-medium text-gray-900"),v(E,"class","inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800"),v(i,"class","flex items-center space-x-4"),v(k,"class","font-medium"),v(U,"class","flex items-center space-x-1"),v(J,"class","font-medium"),v(q,"class","flex items-center space-x-1"),v(y,"class","flex items-center space-x-6 text-sm text-gray-600"),v(t,"class","mr-auto"),v(H,"class",ce=`fa-solid fa-chevron-${n[4]?"up":"down"}`),v(e,"class","py-4 px-6 w-full flex rounded-t-xl items-center gap-8 bg-gray-100 hover:bg-gray-200 transition-colors")},m(x,O){S(x,e,O),u(e,t),u(t,i),u(i,l),u(l,s),u(s,c),u(s,a),u(l,f),u(l,h),u(i,_),u(i,E),u(E,N),u(t,C),u(t,y),u(y,U),u(U,k),u(U,z),u(U,B),u(B,Y),u(y,Z),u(y,q),u(q,J),u(q,te),u(q,W),u(W,$),u(e,ie),w&&w.m(e,null),u(e,X),u(e,H),S(x,F,O),I&&I.m(x,O),S(x,A,O),D||(P=me(e,"click",n[12]),D=!0)},p(x,O){var ee;O&1&&r!==(r=x[0].name+"")&&K(c,r),O&2&&o!==(o=(((ee=x[1])==null?void 0:ee[0].activity.name)??"")+"")&&K(h,o),O&1&&g!==(g=Ae(x[0].beginTime,x[0].endTime)+"")&&K(N,g),O&1&&R!==(R=be(x[0].beginTime)+"")&&K(Y,R),O&1&&se!==(se=be(x[0].endTime)+"")&&K($,se),x[7]?w?w.p(x,O):(w=qe(x),w.c(),w.m(e,X)):w&&(w.d(1),w=null),O&16&&ce!==(ce=`fa-solid fa-chevron-${x[4]?"up":"down"}`)&&v(H,"class",ce),x[4]?I?I.p(x,O):(I=Ge(x),I.c(),I.m(A.parentNode,A)):I&&(I.d(1),I=null)},i:ae,o:ae,d(x){x&&(d(e),d(F),d(A)),w&&w.d(),I&&I.d(x),D=!1,P()}}}function Ue(n){let e,t,i,l,s,r=n[6].name+"",c,a,f,o,h,_,E=n[6].location+"",g;return{c(){e=m("div"),t=m("div"),i=m("i"),l=V(),s=m("span"),c=M(r),a=V(),f=m("div"),o=m("i"),h=V(),_=m("span"),g=M(E),this.h()},l(N){e=b(N,"DIV",{class:!0});var C=p(e);t=b(C,"DIV",{class:!0});var y=p(t);i=b(y,"I",{class:!0}),p(i).forEach(d),l=T(y),s=b(y,"SPAN",{class:!0});var U=p(s);c=L(U,r),U.forEach(d),y.forEach(d),a=T(C),f=b(C,"DIV",{class:!0});var k=p(f);o=b(k,"I",{class:!0}),p(o).forEach(d),h=T(k),_=b(k,"SPAN",{class:!0});var j=p(_);g=L(j,E),j.forEach(d),k.forEach(d),C.forEach(d),this.h()},h(){v(i,"class","fa-solid fa-person-chalkboard"),v(s,"class","max-w-48 overflow-hidden whitespace-nowrap text-ellipsis"),v(t,"class","flex gap-1 items-center"),v(o,"class","fa-solid fa-location-dot"),v(_,"class","max-w-32 overflow-hidden whitespace-nowrap text-ellipsis"),v(f,"class","flex gap-1 items-center"),v(e,"class","bg-blue-whale px-4 py-2 rounded-full items-center text-white flex gap-2")},m(N,C){S(N,e,C),u(e,t),u(t,i),u(t,l),u(t,s),u(s,c),u(e,a),u(e,f),u(f,o),u(f,h),u(f,_),u(_,g)},p(N,C){C&64&&r!==(r=N[6].name+"")&&K(c,r),C&64&&E!==(E=N[6].location+"")&&K(g,E)},d(N){N&&d(e)}}}function Fe(n){let e,t,i,l=Te(n[5]),s=[];for(let a=0;a<l.length;a+=1)s[a]=ze(He(n,l,a));const r=a=>Q(s[a],1,1,()=>{s[a]=null});let c=n[2]&&Je(n);return{c(){e=m("div");for(let a=0;a<s.length;a+=1)s[a].c();t=V(),c&&c.c(),this.h()},l(a){e=b(a,"DIV",{class:!0});var f=p(e);for(let o=0;o<s.length;o+=1)s[o].l(f);t=T(f),c&&c.l(f),f.forEach(d),this.h()},h(){v(e,"class","flex gap-4 flex-col md:flex-row items-stretch bg-gray-300 p-4 rounded-b-xl overflow-auto")},m(a,f){S(a,e,f);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);u(e,t),c&&c.m(e,null),i=!0},p(a,f){if(f&808){l=Te(a[5]);let o;for(o=0;o<l.length;o+=1){const h=He(a,l,o);s[o]?(s[o].p(h,f),G(s[o],1)):(s[o]=ze(h),s[o].c(),G(s[o],1),s[o].m(e,t))}for(ge(),o=l.length;o<s.length;o+=1)r(o);ke()}a[2]?c?c.p(a,f):(c=Je(a),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(a){if(!i){for(let f=0;f<l.length;f+=1)G(s[f]);i=!0}},o(a){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)Q(s[f]);i=!1},d(a){a&&d(e),Xe(s,a),c&&c.d()}}}function ze(n){let e,t;return e=new bt({props:{activity:n[16].activity,nrOfSubscribers:n[16].nrOfSubscribers,isSubscribed:n[8](n[3],n[16].activity.id)}}),e.$on("activitySubscribed",n[9]),{c(){Ie(e.$$.fragment)},l(i){Se(e.$$.fragment,i)},m(i,l){De(e,i,l),t=!0},p(i,l){const s={};l&32&&(s.activity=i[16].activity),l&32&&(s.nrOfSubscribers=i[16].nrOfSubscribers),l&40&&(s.isSubscribed=i[8](i[3],i[16].activity.id)),e.$set(s)},i(i){t||(G(e.$$.fragment,i),t=!0)},o(i){Q(e.$$.fragment,i),t=!1},d(i){Ee(e,i)}}}function Je(n){let e,t,i="+",l,s;return{c(){e=m("div"),t=m("button"),t.textContent=i,this.h()},l(r){e=b(r,"DIV",{class:!0});var c=p(e);t=b(c,"BUTTON",{class:!0,"data-svelte-h":!0}),fe(t)!=="svelte-1cav9my"&&(t.textContent=i),c.forEach(d),this.h()},h(){v(t,"class","size-16 bg-blue-whale text-white text-5xl rounded-full ml-2"),v(e,"class","flex items-center")},m(r,c){S(r,e,c),u(e,t),l||(s=me(t,"click",n[14]),l=!0)},p:ae,d(r){r&&d(e),l=!1,s()}}}function qe(n){let e,t='<i class="fa-solid fa-pencil text-picton-blue"></i>',i,l;return{c(){e=m("button"),e.innerHTML=t,this.h()},l(s){e=b(s,"BUTTON",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-1bvd5dk"&&(e.innerHTML=t),this.h()},h(){v(e,"class","rounded-lg bg-blue-whale shadow shadow-black shadow-sm w-8 h-8")},m(s,r){S(s,e,r),i||(l=me(e,"click",n[11]),i=!0)},p:ae,d(s){s&&d(e),i=!1,l()}}}function Ge(n){let e,t=n[1][0].activity.description+"",i,l,s,r,c,a='<span class="text-xs">This is a keynote, you are automatically subscribed to this activity</span>';return{c(){e=m("div"),i=M(t),l=V(),s=m("br"),r=V(),c=m("div"),c.innerHTML=a,this.h()},l(f){e=b(f,"DIV",{class:!0});var o=p(e);i=L(o,t),l=T(o),s=b(o,"BR",{}),r=T(o),c=b(o,"DIV",{class:!0,"data-svelte-h":!0}),fe(c)!=="svelte-mgeikw"&&(c.innerHTML=a),o.forEach(d),this.h()},h(){v(c,"class","pt-2 mt-2 border-t"),v(e,"class","flex gap-2 flex-col items-stretch bg-gray-100 py-2 px-6 rounded-b-xl")},m(f,o){S(f,e,o),u(e,i),u(e,l),u(e,s),u(e,r),u(e,c)},p(f,o){o&2&&t!==(t=f[1][0].activity.description+"")&&K(i,t)},d(f){f&&d(e)}}}function _t(n){let e,t,i,l;const s=[vt,mt],r=[];function c(a,f){return a[10]?0:1}return t=c(n),i=r[t]=s[t](n),{c(){e=m("div"),i.c(),this.h()},l(a){e=b(a,"DIV",{class:!0});var f=p(e);i.l(f),f.forEach(d),this.h()},h(){v(e,"class","flex flex-col shadow-md shadow-black/35 rounded-xl overflow-hidden")},m(a,f){S(a,e,f),r[t].m(e,null),l=!0},p(a,[f]){i.p(a,f)},i(a){l||(G(i),l=!0)},o(a){Q(i),l=!1},d(a){a&&d(e),r[t].d()}}}function be(n){return new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}function Ae(n,e){const t=new Date(n),l=new Date(e).getTime()-t.getTime(),s=Math.round(l/(1e3*60));if(s<60)return`${s} min`;{const r=Math.floor(s/60),c=s%60;return c>0?`${r}h ${c}m`:`${r}h`}}function pt(n,e,t){let i;we(n,Oe,k=>t(7,i=k));let{part:l}=e,{activities:s}=e,{admin:r}=e,c=!0,a,f=[];async function o(){try{const k=await fetch(Ve("/profile"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});k.ok&&t(3,a=await k.json())}catch(k){console.error(k)}}const h=(k,j)=>{var z;return((z=k==null?void 0:k.subscriptions)==null?void 0:z.length)&&k.subscriptions.some(B=>B.activity.id===j)};let _;function E(k){const{activity:j}=k.detail;t(4,c=!1),t(6,_=j),o()}We(()=>{o()});const g=s.some(k=>k.activity.speakers.some(j=>j.type==="keynote")),N=()=>Ce(`/program/activity/edit?id=${s[0].activity.id}`),C=()=>t(4,c=!c),y=()=>t(4,c=!c),U=()=>Ce(`/program/activity/create?programPartId=${l.id}`);return n.$$set=k=>{"part"in k&&t(0,l=k.part),"activities"in k&&t(1,s=k.activities),"admin"in k&&t(2,r=k.admin)},n.$$.update=()=>{var k;n.$$.dirty&2&&t(5,f=s?[...s].sort((j,z)=>{var Y,Z,q,J;const B=((Z=(Y=j==null?void 0:j.activity)==null?void 0:Y.subscribe)==null?void 0:Z.maxParticipants)??0;return(((J=(q=z==null?void 0:z.activity)==null?void 0:q.subscribe)==null?void 0:J.maxParticipants)??0)-B}):[]),n.$$.dirty&10&&t(6,_=a&&a.subscriptions&&s?((k=s.find(j=>a.subscriptions.some(z=>{var B,R;return((B=z.activity)==null?void 0:B.id)===((R=j.activity)==null?void 0:R.id)})))==null?void 0:k.activity)??void 0:void 0)},[l,s,r,a,c,f,_,i,h,E,g,N,C,y,U]}class gt extends Pe{constructor(e){super(),xe(this,e,pt,_t,Ne,{part:0,activities:1,admin:2})}}function Ke(n,e,t){const i=n.slice();return i[11]=e[t],i}function kt(n){let e,t;return{c(){e=m("div"),t=M(n[5]),this.h()},l(i){e=b(i,"DIV",{class:!0});var l=p(e);t=L(l,n[5]),l.forEach(d),this.h()},h(){v(e,"class","bg-red-100 text-red-700 p-4 rounded mt-12 text-center")},m(i,l){S(i,e,l),u(e,t)},p(i,l){l&32&&K(t,i[5])},i:ae,o:ae,d(i){i&&d(e)}}}function yt(n){let e,t,i,l;const s=[Dt,Et,wt],r=[];function c(a,f){return a[4]?0:a[2].length===0?1:2}return e=c(n),t=r[e]=s[e](n),{c(){t.c(),i=ue()},l(a){t.l(a),i=ue()},m(a,f){r[e].m(a,f),S(a,i,f),l=!0},p(a,f){let o=e;e=c(a),e===o?r[e].p(a,f):(ge(),Q(r[o],1,1,()=>{r[o]=null}),ke(),t=r[e],t?t.p(a,f):(t=r[e]=s[e](a),t.c()),G(t,1),t.m(i.parentNode,i))},i(a){l||(G(t),l=!0)},o(a){Q(t),l=!1},d(a){a&&d(i),r[e].d(a)}}}function wt(n){let e,t,i=Te(n[2]),l=[];for(let r=0;r<i.length;r+=1)l[r]=Re(Ke(n,i,r));const s=r=>Q(l[r],1,1,()=>{l[r]=null});return{c(){e=m("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=b(r,"DIV",{class:!0});var c=p(e);for(let a=0;a<l.length;a+=1)l[a].l(c);c.forEach(d),this.h()},h(){v(e,"class","space-y-8 p-8")},m(r,c){S(r,e,c);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null);t=!0},p(r,c){if(c&76){i=Te(r[2]);let a;for(a=0;a<i.length;a+=1){const f=Ke(r,i,a);l[a]?(l[a].p(f,c),G(l[a],1)):(l[a]=Re(f),l[a].c(),G(l[a],1),l[a].m(e,null))}for(ge(),a=i.length;a<l.length;a+=1)s(a);ke()}},i(r){if(!t){for(let c=0;c<i.length;c+=1)G(l[c]);t=!0}},o(r){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)Q(l[c]);t=!1},d(r){r&&d(e),Xe(l,r)}}}function Et(n){let e,t='<div class="text-gray-500 text-lg">No program parts scheduled yet</div> <p class="text-gray-400 mt-2">Check back later for updates</p>';return{c(){e=m("div"),e.innerHTML=t,this.h()},l(i){e=b(i,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-calpt5"&&(e.innerHTML=t),this.h()},h(){v(e,"class","text-center py-12")},m(i,l){S(i,e,l)},p:ae,i:ae,o:ae,d(i){i&&d(e)}}}function Dt(n){let e,t,i,l,s,r="Loading program...",c,a;function f(_,E){if(_[0])return It;if(_[1])return St}let o=f(n),h=o&&o(n);return{c(){e=m("div"),t=m("div"),i=m("div"),l=V(),s=m("div"),s.textContent=r,c=V(),a=m("div"),h&&h.c(),this.h()},l(_){e=b(_,"DIV",{class:!0});var E=p(e);t=b(E,"DIV",{class:!0});var g=p(t);i=b(g,"DIV",{class:!0}),p(i).forEach(d),l=T(g),s=b(g,"DIV",{class:!0,"data-svelte-h":!0}),fe(s)!=="svelte-hb50jb"&&(s.textContent=r),c=T(g),a=b(g,"DIV",{class:!0});var N=p(a);h&&h.l(N),N.forEach(d),g.forEach(d),E.forEach(d),this.h()},h(){v(i,"class","animate-spin rounded-full h-12 w-12 border-b-2 border-blue-whale mx-auto mb-4"),v(s,"class","text-gray-500 text-lg"),v(a,"class","text-gray-400 text-sm mt-2"),v(t,"class","text-center"),v(e,"class","flex justify-center items-center py-16")},m(_,E){S(_,e,E),u(e,t),u(t,i),u(t,l),u(t,s),u(t,c),u(t,a),h&&h.m(a,null)},p(_,E){o!==(o=f(_))&&(h&&h.d(1),h=o&&o(_),h&&(h.c(),h.m(a,null)))},i:ae,o:ae,d(_){_&&d(e),h&&h.d()}}}function Re(n){let e,t;function i(...l){return n[7](n[11],...l)}return e=new gt({props:{part:n[11],activities:n[3].filter(i),admin:n[6]}}),{c(){Ie(e.$$.fragment)},l(l){Se(e.$$.fragment,l)},m(l,s){De(e,l,s),t=!0},p(l,s){n=l;const r={};s&4&&(r.part=n[11]),s&12&&(r.activities=n[3].filter(i)),s&64&&(r.admin=n[6]),e.$set(r)},i(l){t||(G(e.$$.fragment,l),t=!0)},o(l){Q(e.$$.fragment,l),t=!1},d(l){Ee(e,l)}}}function St(n){let e;return{c(){e=M("Loading activities...")},l(t){e=L(t,"Loading activities...")},m(t,i){S(t,e,i)},d(t){t&&d(e)}}}function It(n){let e;return{c(){e=M("Loading program parts...")},l(t){e=L(t,"Loading program parts...")},m(t,i){S(t,e,i)},d(t){t&&d(e)}}}function Tt(n){let e,t,i,l,s,r;e=new et({props:{title:"Program"}});const c=[yt,kt],a=[];function f(o,h){return o[5]?1:0}return l=f(n),s=a[l]=c[l](n),{c(){Ie(e.$$.fragment),t=V(),i=m("div"),s.c(),this.h()},l(o){Se(e.$$.fragment,o),t=T(o),i=b(o,"DIV",{id:!0,class:!0});var h=p(i);s.l(h),h.forEach(d),this.h()},h(){v(i,"id","program_section"),v(i,"class","container flex-col text-blue-whale gap-4 text-center md:text-left")},m(o,h){De(e,o,h),S(o,t,h),S(o,i,h),a[l].m(i,null),r=!0},p(o,[h]){let _=l;l=f(o),l===_?a[l].p(o,h):(ge(),Q(a[_],1,1,()=>{a[_]=null}),ke(),s=a[l],s?s.p(o,h):(s=a[l]=c[l](o),s.c()),G(s,1),s.m(i,null))},i(o){r||(G(e.$$.fragment,o),G(s),r=!0)},o(o){Q(e.$$.fragment,o),Q(s),r=!1},d(o){o&&(d(t),d(i)),Ee(e,o),a[l].d()}}}function Vt(n,e,t){let i,l;we(n,Ye,g=>t(8,i=g)),we(n,Oe,g=>t(6,l=g));let s=[],r=[],c=!0,a="",f=!0,o=!0;We(async()=>{i||await $e.init(),await h(),await _()});async function h(){t(0,f=!0),t(5,a="");try{const g=await fetch(Ve("/programpart"));g.ok?t(2,s=await g.json()):(t(5,a=g.status===401?"Unauthorized":"Failed to load program"),console.error("Failed to fetch program parts:",g.status))}catch(g){t(5,a="Network error occurred"),console.error("Error fetching program parts:",g)}finally{t(0,f=!1)}}async function _(){t(1,o=!0),t(5,a="");try{const g=await fetch(Ve("/activity"));g.ok?t(3,r=await g.json()):(t(5,a=g.status===401?"Unauthorized":"Failed to load activities"),console.error("Failed to fetch activities:",g.status))}catch(g){t(5,a="Network error occurred"),console.error("Error fetching activities:",g)}finally{t(1,o=!1)}}const E=(g,N)=>{var C,y;return((y=(C=N==null?void 0:N.activity)==null?void 0:C.programPart)==null?void 0:y.id)===g.id};return n.$$.update=()=>{n.$$.dirty&3&&t(4,c=f||o)},[f,o,s,r,c,a,l,E]}class Mt extends Pe{constructor(e){super(),xe(this,e,Vt,Tt,Ne,{})}}export{Mt as component};
