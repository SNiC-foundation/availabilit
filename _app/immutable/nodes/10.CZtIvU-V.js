import{s as Ae,n as le,d,a as q,i as S,b as u,p as me,c as v,e as b,f as p,j,h as T,k as m,t as B,l as V,m as Ie,B as Qe,g as fe,u as ue,v as We,w as Xe}from"../chunks/DUYTDFI5.js";import{S as Pe,i as Ce,d as we,t as R,a as z,g as ge,c as ke,m as Ee,b as De,e as Se}from"../chunks/z4FfSzan.js";import{e as Te}from"../chunks/fXUx-Agj.js";import{a as Ve}from"../chunks/BF9jo3u2.js";import{g as Oe}from"../chunks/Ccp9Cg-t.js";import{b as xe,a as Ze,c as $e}from"../chunks/CzByQ_5z.js";import{H as et}from"../chunks/C2P6MsPl.js";function je(n){let e,t='<i class="fa-solid fa-pencil text-picton-blue"></i>',i,s;return{c(){e=m("button"),e.innerHTML=t,this.h()},l(l){e=b(l,"BUTTON",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-sjzna3"&&(e.innerHTML=t),this.h()},h(){v(e,"class","rounded-lg bg-blue-whale shadow shadow-black shadow-sm w-8 h-8")},m(l,r){S(l,e,r),i||(s=me(e,"click",n[11]),i=!0)},p:le,d(l){l&&d(e),i=!1,s()}}}function tt(n){let e;return{c(){e=m("i"),this.h()},l(t){e=b(t,"I",{class:!0}),p(e).forEach(d),this.h()},h(){v(e,"class","fa-solid fa-expand text-blue-whale")},m(t,i){S(t,e,i)},d(t){t&&d(e)}}}function st(n){let e;return{c(){e=m("i"),this.h()},l(t){e=b(t,"I",{class:!0}),p(e).forEach(d),this.h()},h(){v(e,"class","fa-solid fa-times text-blue-whale")},m(t,i){S(t,e,i)},d(t){t&&d(e)}}}function it(n){let e,t,i,s,l,r,c=n[0].subscribe.maxParticipants+"",a;return{c(){e=m("div"),t=m("i"),i=V(),s=m("span"),l=B(n[1]),r=B(" / "),a=B(c),this.h()},l(f){e=b(f,"DIV",{class:!0});var o=p(e);t=b(o,"I",{class:!0}),p(t).forEach(d),i=T(o),s=b(o,"SPAN",{});var h=p(s);l=j(h,n[1]),r=j(h," / "),a=j(h,c),h.forEach(d),o.forEach(d),this.h()},h(){v(t,"class","fa-solid fa-users"),v(e,"class","flex gap-2 items-center text-gray-600 flex-shrink-0 whitespace-nowrap")},m(f,o){S(f,e,o),u(e,t),u(e,i),u(e,s),u(s,l),u(s,r),u(s,a)},p(f,o){o&2&&q(l,f[1]),o&1&&c!==(c=f[0].subscribe.maxParticipants+"")&&q(a,c)},d(f){f&&d(e)}}}function lt(n){let e,t;function i(r,c){return c&1&&(e=null),r[10]?nt:(e==null&&(e=new Date(r[0].subscribe.subscriptionListOpenDate)>new Date),e?at:rt)}let s=i(n,-1),l=s(n);return{c(){l.c(),t=ue()},l(r){l.l(r),t=ue()},m(r,c){l.m(r,c),S(r,t,c)},p(r,c){s===(s=i(r,c))&&l?l.p(r,c):(l.d(1),l=s(r),l&&(l.c(),l.m(t.parentNode,t)))},d(r){r&&d(t),l.d(r)}}}function rt(n){let e,t,i=new Date(n[0].subscribe.subscriptionListCloseDate)+"",s;return{c(){e=m("span"),t=B("Activity subscription closed on "),s=B(i),this.h()},l(l){e=b(l,"SPAN",{class:!0});var r=p(e);t=j(r,"Activity subscription closed on "),s=j(r,i),r.forEach(d),this.h()},h(){v(e,"class","text-xs")},m(l,r){S(l,e,r),u(e,t),u(e,s)},p(l,r){r&1&&i!==(i=new Date(l[0].subscribe.subscriptionListCloseDate)+"")&&q(s,i)},d(l){l&&d(e)}}}function at(n){let e,t,i=new Date(n[0].subscribe.subscriptionListOpenDate)+"",s;return{c(){e=m("span"),t=B("Activity subscription opens on "),s=B(i),this.h()},l(l){e=b(l,"SPAN",{class:!0});var r=p(e);t=j(r,"Activity subscription opens on "),s=j(r,i),r.forEach(d),this.h()},h(){v(e,"class","text-xs")},m(l,r){S(l,e,r),u(e,t),u(e,s)},p(l,r){r&1&&i!==(i=new Date(l[0].subscribe.subscriptionListOpenDate)+"")&&q(s,i)},d(l){l&&d(e)}}}function nt(n){let e,t,i,s,l,r,c;function a(h,_){return h[2]||h[4]?ot:ct}let f=a(n),o=f(n);return{c(){e=m("button"),t=m("i"),s=V(),o.c(),this.h()},l(h){e=b(h,"BUTTON",{class:!0});var _=p(e);t=b(_,"I",{class:!0}),p(t).forEach(d),s=T(_),o.l(_),_.forEach(d),this.h()},h(){v(t,"class",i="fa-solid "+(n[2]||n[4]?"fa-check":"fa-plus")),v(e,"class",l="inline-flex shrink-0 cursor-pointer disabled:cursor-not-allowed disabled:bg-gray-700 items-center gap-2 px-4 py-2 rounded-md text-sm font-medium text-white "+(n[2]||n[4]?"bg-green-600":"bg-blue-whale hover:bg-blue-whale-dark")+" transition-colors duration-200"),e.disabled=!n[10]},m(h,_){S(h,e,_),u(e,t),u(e,s),o.m(e,null),r||(c=me(e,"click",n[8]),r=!0)},p(h,_){_&20&&i!==(i="fa-solid "+(h[2]||h[4]?"fa-check":"fa-plus"))&&v(t,"class",i),f!==(f=a(h))&&(o.d(1),o=f(h),o&&(o.c(),o.m(e,null))),_&20&&l!==(l="inline-flex shrink-0 cursor-pointer disabled:cursor-not-allowed disabled:bg-gray-700 items-center gap-2 px-4 py-2 rounded-md text-sm font-medium text-white "+(h[2]||h[4]?"bg-green-600":"bg-blue-whale hover:bg-blue-whale-dark")+" transition-colors duration-200")&&v(e,"class",l)},d(h){h&&d(e),o.d(),r=!1,c()}}}function ct(n){let e;return{c(){e=B("Join Activity")},l(t){e=j(t,"Join Activity")},m(t,i){S(t,e,i)},d(t){t&&d(e)}}}function ot(n){let e;return{c(){e=B("Joined activity")},l(t){e=j(t,"Joined activity")},m(t,i){S(t,e,i)},d(t){t&&d(e)}}}function ft(n){let e,t,i,s=n[0].name+"",l,r,c,a,f,o,h,_,E,g,A,y=n[0].location+"",O,w,P,G,J,U,Z=n[0].speakers.map(Be)+"",re,ae,K,F,ne,$=n[7](n[0].description)+"",Q,ee,X,te,W,H=n[5]&&je(n);function ce(k,I){return k[3]?st:tt}let M=ce(n),N=M(n),D=n[9]&&it(n),C=n[9]&&lt(n);return{c(){e=m("div"),t=m("div"),i=m("h3"),l=B(s),r=V(),c=m("div"),H&&H.c(),a=V(),f=m("button"),N.c(),o=V(),h=m("div"),_=m("div"),E=m("i"),g=V(),A=m("span"),O=B(y),w=V(),P=m("div"),G=m("i"),J=V(),U=m("span"),re=B(Z),ae=V(),D&&D.c(),K=V(),F=m("div"),ne=m("div"),Q=B($),ee=V(),X=m("div"),C&&C.c(),this.h()},l(k){e=b(k,"DIV",{class:!0});var I=p(e);t=b(I,"DIV",{class:!0});var oe=p(t);i=b(oe,"H3",{class:!0});var x=p(i);l=j(x,s),x.forEach(d),r=T(oe),c=b(oe,"DIV",{class:!0});var L=p(c);H&&H.l(L),a=T(L),f=b(L,"BUTTON",{class:!0});var Y=p(f);N.l(Y),Y.forEach(d),L.forEach(d),oe.forEach(d),o=T(I),h=b(I,"DIV",{class:!0});var se=p(h);_=b(se,"DIV",{class:!0});var ie=p(_);E=b(ie,"I",{class:!0}),p(E).forEach(d),g=T(ie),A=b(ie,"SPAN",{class:!0});var de=p(A);O=j(de,y),de.forEach(d),ie.forEach(d),w=T(se),P=b(se,"DIV",{class:!0});var ve=p(P);G=b(ve,"I",{class:!0}),p(G).forEach(d),J=T(ve),U=b(ve,"SPAN",{class:!0});var _e=p(U);re=j(_e,Z),_e.forEach(d),ve.forEach(d),ae=T(se),D&&D.l(se),se.forEach(d),I.forEach(d),K=T(k),F=b(k,"DIV",{class:!0});var he=p(F);ne=b(he,"DIV",{class:!0});var ye=p(ne);Q=j(ye,$),ye.forEach(d),ee=T(he),X=b(he,"DIV",{class:!0});var pe=p(X);C&&C.l(pe),pe.forEach(d),he.forEach(d),this.h()},h(){v(i,"class","text-xl font-semibold text-blue-whale leading-tight flex-1 mr-4 h-20"),v(f,"class","rounded-lg bg-gray-100 duration-100 transition-all hover:bg-gray-50 hover:shadow-md w-8 h-8"),v(c,"class","h-full flex gap-2 items-center"),v(t,"class","flex items-start justify-between mb-3"),v(E,"class","fa-solid fa-location-dot"),v(A,"class","text-sm font-medium"),v(_,"class","flex gap-2 items-center text-gray-600 whitespace-nowrap"),v(G,"class","fa-solid fa-user"),v(U,"class","text-sm font-medium"),v(P,"class","flex gap-2 items-center text-gray-600 whitespace-nowrap"),v(h,"class","flex flex-wrap gap-3"),v(e,"class","p-6 pb-2"),v(ne,"class","text-gray-700 text-sm leading-relaxed mb-4"),v(X,"class","flex items-center justify-between py-2 border-t border-gray-100"),v(F,"class","px-6")},m(k,I){S(k,e,I),u(e,t),u(t,i),u(i,l),u(t,r),u(t,c),H&&H.m(c,null),u(c,a),u(c,f),N.m(f,null),u(e,o),u(e,h),u(h,_),u(_,E),u(_,g),u(_,A),u(A,O),u(h,w),u(h,P),u(P,G),u(P,J),u(P,U),u(U,re),u(h,ae),D&&D.m(h,null),S(k,K,I),S(k,F,I),u(F,ne),u(ne,Q),u(F,ee),u(F,X),C&&C.m(X,null),te||(W=me(f,"click",n[12]),te=!0)},p(k,[I]){I&1&&s!==(s=k[0].name+"")&&q(l,s),k[5]?H?H.p(k,I):(H=je(k),H.c(),H.m(c,a)):H&&(H.d(1),H=null),M!==(M=ce(k))&&(N.d(1),N=M(k),N&&(N.c(),N.m(f,null))),I&1&&y!==(y=k[0].location+"")&&q(O,y),I&1&&Z!==(Z=k[0].speakers.map(Be)+"")&&q(re,Z),k[9]&&D.p(k,I),I&1&&$!==($=k[7](k[0].description)+"")&&q(Q,$),k[9]&&C.p(k,I)},i:le,o:le,d(k){k&&(d(e),d(K),d(F)),H&&H.d(),N.d(),D&&D.d(),C&&C.d(),te=!1,W()}}}const Be=n=>n.name;function ut(n,e,t){let i;Ie(n,xe,y=>t(5,i=y));let{activity:s}=e,{nrOfSubscribers:l}=e,{isSubscribed:r}=e,{close:c=!1}=e;const a=Qe();function f(y,O=150){return y.length<=O||c?y:y.substring(0,O).trim()+"..."}const o=async()=>{try{(await fetch(Ve(`/activity/${s.id}/subscribe`),{method:"POST",credentials:"include"})).ok?(t(4,h=!0),a("activitySubscribed",{activity:s,activityId:s.id})):console.error("Failed to subscribe to activity")}catch(y){console.error("Error subscribing to activity:",y)}};let h=!1;const _=s.subscribe&&s.subscribe.maxParticipants&&s.subscribe.subscribers,E=_&&!isNaN(Date.parse(s.subscribe.subscriptionListOpenDate))&&!isNaN(Date.parse(s.subscribe.subscriptionListCloseDate))&&new Date(s.subscribe.subscriptionListOpenDate)<=new Date&&new Date(s.subscribe.subscriptionListCloseDate)>new Date,g=()=>Oe(`/program/activity/edit?id=${s.id}`),A=()=>a(c?"close":"expand");return n.$$set=y=>{"activity"in y&&t(0,s=y.activity),"nrOfSubscribers"in y&&t(1,l=y.nrOfSubscribers),"isSubscribed"in y&&t(2,r=y.isSubscribed),"close"in y&&t(3,c=y.close)},[s,l,r,c,h,i,a,f,o,_,E,g,A]}class Ye extends Pe{constructor(e){super(),Ce(this,e,ut,ft,Ae,{activity:0,nrOfSubscribers:1,isSubscribed:2,close:3})}}function He(n){let e,t,i,s,l,r,c,a;return l=new Ye({props:{activity:n[0],nrOfSubscribers:n[1],isSubscribed:n[2],close:!0}}),l.$on("activitySubscribed",n[4]),l.$on("close",n[7]),{c(){e=m("button"),t=V(),i=m("div"),s=m("div"),Se(l.$$.fragment),this.h()},l(f){e=b(f,"BUTTON",{class:!0}),p(e).forEach(d),t=T(f),i=b(f,"DIV",{class:!0});var o=p(i);s=b(o,"DIV",{class:!0});var h=p(s);De(l.$$.fragment,h),h.forEach(d),o.forEach(d),this.h()},h(){v(e,"class","fixed top-0 left-0 w-full h-full bg-black/60 cursor-default backdrop-blur-lg"),v(s,"class","w-full md:max-w-3xl bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden"),v(i,"class","fixed w-screen h-screen left-0 top-0 flex items-center justify-center")},m(f,o){S(f,e,o),S(f,t,o),S(f,i,o),u(i,s),Ee(l,s,null),r=!0,c||(a=me(e,"click",n[6]),c=!0)},p(f,o){const h={};o&1&&(h.activity=f[0]),o&2&&(h.nrOfSubscribers=f[1]),o&4&&(h.isSubscribed=f[2]),l.$set(h)},i(f){r||(z(l.$$.fragment,f),r=!0)},o(f){R(l.$$.fragment,f),r=!1},d(f){f&&(d(e),d(t),d(i)),we(l),c=!1,a()}}}function dt(n){let e,t,i,s,l;t=new Ye({props:{activity:n[0],nrOfSubscribers:n[1],isSubscribed:n[2]}}),t.$on("activitySubscribed",n[4]),t.$on("expand",n[5]);let r=n[3]&&He(n);return{c(){e=m("div"),Se(t.$$.fragment),i=V(),r&&r.c(),s=ue(),this.h()},l(c){e=b(c,"DIV",{class:!0});var a=p(e);De(t.$$.fragment,a),a.forEach(d),i=T(c),r&&r.l(c),s=ue(),this.h()},h(){v(e,"class","bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 border border-gray-200 w-full md:max-w-sm shrink-0 svelte-18tlhkx")},m(c,a){S(c,e,a),Ee(t,e,null),S(c,i,a),r&&r.m(c,a),S(c,s,a),l=!0},p(c,[a]){const f={};a&1&&(f.activity=c[0]),a&2&&(f.nrOfSubscribers=c[1]),a&4&&(f.isSubscribed=c[2]),t.$set(f),c[3]?r?(r.p(c,a),a&8&&z(r,1)):(r=He(c),r.c(),z(r,1),r.m(s.parentNode,s)):r&&(ge(),R(r,1,1,()=>{r=null}),ke())},i(c){l||(z(t.$$.fragment,c),z(r),l=!0)},o(c){R(t.$$.fragment,c),R(r),l=!1},d(c){c&&(d(e),d(i),d(s)),we(t),r&&r.d(c)}}}function ht(n,e,t){let{activity:i}=e,{nrOfSubscribers:s}=e,{isSubscribed:l}=e,r=!1;const c=Qe();function a(_){c("activitySubscribed",_.detail)}const f=()=>t(3,r=!0),o=()=>t(3,r=!1),h=()=>t(3,r=!1);return n.$$set=_=>{"activity"in _&&t(0,i=_.activity),"nrOfSubscribers"in _&&t(1,s=_.nrOfSubscribers),"isSubscribed"in _&&t(2,l=_.isSubscribed)},[i,s,l,r,a,f,o,h]}class bt extends Pe{constructor(e){super(),Ce(this,e,ht,dt,Ae,{activity:0,nrOfSubscribers:1,isSubscribed:2})}}function Me(n,e,t){const i=n.slice();return i[15]=e[t],i}function mt(n){let e,t,i,s,l=n[0].name+"",r,c,a,f=Ne(n[0].beginTime,n[0].endTime)+"",o,h,_,E,g,A="Start:",y,O,w=be(n[0].beginTime)+"",P,G,J,U,Z="End:",re,ae,K=be(n[0].endTime)+"",F,ne,$,Q,ee,X,te,W,H,ce,M=n[5]&&Ue(n),N=n[4]&&Fe(n);return{c(){e=m("button"),t=m("div"),i=m("div"),s=m("h3"),r=B(l),c=V(),a=m("span"),o=B(f),h=V(),_=m("div"),E=m("div"),g=m("span"),g.textContent=A,y=V(),O=m("span"),P=B(w),G=V(),J=m("div"),U=m("span"),U.textContent=Z,re=V(),ae=m("span"),F=B(K),ne=V(),M&&M.c(),$=V(),Q=m("i"),X=V(),N&&N.c(),te=ue(),this.h()},l(D){e=b(D,"BUTTON",{class:!0});var C=p(e);t=b(C,"DIV",{class:!0});var k=p(t);i=b(k,"DIV",{class:!0});var I=p(i);s=b(I,"H3",{class:!0});var oe=p(s);r=j(oe,l),oe.forEach(d),c=T(I),a=b(I,"SPAN",{class:!0});var x=p(a);o=j(x,f),x.forEach(d),I.forEach(d),h=T(k),_=b(k,"DIV",{class:!0});var L=p(_);E=b(L,"DIV",{class:!0});var Y=p(E);g=b(Y,"SPAN",{class:!0,"data-svelte-h":!0}),fe(g)!=="svelte-11t2hy0"&&(g.textContent=A),y=T(Y),O=b(Y,"SPAN",{});var se=p(O);P=j(se,w),se.forEach(d),Y.forEach(d),G=T(L),J=b(L,"DIV",{class:!0});var ie=p(J);U=b(ie,"SPAN",{class:!0,"data-svelte-h":!0}),fe(U)!=="svelte-i1trgj"&&(U.textContent=Z),re=T(ie),ae=b(ie,"SPAN",{});var de=p(ae);F=j(de,K),de.forEach(d),ie.forEach(d),L.forEach(d),k.forEach(d),ne=T(C),M&&M.l(C),$=T(C),Q=b(C,"I",{class:!0}),p(Q).forEach(d),C.forEach(d),X=T(D),N&&N.l(D),te=ue(),this.h()},h(){v(s,"class","text-lg font-medium text-gray-900"),v(a,"class","inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800"),v(i,"class","flex items-center space-x-4"),v(g,"class","font-medium"),v(E,"class","flex items-center space-x-1"),v(U,"class","font-medium"),v(J,"class","flex items-center space-x-1"),v(_,"class","flex items-center space-x-6 text-sm text-gray-600"),v(t,"class","mr-auto"),v(Q,"class",ee=`fa-solid fa-chevron-${n[4]?"up":"down"}`),v(e,"class","p-6 w-full flex rounded-t-xl items-center gap-8 bg-gray-100 hover:bg-gray-200 transition-colors")},m(D,C){S(D,e,C),u(e,t),u(t,i),u(i,s),u(s,r),u(i,c),u(i,a),u(a,o),u(t,h),u(t,_),u(_,E),u(E,g),u(E,y),u(E,O),u(O,P),u(_,G),u(_,J),u(J,U),u(J,re),u(J,ae),u(ae,F),u(e,ne),M&&M.m(e,null),u(e,$),u(e,Q),S(D,X,C),N&&N.m(D,C),S(D,te,C),W=!0,H||(ce=me(e,"click",n[12]),H=!0)},p(D,C){(!W||C&1)&&l!==(l=D[0].name+"")&&q(r,l),(!W||C&1)&&f!==(f=Ne(D[0].beginTime,D[0].endTime)+"")&&q(o,f),(!W||C&1)&&w!==(w=be(D[0].beginTime)+"")&&q(P,w),(!W||C&1)&&K!==(K=be(D[0].endTime)+"")&&q(F,K),D[5]?M?M.p(D,C):(M=Ue(D),M.c(),M.m(e,$)):M&&(M.d(1),M=null),(!W||C&16&&ee!==(ee=`fa-solid fa-chevron-${D[4]?"up":"down"}`))&&v(Q,"class",ee),D[4]?N?(N.p(D,C),C&16&&z(N,1)):(N=Fe(D),N.c(),z(N,1),N.m(te.parentNode,te)):N&&(ge(),R(N,1,1,()=>{N=null}),ke())},i(D){W||(z(N),W=!0)},o(D){R(N),W=!1},d(D){D&&(d(e),d(X),d(te)),M&&M.d(),N&&N.d(D),H=!1,ce()}}}function vt(n){var oe;let e,t,i,s,l,r=n[0].name+"",c,a,f,o=(((oe=n[1])==null?void 0:oe[0].activity.name)??"")+"",h,_,E,g=Ne(n[0].beginTime,n[0].endTime)+"",A,y,O,w,P,G="Start:",J,U,Z=be(n[0].beginTime)+"",re,ae,K,F,ne="End:",$,Q,ee=be(n[0].endTime)+"",X,te,W,H,ce,M,N,D,C,k=n[6]&&qe(n),I=n[4]&&Ge(n);return{c(){e=m("button"),t=m("div"),i=m("div"),s=m("h3"),l=m("b"),c=B(r),a=B(":"),f=V(),h=B(o),_=V(),E=m("span"),A=B(g),y=V(),O=m("div"),w=m("div"),P=m("span"),P.textContent=G,J=V(),U=m("span"),re=B(Z),ae=V(),K=m("div"),F=m("span"),F.textContent=ne,$=V(),Q=m("span"),X=B(ee),te=V(),k&&k.c(),W=V(),H=m("i"),M=V(),I&&I.c(),N=ue(),this.h()},l(x){e=b(x,"BUTTON",{class:!0});var L=p(e);t=b(L,"DIV",{class:!0});var Y=p(t);i=b(Y,"DIV",{class:!0});var se=p(i);s=b(se,"H3",{class:!0});var ie=p(s);l=b(ie,"B",{});var de=p(l);c=j(de,r),a=j(de,":"),de.forEach(d),f=T(ie),h=j(ie,o),ie.forEach(d),_=T(se),E=b(se,"SPAN",{class:!0});var ve=p(E);A=j(ve,g),ve.forEach(d),se.forEach(d),y=T(Y),O=b(Y,"DIV",{class:!0});var _e=p(O);w=b(_e,"DIV",{class:!0});var he=p(w);P=b(he,"SPAN",{class:!0,"data-svelte-h":!0}),fe(P)!=="svelte-11t2hy0"&&(P.textContent=G),J=T(he),U=b(he,"SPAN",{});var ye=p(U);re=j(ye,Z),ye.forEach(d),he.forEach(d),ae=T(_e),K=b(_e,"DIV",{class:!0});var pe=p(K);F=b(pe,"SPAN",{class:!0,"data-svelte-h":!0}),fe(F)!=="svelte-i1trgj"&&(F.textContent=ne),$=T(pe),Q=b(pe,"SPAN",{});var Le=p(Q);X=j(Le,ee),Le.forEach(d),pe.forEach(d),_e.forEach(d),Y.forEach(d),te=T(L),k&&k.l(L),W=T(L),H=b(L,"I",{class:!0}),p(H).forEach(d),L.forEach(d),M=T(x),I&&I.l(x),N=ue(),this.h()},h(){v(s,"class","text-lg font-medium text-gray-900"),v(E,"class","inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800"),v(i,"class","flex items-center space-x-4"),v(P,"class","font-medium"),v(w,"class","flex items-center space-x-1"),v(F,"class","font-medium"),v(K,"class","flex items-center space-x-1"),v(O,"class","flex items-center space-x-6 text-sm text-gray-600"),v(t,"class","mr-auto"),v(H,"class",ce=`fa-solid fa-chevron-${n[4]?"up":"down"}`),v(e,"class","py-4 px-6 w-full flex rounded-t-xl items-center gap-8 bg-gray-100 hover:bg-gray-200 transition-colors")},m(x,L){S(x,e,L),u(e,t),u(t,i),u(i,s),u(s,l),u(l,c),u(l,a),u(s,f),u(s,h),u(i,_),u(i,E),u(E,A),u(t,y),u(t,O),u(O,w),u(w,P),u(w,J),u(w,U),u(U,re),u(O,ae),u(O,K),u(K,F),u(K,$),u(K,Q),u(Q,X),u(e,te),k&&k.m(e,null),u(e,W),u(e,H),S(x,M,L),I&&I.m(x,L),S(x,N,L),D||(C=me(e,"click",n[11]),D=!0)},p(x,L){var Y;L&1&&r!==(r=x[0].name+"")&&q(c,r),L&2&&o!==(o=(((Y=x[1])==null?void 0:Y[0].activity.name)??"")+"")&&q(h,o),L&1&&g!==(g=Ne(x[0].beginTime,x[0].endTime)+"")&&q(A,g),L&1&&Z!==(Z=be(x[0].beginTime)+"")&&q(re,Z),L&1&&ee!==(ee=be(x[0].endTime)+"")&&q(X,ee),x[6]?k?k.p(x,L):(k=qe(x),k.c(),k.m(e,W)):k&&(k.d(1),k=null),L&16&&ce!==(ce=`fa-solid fa-chevron-${x[4]?"up":"down"}`)&&v(H,"class",ce),x[4]?I?I.p(x,L):(I=Ge(x),I.c(),I.m(N.parentNode,N)):I&&(I.d(1),I=null)},i:le,o:le,d(x){x&&(d(e),d(M),d(N)),k&&k.d(),I&&I.d(x),D=!1,C()}}}function Ue(n){let e,t,i,s,l,r=n[5].name+"",c,a,f,o,h,_,E=n[5].location+"",g;return{c(){e=m("div"),t=m("div"),i=m("i"),s=V(),l=m("span"),c=B(r),a=V(),f=m("div"),o=m("i"),h=V(),_=m("span"),g=B(E),this.h()},l(A){e=b(A,"DIV",{class:!0});var y=p(e);t=b(y,"DIV",{class:!0});var O=p(t);i=b(O,"I",{class:!0}),p(i).forEach(d),s=T(O),l=b(O,"SPAN",{class:!0});var w=p(l);c=j(w,r),w.forEach(d),O.forEach(d),a=T(y),f=b(y,"DIV",{class:!0});var P=p(f);o=b(P,"I",{class:!0}),p(o).forEach(d),h=T(P),_=b(P,"SPAN",{class:!0});var G=p(_);g=j(G,E),G.forEach(d),P.forEach(d),y.forEach(d),this.h()},h(){v(i,"class","fa-solid fa-person-chalkboard"),v(l,"class","max-w-48 overflow-hidden whitespace-nowrap text-ellipsis"),v(t,"class","flex gap-1 items-center"),v(o,"class","fa-solid fa-location-dot"),v(_,"class","max-w-32 overflow-hidden whitespace-nowrap text-ellipsis"),v(f,"class","flex gap-1 items-center"),v(e,"class","bg-blue-whale px-4 py-2 rounded-full items-center text-white flex gap-2")},m(A,y){S(A,e,y),u(e,t),u(t,i),u(t,s),u(t,l),u(l,c),u(e,a),u(e,f),u(f,o),u(f,h),u(f,_),u(_,g)},p(A,y){y&32&&r!==(r=A[5].name+"")&&q(c,r),y&32&&E!==(E=A[5].location+"")&&q(g,E)},d(A){A&&d(e)}}}function Fe(n){let e,t,i,s=Te(n[1]),l=[];for(let a=0;a<s.length;a+=1)l[a]=ze(Me(n,s,a));const r=a=>R(l[a],1,1,()=>{l[a]=null});let c=n[2]&&Je(n);return{c(){e=m("div");for(let a=0;a<l.length;a+=1)l[a].c();t=V(),c&&c.c(),this.h()},l(a){e=b(a,"DIV",{class:!0});var f=p(e);for(let o=0;o<l.length;o+=1)l[o].l(f);t=T(f),c&&c.l(f),f.forEach(d),this.h()},h(){v(e,"class","flex gap-4 flex-col md:flex-row items-stretch bg-gray-300 p-4 rounded-b-xl overflow-auto")},m(a,f){S(a,e,f);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);u(e,t),c&&c.m(e,null),i=!0},p(a,f){if(f&394){s=Te(a[1]);let o;for(o=0;o<s.length;o+=1){const h=Me(a,s,o);l[o]?(l[o].p(h,f),z(l[o],1)):(l[o]=ze(h),l[o].c(),z(l[o],1),l[o].m(e,t))}for(ge(),o=s.length;o<l.length;o+=1)r(o);ke()}a[2]?c?c.p(a,f):(c=Je(a),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(a){if(!i){for(let f=0;f<s.length;f+=1)z(l[f]);i=!0}},o(a){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)R(l[f]);i=!1},d(a){a&&d(e),Xe(l,a),c&&c.d()}}}function ze(n){let e,t;return e=new bt({props:{activity:n[15].activity,nrOfSubscribers:n[15].nrOfSubscribers,isSubscribed:n[7](n[3],n[15].activity.id)}}),e.$on("activitySubscribed",n[8]),{c(){Se(e.$$.fragment)},l(i){De(e.$$.fragment,i)},m(i,s){Ee(e,i,s),t=!0},p(i,s){const l={};s&2&&(l.activity=i[15].activity),s&2&&(l.nrOfSubscribers=i[15].nrOfSubscribers),s&10&&(l.isSubscribed=i[7](i[3],i[15].activity.id)),e.$set(l)},i(i){t||(z(e.$$.fragment,i),t=!0)},o(i){R(e.$$.fragment,i),t=!1},d(i){we(e,i)}}}function Je(n){let e,t,i="+",s,l;return{c(){e=m("div"),t=m("button"),t.textContent=i,this.h()},l(r){e=b(r,"DIV",{class:!0});var c=p(e);t=b(c,"BUTTON",{class:!0,"data-svelte-h":!0}),fe(t)!=="svelte-1cav9my"&&(t.textContent=i),c.forEach(d),this.h()},h(){v(t,"class","size-16 bg-blue-whale text-white text-5xl rounded-full ml-2"),v(e,"class","flex items-center")},m(r,c){S(r,e,c),u(e,t),s||(l=me(t,"click",n[13]),s=!0)},p:le,d(r){r&&d(e),s=!1,l()}}}function qe(n){let e,t='<i class="fa-solid fa-pencil text-picton-blue"></i>',i,s;return{c(){e=m("button"),e.innerHTML=t,this.h()},l(l){e=b(l,"BUTTON",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-1bvd5dk"&&(e.innerHTML=t),this.h()},h(){v(e,"class","rounded-lg bg-blue-whale shadow shadow-black shadow-sm w-8 h-8")},m(l,r){S(l,e,r),i||(s=me(e,"click",n[10]),i=!0)},p:le,d(l){l&&d(e),i=!1,s()}}}function Ge(n){let e,t=n[1][0].activity.description+"",i,s,l,r,c,a='<span class="text-xs">This is a keynote, you are automatically subscribed to this activity</span>';return{c(){e=m("div"),i=B(t),s=V(),l=m("br"),r=V(),c=m("div"),c.innerHTML=a,this.h()},l(f){e=b(f,"DIV",{class:!0});var o=p(e);i=j(o,t),s=T(o),l=b(o,"BR",{}),r=T(o),c=b(o,"DIV",{class:!0,"data-svelte-h":!0}),fe(c)!=="svelte-mgeikw"&&(c.innerHTML=a),o.forEach(d),this.h()},h(){v(c,"class","pt-2 mt-2 border-t"),v(e,"class","flex gap-2 flex-col items-stretch bg-gray-100 py-2 px-6 rounded-b-xl")},m(f,o){S(f,e,o),u(e,i),u(e,s),u(e,l),u(e,r),u(e,c)},p(f,o){o&2&&t!==(t=f[1][0].activity.description+"")&&q(i,t)},d(f){f&&d(e)}}}function _t(n){let e,t,i,s;const l=[vt,mt],r=[];function c(a,f){return a[9]?0:1}return t=c(n),i=r[t]=l[t](n),{c(){e=m("div"),i.c(),this.h()},l(a){e=b(a,"DIV",{class:!0});var f=p(e);i.l(f),f.forEach(d),this.h()},h(){v(e,"class","flex flex-col shadow-md shadow-black/35 rounded-xl overflow-hidden")},m(a,f){S(a,e,f),r[t].m(e,null),s=!0},p(a,[f]){i.p(a,f)},i(a){s||(z(i),s=!0)},o(a){R(i),s=!1},d(a){a&&d(e),r[t].d()}}}function be(n){return new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}function Ne(n,e){const t=new Date(n),s=new Date(e).getTime()-t.getTime(),l=Math.round(s/(1e3*60));if(l<60)return`${l} min`;{const r=Math.floor(l/60),c=l%60;return c>0?`${r}h ${c}m`:`${r}h`}}function pt(n,e,t){let i;Ie(n,xe,w=>t(6,i=w));let{part:s}=e,{activities:l}=e,{admin:r}=e,c=!0,a;async function f(){try{const w=await fetch(Ve("/profile"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});w.ok&&t(3,a=await w.json())}catch(w){console.error(w)}}const o=(w,P)=>{var G;return((G=w==null?void 0:w.subscriptions)==null?void 0:G.length)&&w.subscriptions.some(J=>J.activity.id===P)};let h;function _(w){const{activity:P}=w.detail;t(4,c=!1),t(5,h=P),f()}We(()=>{f()});const E=l.some(w=>w.activity.speakers.some(P=>P.type==="keynote")),g=()=>Oe(`/program/activity/edit?id=${l[0].activity.id}`),A=()=>t(4,c=!c),y=()=>t(4,c=!c),O=()=>Oe(`/program/activity/create?programPartId=${s.id}`);return n.$$set=w=>{"part"in w&&t(0,s=w.part),"activities"in w&&t(1,l=w.activities),"admin"in w&&t(2,r=w.admin)},n.$$.update=()=>{var w;n.$$.dirty&10&&t(5,h=a&&a.subscriptions&&l?((w=l.find(P=>a.subscriptions.some(G=>{var J,U;return((J=G.activity)==null?void 0:J.id)===((U=P.activity)==null?void 0:U.id)})))==null?void 0:w.activity)??void 0:void 0)},[s,l,r,a,c,h,i,o,_,E,g,A,y,O]}class gt extends Pe{constructor(e){super(),Ce(this,e,pt,_t,Ae,{part:0,activities:1,admin:2})}}function Ke(n,e,t){const i=n.slice();return i[11]=e[t],i}function kt(n){let e,t;return{c(){e=m("div"),t=B(n[5]),this.h()},l(i){e=b(i,"DIV",{class:!0});var s=p(e);t=j(s,n[5]),s.forEach(d),this.h()},h(){v(e,"class","bg-red-100 text-red-700 p-4 rounded mt-12 text-center")},m(i,s){S(i,e,s),u(e,t)},p(i,s){s&32&&q(t,i[5])},i:le,o:le,d(i){i&&d(e)}}}function yt(n){let e,t,i,s;const l=[Dt,Et,wt],r=[];function c(a,f){return a[4]?0:a[2].length===0?1:2}return e=c(n),t=r[e]=l[e](n),{c(){t.c(),i=ue()},l(a){t.l(a),i=ue()},m(a,f){r[e].m(a,f),S(a,i,f),s=!0},p(a,f){let o=e;e=c(a),e===o?r[e].p(a,f):(ge(),R(r[o],1,1,()=>{r[o]=null}),ke(),t=r[e],t?t.p(a,f):(t=r[e]=l[e](a),t.c()),z(t,1),t.m(i.parentNode,i))},i(a){s||(z(t),s=!0)},o(a){R(t),s=!1},d(a){a&&d(i),r[e].d(a)}}}function wt(n){let e,t,i=Te(n[2]),s=[];for(let r=0;r<i.length;r+=1)s[r]=Re(Ke(n,i,r));const l=r=>R(s[r],1,1,()=>{s[r]=null});return{c(){e=m("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=b(r,"DIV",{class:!0});var c=p(e);for(let a=0;a<s.length;a+=1)s[a].l(c);c.forEach(d),this.h()},h(){v(e,"class","space-y-8 p-8")},m(r,c){S(r,e,c);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(r,c){if(c&76){i=Te(r[2]);let a;for(a=0;a<i.length;a+=1){const f=Ke(r,i,a);s[a]?(s[a].p(f,c),z(s[a],1)):(s[a]=Re(f),s[a].c(),z(s[a],1),s[a].m(e,null))}for(ge(),a=i.length;a<s.length;a+=1)l(a);ke()}},i(r){if(!t){for(let c=0;c<i.length;c+=1)z(s[c]);t=!0}},o(r){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)R(s[c]);t=!1},d(r){r&&d(e),Xe(s,r)}}}function Et(n){let e,t='<div class="text-gray-500 text-lg">No program parts scheduled yet</div> <p class="text-gray-400 mt-2">Check back later for updates</p>';return{c(){e=m("div"),e.innerHTML=t,this.h()},l(i){e=b(i,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-calpt5"&&(e.innerHTML=t),this.h()},h(){v(e,"class","text-center py-12")},m(i,s){S(i,e,s)},p:le,i:le,o:le,d(i){i&&d(e)}}}function Dt(n){let e,t,i,s,l,r="Loading program...",c,a;function f(_,E){if(_[0])return It;if(_[1])return St}let o=f(n),h=o&&o(n);return{c(){e=m("div"),t=m("div"),i=m("div"),s=V(),l=m("div"),l.textContent=r,c=V(),a=m("div"),h&&h.c(),this.h()},l(_){e=b(_,"DIV",{class:!0});var E=p(e);t=b(E,"DIV",{class:!0});var g=p(t);i=b(g,"DIV",{class:!0}),p(i).forEach(d),s=T(g),l=b(g,"DIV",{class:!0,"data-svelte-h":!0}),fe(l)!=="svelte-hb50jb"&&(l.textContent=r),c=T(g),a=b(g,"DIV",{class:!0});var A=p(a);h&&h.l(A),A.forEach(d),g.forEach(d),E.forEach(d),this.h()},h(){v(i,"class","animate-spin rounded-full h-12 w-12 border-b-2 border-blue-whale mx-auto mb-4"),v(l,"class","text-gray-500 text-lg"),v(a,"class","text-gray-400 text-sm mt-2"),v(t,"class","text-center"),v(e,"class","flex justify-center items-center py-16")},m(_,E){S(_,e,E),u(e,t),u(t,i),u(t,s),u(t,l),u(t,c),u(t,a),h&&h.m(a,null)},p(_,E){o!==(o=f(_))&&(h&&h.d(1),h=o&&o(_),h&&(h.c(),h.m(a,null)))},i:le,o:le,d(_){_&&d(e),h&&h.d()}}}function Re(n){let e,t;function i(...s){return n[7](n[11],...s)}return e=new gt({props:{part:n[11],activities:n[3].filter(i),admin:n[6]}}),{c(){Se(e.$$.fragment)},l(s){De(e.$$.fragment,s)},m(s,l){Ee(e,s,l),t=!0},p(s,l){n=s;const r={};l&4&&(r.part=n[11]),l&12&&(r.activities=n[3].filter(i)),l&64&&(r.admin=n[6]),e.$set(r)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){R(e.$$.fragment,s),t=!1},d(s){we(e,s)}}}function St(n){let e;return{c(){e=B("Loading activities...")},l(t){e=j(t,"Loading activities...")},m(t,i){S(t,e,i)},d(t){t&&d(e)}}}function It(n){let e;return{c(){e=B("Loading program parts...")},l(t){e=j(t,"Loading program parts...")},m(t,i){S(t,e,i)},d(t){t&&d(e)}}}function Tt(n){let e,t,i,s,l,r;e=new et({props:{title:"Program"}});const c=[yt,kt],a=[];function f(o,h){return o[5]?1:0}return s=f(n),l=a[s]=c[s](n),{c(){Se(e.$$.fragment),t=V(),i=m("div"),l.c(),this.h()},l(o){De(e.$$.fragment,o),t=T(o),i=b(o,"DIV",{id:!0,class:!0});var h=p(i);l.l(h),h.forEach(d),this.h()},h(){v(i,"id","program_section"),v(i,"class","container flex-col text-blue-whale gap-4 text-center md:text-left")},m(o,h){Ee(e,o,h),S(o,t,h),S(o,i,h),a[s].m(i,null),r=!0},p(o,[h]){let _=s;s=f(o),s===_?a[s].p(o,h):(ge(),R(a[_],1,1,()=>{a[_]=null}),ke(),l=a[s],l?l.p(o,h):(l=a[s]=c[s](o),l.c()),z(l,1),l.m(i,null))},i(o){r||(z(e.$$.fragment,o),z(l),r=!0)},o(o){R(e.$$.fragment,o),R(l),r=!1},d(o){o&&(d(t),d(i)),we(e,o),a[s].d()}}}function Vt(n,e,t){let i,s;Ie(n,$e,g=>t(8,i=g)),Ie(n,xe,g=>t(6,s=g));let l=[],r=[],c=!0,a="",f=!0,o=!0;We(async()=>{i||await Ze.init(),await h(),await _()});async function h(){t(0,f=!0),t(5,a="");try{const g=await fetch(Ve("/programpart"));g.ok?t(2,l=await g.json()):(t(5,a=g.status===401?"Unauthorized":"Failed to load program"),console.error("Failed to fetch program parts:",g.status))}catch(g){t(5,a="Network error occurred"),console.error("Error fetching program parts:",g)}finally{t(0,f=!1)}}async function _(){t(1,o=!0),t(5,a="");try{const g=await fetch(Ve("/activity"));g.ok?t(3,r=await g.json()):(t(5,a=g.status===401?"Unauthorized":"Failed to load activities"),console.error("Failed to fetch activities:",g.status))}catch(g){t(5,a="Network error occurred"),console.error("Error fetching activities:",g)}finally{t(1,o=!1)}}const E=(g,A)=>{var y,O;return((O=(y=A==null?void 0:A.activity)==null?void 0:y.programPart)==null?void 0:O.id)===g.id};return n.$$.update=()=>{n.$$.dirty&3&&t(4,c=f||o)},[f,o,l,r,c,a,s,E]}class jt extends Pe{constructor(e){super(),Ce(this,e,Vt,Tt,Ae,{})}}export{jt as component};
