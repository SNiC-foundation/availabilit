import{s as st,d as u,r as at,i as P,b as c,p as z,c as p,A as it,h as A,e as m,f as x,g as L,l as V,k as v,v as ot,a as tt,j as et,t as rt,n as I}from"../chunks/DUYTDFI5.js";import{S as nt,i as lt,t as R,a as G,c as ct,d as dt,m as ut,b as ft,e as mt,g as vt}from"../chunks/z4FfSzan.js";import{g as F}from"../chunks/DPrOiqGd.js";import{a as Z}from"../chunks/BF9jo3u2.js";import{g as ht}from"../chunks/CSE0RT46.js";import{a as pt}from"../chunks/DI5WZEu1.js";import{A as _t}from"../chunks/B8etWoAY.js";function $(i){let t,r=i[0].name+"",e;return{c(){t=v("p"),e=rt(r),this.h()},l(a){t=m(a,"P",{class:!0});var s=x(t);e=et(s,r),s.forEach(u),this.h()},h(){p(t,"class","text-gray-600 mt-1")},m(a,s){P(a,t,s),c(t,e)},p(a,s){s&1&&r!==(r=a[0].name+"")&&tt(e,r)},d(a){a&&u(t)}}}function gt(i){let t,r='<div class="text-gray-500 text-lg">Activity not found</div> <p class="text-gray-400 mt-2">The activity you&#39;re looking for doesn&#39;t exist or has been deleted.</p>';return{c(){t=v("div"),t.innerHTML=r,this.h()},l(e){t=m(e,"DIV",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-c6pbud"&&(t.innerHTML=r),this.h()},h(){p(t,"class","text-center py-12")},m(e,a){P(e,t,a)},p:I,i:I,o:I,d(e){e&&u(t)}}}function yt(i){let t,r;return t=new _t({props:{activity:i[0],programPartId:i[0].programPart.id,isEdit:!0}}),t.$on("success",i[5]),t.$on("cancel",i[6]),{c(){mt(t.$$.fragment)},l(e){ft(t.$$.fragment,e)},m(e,a){ut(t,e,a),r=!0},p(e,a){const s={};a&1&&(s.activity=e[0]),a&1&&(s.programPartId=e[0].programPart.id),t.$set(s)},i(e){r||(G(t.$$.fragment,e),r=!0)},o(e){R(t.$$.fragment,e),r=!1},d(e){dt(t,e)}}}function bt(i){let t,r,e,a,s,n="Retry",f,_;return{c(){t=v("div"),r=rt(i[2]),e=V(),a=v("div"),s=v("button"),s.textContent=n,this.h()},l(g){t=m(g,"DIV",{class:!0});var h=x(t);r=et(h,i[2]),e=A(h),a=m(h,"DIV",{class:!0});var T=x(a);s=m(T,"BUTTON",{class:!0,"data-svelte-h":!0}),L(s)!=="svelte-a61ak6"&&(s.textContent=n),T.forEach(u),h.forEach(u),this.h()},h(){p(s,"class","bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"),p(a,"class","mt-4"),p(t,"class","bg-red-100 text-red-700 p-4 rounded")},m(g,h){P(g,t,h),c(t,r),c(t,e),c(t,a),c(a,s),f||(_=z(s,"click",i[3]),f=!0)},p(g,h){h&4&&tt(r,g[2])},i:I,o:I,d(g){g&&u(t),f=!1,_()}}}function kt(i){let t,r='<div class="text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-whale mx-auto mb-4"></div> <div class="text-gray-500 text-lg">Loading activity...</div></div>';return{c(){t=v("div"),t.innerHTML=r,this.h()},l(e){t=m(e,"DIV",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-1s54zvh"&&(t.innerHTML=r),this.h()},h(){p(t,"class","flex justify-center items-center py-16")},m(e,a){P(e,t,a)},p:I,i:I,o:I,d(e){e&&u(t)}}}function xt(i){var Y;let t,r,e,a,s,n,f,_,g="Edit Activity",h,T,l,w,J="Delete activity",O,E,K="Back to Program",S,y,b,H,q,Q;document.title=t="Edit Activity - "+(((Y=i[0])==null?void 0:Y.name)||"Loading...");let d=i[0]&&$(i);const W=[kt,bt,yt,gt],C=[];function X(o,k){return o[1]?0:o[2]?1:o[0]?2:3}return y=X(i),b=C[y]=W[y](i),{c(){r=V(),e=v("div"),a=v("div"),s=v("div"),n=v("div"),f=v("div"),_=v("h1"),_.textContent=g,h=V(),d&&d.c(),T=V(),l=v("div"),w=v("button"),w.textContent=J,O=V(),E=v("button"),E.textContent=K,S=V(),b.c(),this.h()},l(o){it("svelte-ms4wk0",document.head).forEach(u),r=A(o),e=m(o,"DIV",{class:!0});var D=x(e);a=m(D,"DIV",{class:!0});var M=x(a);s=m(M,"DIV",{class:!0});var N=x(s);n=m(N,"DIV",{class:!0});var U=x(n);f=m(U,"DIV",{});var j=x(f);_=m(j,"H1",{class:!0,"data-svelte-h":!0}),L(_)!=="svelte-159g46s"&&(_.textContent=g),h=A(j),d&&d.l(j),j.forEach(u),T=A(U),l=m(U,"DIV",{class:!0});var B=x(l);w=m(B,"BUTTON",{class:!0,"data-svelte-h":!0}),L(w)!=="svelte-yi2guz"&&(w.textContent=J),O=A(B),E=m(B,"BUTTON",{class:!0,"data-svelte-h":!0}),L(E)!=="svelte-g8vtuc"&&(E.textContent=K),B.forEach(u),U.forEach(u),S=A(N),b.l(N),N.forEach(u),M.forEach(u),D.forEach(u),this.h()},h(){p(_,"class","text-3xl font-bold text-blue-whale"),p(w,"class","bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"),p(E,"class","bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"),p(l,"class","flex gap-2"),p(n,"class","flex justify-between items-center mb-6"),p(s,"class","bg-white rounded-lg shadow-md p-8"),p(a,"class","max-w-4xl my-8 mx-auto"),p(e,"class","min-h-screen bg-bottom-backdrop p-8")},m(o,k){P(o,r,k),P(o,e,k),c(e,a),c(a,s),c(s,n),c(n,f),c(f,_),c(f,h),d&&d.m(f,null),c(n,T),c(n,l),c(l,w),c(l,O),c(l,E),c(s,S),C[y].m(s,null),H=!0,q||(Q=[z(w,"click",i[4]),z(E,"click",i[7])],q=!0)},p(o,[k]){var M;(!H||k&1)&&t!==(t="Edit Activity - "+(((M=o[0])==null?void 0:M.name)||"Loading..."))&&(document.title=t),o[0]?d?d.p(o,k):(d=$(o),d.c(),d.m(f,null)):d&&(d.d(1),d=null);let D=y;y=X(o),y===D?C[y].p(o,k):(vt(),R(C[D],1,1,()=>{C[D]=null}),ct(),b=C[y],b?b.p(o,k):(b=C[y]=W[y](o),b.c()),G(b,1),b.m(s,null))},i(o){H||(G(b),H=!0)},o(o){R(b),H=!1},d(o){o&&(u(r),u(e)),d&&d.d(),C[y].d(),q=!1,at(Q)}}}function wt(i,t,r){let e=0,a=null,s=!0,n="";ot(async()=>{await pt.requireAdmin(),e=ht("id"),await f()});async function f(){r(1,s=!0),r(2,n="");try{const l=await fetch(Z(`/activity/${e}`),{credentials:"include"});l.ok?r(0,a=await l.json()):(r(2,n=l.status===404?"Activity not found":"Failed to load activity"),console.error("Failed to fetch activity:",l.status))}catch(l){r(2,n="Network error occurred"),console.error("Error fetching activity:",l)}finally{r(1,s=!1)}}async function _(){r(1,s=!0),r(2,n="");try{(await fetch(Z(`/activity/${e}`),{method:"DELETE",credentials:"include"})).ok?F("/program"):r(2,n="Could not delete activity")}catch(l){r(2,n="Network error occurred"),console.error("Error deleting activity:",l)}finally{r(1,s=!1)}}function g(l){setTimeout(()=>{F("/program")},2e3)}function h(){F("/program")}return[a,s,n,f,_,g,h,()=>F("/program")]}class Lt extends nt{constructor(t){super(),lt(this,t,wt,xt,st,{})}}export{Lt as component};
